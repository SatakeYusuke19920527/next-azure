(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3417:function(a,b,c){"use strict";c.d(b,{Pi:function(){return dE}});let d={HttpHeaders:{Authorization:"authorization",ETag:"etag",MethodOverride:"X-HTTP-Method",Slug:"Slug",ContentType:"Content-Type",LastModified:"Last-Modified",ContentEncoding:"Content-Encoding",CharacterSet:"CharacterSet",UserAgent:"User-Agent",IfModifiedSince:"If-Modified-Since",IfMatch:"If-Match",IfNoneMatch:"If-None-Match",ContentLength:"Content-Length",AcceptEncoding:"Accept-Encoding",KeepAlive:"Keep-Alive",CacheControl:"Cache-Control",TransferEncoding:"Transfer-Encoding",ContentLanguage:"Content-Language",ContentLocation:"Content-Location",ContentMd5:"Content-Md5",ContentRange:"Content-Range",Accept:"Accept",AcceptCharset:"Accept-Charset",AcceptLanguage:"Accept-Language",IfRange:"If-Range",IfUnmodifiedSince:"If-Unmodified-Since",MaxForwards:"Max-Forwards",ProxyAuthorization:"Proxy-Authorization",AcceptRanges:"Accept-Ranges",ProxyAuthenticate:"Proxy-Authenticate",RetryAfter:"Retry-After",SetCookie:"Set-Cookie",WwwAuthenticate:"Www-Authenticate",Origin:"Origin",Host:"Host",AccessControlAllowOrigin:"Access-Control-Allow-Origin",AccessControlAllowHeaders:"Access-Control-Allow-Headers",KeyValueEncodingFormat:"application/x-www-form-urlencoded",WrapAssertionFormat:"wrap_assertion_format",WrapAssertion:"wrap_assertion",WrapScope:"wrap_scope",SimpleToken:"SWT",HttpDate:"date",Prefer:"Prefer",Location:"Location",Referer:"referer",A_IM:"A-IM",Query:"x-ms-documentdb-query",IsQuery:"x-ms-documentdb-isquery",IsQueryPlan:"x-ms-cosmos-is-query-plan-request",SupportedQueryFeatures:"x-ms-cosmos-supported-query-features",QueryVersion:"x-ms-cosmos-query-version",Continuation:"x-ms-continuation",PageSize:"x-ms-max-item-count",ItemCount:"x-ms-item-count",ActivityId:"x-ms-activity-id",PreTriggerInclude:"x-ms-documentdb-pre-trigger-include",PreTriggerExclude:"x-ms-documentdb-pre-trigger-exclude",PostTriggerInclude:"x-ms-documentdb-post-trigger-include",PostTriggerExclude:"x-ms-documentdb-post-trigger-exclude",IndexingDirective:"x-ms-indexing-directive",SessionToken:"x-ms-session-token",ConsistencyLevel:"x-ms-consistency-level",XDate:"x-ms-date",CollectionPartitionInfo:"x-ms-collection-partition-info",CollectionServiceInfo:"x-ms-collection-service-info",RetryAfterInMilliseconds:"x-ms-retry-after-ms",RetryAfterInMs:"x-ms-retry-after-ms",IsFeedUnfiltered:"x-ms-is-feed-unfiltered",ResourceTokenExpiry:"x-ms-documentdb-expiry-seconds",EnableScanInQuery:"x-ms-documentdb-query-enable-scan",EmitVerboseTracesInQuery:"x-ms-documentdb-query-emit-traces",EnableCrossPartitionQuery:"x-ms-documentdb-query-enablecrosspartition",ParallelizeCrossPartitionQuery:"x-ms-documentdb-query-parallelizecrosspartitionquery",ResponseContinuationTokenLimitInKB:"x-ms-documentdb-responsecontinuationtokenlimitinkb",PopulateQueryMetrics:"x-ms-documentdb-populatequerymetrics",QueryMetrics:"x-ms-documentdb-query-metrics",Version:"x-ms-version",OwnerFullName:"x-ms-alt-content-path",OwnerId:"x-ms-content-path",PartitionKey:"x-ms-documentdb-partitionkey",PartitionKeyRangeID:"x-ms-documentdb-partitionkeyrangeid",MaxEntityCount:"x-ms-root-entity-max-count",CurrentEntityCount:"x-ms-root-entity-current-count",CollectionQuotaInMb:"x-ms-collection-quota-mb",CollectionCurrentUsageInMb:"x-ms-collection-usage-mb",MaxMediaStorageUsageInMB:"x-ms-max-media-storage-usage-mb",CurrentMediaStorageUsageInMB:"x-ms-media-storage-usage-mb",RequestCharge:"x-ms-request-charge",PopulateQuotaInfo:"x-ms-documentdb-populatequotainfo",MaxResourceQuota:"x-ms-resource-quota",OfferType:"x-ms-offer-type",OfferThroughput:"x-ms-offer-throughput",AutoscaleSettings:"x-ms-cosmos-offer-autopilot-settings",DisableRUPerMinuteUsage:"x-ms-documentdb-disable-ru-per-minute-usage",IsRUPerMinuteUsed:"x-ms-documentdb-is-ru-per-minute-used",OfferIsRUPerMinuteThroughputEnabled:"x-ms-offer-is-ru-per-minute-throughput-enabled",IndexTransformationProgress:"x-ms-documentdb-collection-index-transformation-progress",LazyIndexingProgress:"x-ms-documentdb-collection-lazy-indexing-progress",IsUpsert:"x-ms-documentdb-is-upsert",SubStatus:"x-ms-substatus",EnableScriptLogging:"x-ms-documentdb-script-enable-logging",ScriptLogResults:"x-ms-documentdb-script-log-results",ALLOW_MULTIPLE_WRITES:"x-ms-cosmos-allow-tentative-writes",IsBatchRequest:"x-ms-cosmos-is-batch-request",IsBatchAtomic:"x-ms-cosmos-batch-atomic",BatchContinueOnError:"x-ms-cosmos-batch-continue-on-error",DedicatedGatewayPerRequestCacheStaleness:"x-ms-dedicatedgateway-max-age",ForceRefresh:"x-ms-force-refresh"},WritableLocations:"writableLocations",ReadableLocations:"readableLocations",ENABLE_MULTIPLE_WRITABLE_LOCATIONS:"enableMultipleWriteLocations",DefaultUnavailableLocationExpirationTimeMS:3e5,ThrottleRetryCount:"x-ms-throttle-retry-count",ThrottleRetryWaitTimeInMs:"x-ms-throttle-retry-wait-time-ms",CurrentVersion:"2020-07-15",AzureNamespace:"Azure.Cosmos",AzurePackageName:"@azure/cosmos",SDKName:"azure-cosmos-js",SDKVersion:"3.16.4",Quota:{CollectionSize:"collectionSize"},Path:{Root:"/",DatabasesPathSegment:"dbs",CollectionsPathSegment:"colls",UsersPathSegment:"users",DocumentsPathSegment:"docs",PermissionsPathSegment:"permissions",StoredProceduresPathSegment:"sprocs",TriggersPathSegment:"triggers",UserDefinedFunctionsPathSegment:"udfs",ConflictsPathSegment:"conflicts",AttachmentsPathSegment:"attachments",PartitionKeyRangesPathSegment:"pkranges",SchemasPathSegment:"schemas",OffersPathSegment:"offers",TopologyPathSegment:"topology",DatabaseAccountPathSegment:"databaseaccount"},PartitionKeyRange:{MinInclusive:"minInclusive",MaxExclusive:"maxExclusive",Id:"id"},QueryRangeConstants:{MinInclusive:"minInclusive",MaxExclusive:"maxExclusive",min:"min"},EffectiveParitionKeyConstants:{MinimumInclusiveEffectivePartitionKey:"",MaximumExclusiveEffectivePartitionKey:"FF"},EffectivePartitionKeyConstants:{MinimumInclusiveEffectivePartitionKey:"",MaximumExclusiveEffectivePartitionKey:"FF"}};(x=E||(E={})).none="",x.database="dbs",x.offer="offers",x.user="users",x.permission="permissions",x.container="colls",x.conflicts="conflicts",x.sproc="sprocs",x.udf="udfs",x.trigger="triggers",x.item="docs",x.pkranges="pkranges",(y=F||(F={})).get="GET",y.patch="PATCH",y.post="POST",y.put="PUT",y.delete="DELETE",(z=G||(G={})).Create="create",z.Replace="replace",z.Upsert="upsert",z.Delete="delete",z.Read="read",z.Query="query",z.Execute="execute",z.Batch="batch",z.Patch="patch",(A=H||(H={})).PrimaryMaster="PRIMARY_MASTER",A.SecondaryMaster="SECONDARY_MASTER",A.PrimaryReadOnly="PRIMARY_READONLY",A.SecondaryReadOnly="SECONDARY_READONLY",(B=I||(I={})).Item="ITEM",B.StoredProcedure="STORED_PROCEDURE",B.UserDefinedFunction="USER_DEFINED_FUNCTION",B.Trigger="TRIGGER",(C=J||(J={}))[C.ScopeAccountReadValue=1]="ScopeAccountReadValue",C[C.ScopeAccountListDatabasesValue=2]="ScopeAccountListDatabasesValue",C[C.ScopeDatabaseReadValue=4]="ScopeDatabaseReadValue",C[C.ScopeDatabaseReadOfferValue=8]="ScopeDatabaseReadOfferValue",C[C.ScopeDatabaseListContainerValue=16]="ScopeDatabaseListContainerValue",C[C.ScopeContainerReadValue=32]="ScopeContainerReadValue",C[C.ScopeContainerReadOfferValue=64]="ScopeContainerReadOfferValue",C[C.ScopeAccountCreateDatabasesValue=1]="ScopeAccountCreateDatabasesValue",C[C.ScopeAccountDeleteDatabasesValue=2]="ScopeAccountDeleteDatabasesValue",C[C.ScopeDatabaseDeleteValue=4]="ScopeDatabaseDeleteValue",C[C.ScopeDatabaseReplaceOfferValue=8]="ScopeDatabaseReplaceOfferValue",C[C.ScopeDatabaseCreateContainerValue=16]="ScopeDatabaseCreateContainerValue",C[C.ScopeDatabaseDeleteContainerValue=32]="ScopeDatabaseDeleteContainerValue",C[C.ScopeContainerReplaceValue=64]="ScopeContainerReplaceValue",C[C.ScopeContainerDeleteValue=128]="ScopeContainerDeleteValue",C[C.ScopeContainerReplaceOfferValue=256]="ScopeContainerReplaceOfferValue",C[C.ScopeAccountReadAllAccessValue=65535]="ScopeAccountReadAllAccessValue",C[C.ScopeDatabaseReadAllAccessValue=124]="ScopeDatabaseReadAllAccessValue",C[C.ScopeContainersReadAllAccessValue=96]="ScopeContainersReadAllAccessValue",C[C.ScopeAccountWriteAllAccessValue=65535]="ScopeAccountWriteAllAccessValue",C[C.ScopeDatabaseWriteAllAccessValue=508]="ScopeDatabaseWriteAllAccessValue",C[C.ScopeContainersWriteAllAccessValue=448]="ScopeContainersWriteAllAccessValue",C[C.ScopeContainerExecuteQueriesValue=1]="ScopeContainerExecuteQueriesValue",C[C.ScopeContainerReadFeedsValue=2]="ScopeContainerReadFeedsValue",C[C.ScopeContainerReadStoredProceduresValue=4]="ScopeContainerReadStoredProceduresValue",C[C.ScopeContainerReadUserDefinedFunctionsValue=8]="ScopeContainerReadUserDefinedFunctionsValue",C[C.ScopeContainerReadTriggersValue=16]="ScopeContainerReadTriggersValue",C[C.ScopeContainerReadConflictsValue=32]="ScopeContainerReadConflictsValue",C[C.ScopeItemReadValue=64]="ScopeItemReadValue",C[C.ScopeStoredProcedureReadValue=128]="ScopeStoredProcedureReadValue",C[C.ScopeUserDefinedFunctionReadValue=256]="ScopeUserDefinedFunctionReadValue",C[C.ScopeTriggerReadValue=512]="ScopeTriggerReadValue",C[C.ScopeContainerCreateItemsValue=1]="ScopeContainerCreateItemsValue",C[C.ScopeContainerReplaceItemsValue=2]="ScopeContainerReplaceItemsValue",C[C.ScopeContainerUpsertItemsValue=4]="ScopeContainerUpsertItemsValue",C[C.ScopeContainerDeleteItemsValue=8]="ScopeContainerDeleteItemsValue",C[C.ScopeContainerCreateStoredProceduresValue=16]="ScopeContainerCreateStoredProceduresValue",C[C.ScopeContainerReplaceStoredProceduresValue=32]="ScopeContainerReplaceStoredProceduresValue",C[C.ScopeContainerDeleteStoredProceduresValue=64]="ScopeContainerDeleteStoredProceduresValue",C[C.ScopeContainerExecuteStoredProceduresValue=128]="ScopeContainerExecuteStoredProceduresValue",C[C.ScopeContainerCreateTriggersValue=256]="ScopeContainerCreateTriggersValue",C[C.ScopeContainerReplaceTriggersValue=512]="ScopeContainerReplaceTriggersValue",C[C.ScopeContainerDeleteTriggersValue=1024]="ScopeContainerDeleteTriggersValue",C[C.ScopeContainerCreateUserDefinedFunctionsValue=2048]="ScopeContainerCreateUserDefinedFunctionsValue",C[C.ScopeContainerReplaceUserDefinedFunctionsValue=4096]="ScopeContainerReplaceUserDefinedFunctionsValue",C[C.ScopeContainerDeleteUserDefinedFunctionSValue=8192]="ScopeContainerDeleteUserDefinedFunctionSValue",C[C.ScopeContainerDeleteCONFLICTSValue=16384]="ScopeContainerDeleteCONFLICTSValue",C[C.ScopeItemReplaceValue=65536]="ScopeItemReplaceValue",C[C.ScopeItemUpsertValue=131072]="ScopeItemUpsertValue",C[C.ScopeItemDeleteValue=262144]="ScopeItemDeleteValue",C[C.ScopeStoredProcedureReplaceValue=1048576]="ScopeStoredProcedureReplaceValue",C[C.ScopeStoredProcedureDeleteValue=2097152]="ScopeStoredProcedureDeleteValue",C[C.ScopeStoredProcedureExecuteValue=4194304]="ScopeStoredProcedureExecuteValue",C[C.ScopeUserDefinedFunctionReplaceValue=8388608]="ScopeUserDefinedFunctionReplaceValue",C[C.ScopeUserDefinedFunctionDeleteValue=16777216]="ScopeUserDefinedFunctionDeleteValue",C[C.ScopeTriggerReplaceValue=33554432]="ScopeTriggerReplaceValue",C[C.ScopeTriggerDeleteValue=67108864]="ScopeTriggerDeleteValue",C[C.ScopeContainerReadAllAccessValue=4294967295]="ScopeContainerReadAllAccessValue",C[C.ScopeItemReadAllAccessValue=65]="ScopeItemReadAllAccessValue",C[C.ScopeContainerWriteAllAccessValue=4294967295]="ScopeContainerWriteAllAccessValue",C[C.ScopeItemWriteAllAccessValue=458767]="ScopeItemWriteAllAccessValue",C[C.NoneValue=0]="NoneValue",(D=K||(K={}))[D.ContainerCreateItems=1]="ContainerCreateItems",D[D.ContainerReplaceItems=2]="ContainerReplaceItems",D[D.ContainerUpsertItems=4]="ContainerUpsertItems",D[D.ContainerDeleteItems=128]="ContainerDeleteItems",D[D.ContainerExecuteQueries=1]="ContainerExecuteQueries",D[D.ContainerReadFeeds=2]="ContainerReadFeeds",D[D.ContainerCreateStoreProcedure=16]="ContainerCreateStoreProcedure",D[D.ContainerReadStoreProcedure=4]="ContainerReadStoreProcedure",D[D.ContainerReplaceStoreProcedure=32]="ContainerReplaceStoreProcedure",D[D.ContainerDeleteStoreProcedure=64]="ContainerDeleteStoreProcedure",D[D.ContainerCreateTriggers=256]="ContainerCreateTriggers",D[D.ContainerReadTriggers=16]="ContainerReadTriggers",D[D.ContainerReplaceTriggers=512]="ContainerReplaceTriggers",D[D.ContainerDeleteTriggers=1024]="ContainerDeleteTriggers",D[D.ContainerCreateUserDefinedFunctions=2048]="ContainerCreateUserDefinedFunctions",D[D.ContainerReadUserDefinedFunctions=8]="ContainerReadUserDefinedFunctions",D[D.ContainerReplaceUserDefinedFunctions=4096]="ContainerReplaceUserDefinedFunctions",D[D.ContainerDeleteUserDefinedFunctions=8192]="ContainerDeleteUserDefinedFunctions",D[D.ContainerExecuteStoredProcedure=128]="ContainerExecuteStoredProcedure",D[D.ContainerReadConflicts=32]="ContainerReadConflicts",D[D.ContainerDeleteConflicts=16384]="ContainerDeleteConflicts",D[D.ContainerReadAny=64]="ContainerReadAny",D[D.ContainerFullAccess=4294967295]="ContainerFullAccess",D[D.ItemReadAny=65536]="ItemReadAny",D[D.ItemFullAccess=65]="ItemFullAccess",D[D.ItemRead=64]="ItemRead",D[D.ItemReplace=65536]="ItemReplace",D[D.ItemUpsert=131072]="ItemUpsert",D[D.ItemDelete=262144]="ItemDelete",D[D.StoreProcedureRead=128]="StoreProcedureRead",D[D.StoreProcedureReplace=1048576]="StoreProcedureReplace",D[D.StoreProcedureDelete=2097152]="StoreProcedureDelete",D[D.StoreProcedureExecute=4194304]="StoreProcedureExecute",D[D.UserDefinedFuntionRead=256]="UserDefinedFuntionRead",D[D.UserDefinedFuntionReplace=8388608]="UserDefinedFuntionReplace",D[D.UserDefinedFuntionDelete=16777216]="UserDefinedFuntionDelete",D[D.TriggerRead=512]="TriggerRead",D[D.TriggerReplace=33554432]="TriggerReplace",D[D.TriggerDelete=67108864]="TriggerDelete";let e=RegExp("^[/]+"),f=RegExp("[/]+$"),g=RegExp("[/\\\\?#]"),h=RegExp("[/\\\\#]");function i(a){if(0===a.length)return{type:void 0,objectBody:void 0};"/"!==a[a.length-1]&&(a+="/"),"/"!==a[0]&&(a="/"+a);let b=a.split("/"),c,d;b.length%2==0?(c=b[b.length-2],d=b[b.length-3]):(c=b[b.length-3],d=b[b.length-2]);let e={type:d,objectBody:{id:c,self:a}};return e}function j(a){return a===G.Read||a===G.Query}function k(a){return a.split("/").slice(0,4).join("/")}function l(a){return a.replace(e,"").replace(f,"")}function m(a,b){if(a.id){if("string"!=typeof a.id)return b.message="Id must be a string.",!1;if(-1!==a.id.indexOf("/")|| -1!==a.id.indexOf("\\")|| -1!==a.id.indexOf("?")|| -1!==a.id.indexOf("#"))return b.message="Id contains illegal chars.",!1;if(" "===a.id[a.id.length-1])return b.message="Id ends with a space.",!1}return!0}function n(a,b){if(a.id){if("string"!=typeof a.id)return b.message="Id must be a string.",!1;if(-1!==a.id.indexOf("/")|| -1!==a.id.indexOf("\\")|| -1!==a.id.indexOf("#"))return b.message="Id contains illegal chars.",!1}return!0}function o(a){return a=l(a)}function p(a,b){return(a=l(a),b)?"/"+encodeURI(a)+"/"+b:"/"+encodeURI(a)}function q(a){return!a||/^\s*$/.test(a)}function r(a){if("string"!=typeof a)throw Error("invalid input: input is not string");return a.replace(e,"").replace(f,"")}function s(a){if("string"!=typeof a||q(a))throw Error("Resource ID must be a string and cannot be undefined, null or empty");if(g.test(a))throw Error("Illegal characters ['/', '\\', '#', '?'] cannot be used in Resource ID");return!0}function t(a){if(!a||"string"!=typeof a)return null;let b=r(a),c=b.split("/");return c.length%2!=0?null:c[c.length-1]}let u={Ok:200,Created:201,Accepted:202,NoContent:204,NotModified:304,BadRequest:400,Unauthorized:401,Forbidden:403,NotFound:404,MethodNotAllowed:405,RequestTimeout:408,Conflict:409,Gone:410,PreconditionFailed:412,RequestEntityTooLarge:413,TooManyRequests:429,RetryWith:449,InternalServerError:500,ServiceUnavailable:503,ENOTFOUND:"ENOTFOUND",OperationPaused:1200,OperationCancelled:1201},v={Unknown:0,CrossPartitionQueryNotServable:1004,PartitionKeyRangeGone:1002,ReadSessionNotAvailable:1002,WriteForbidden:3,DatabaseAccountNotFound:1008};class w{constructor(a){this.requestCharge=a}add(...a){let b=this.requestCharge;for(let c of a){if(null==c)throw Error("clientSideMetrics has null or undefined item(s)");b+=c.requestCharge}return new w(b)}static createFromArray(...a){if(null==a)throw Error("clientSideMetricsArray is null or undefined item(s)");return this.zero.add(...a)}}w.zero=new w(0);var x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S={RetrievedDocumentCount:"retrievedDocumentCount",RetrievedDocumentSize:"retrievedDocumentSize",OutputDocumentCount:"outputDocumentCount",OutputDocumentSize:"outputDocumentSize",IndexHitRatio:"indexUtilizationRatio",IndexHitDocumentCount:"indexHitDocumentCount",TotalQueryExecutionTimeInMs:"totalExecutionTimeInMs",QueryCompileTimeInMs:"queryCompileTimeInMs",LogicalPlanBuildTimeInMs:"queryLogicalPlanBuildTimeInMs",PhysicalPlanBuildTimeInMs:"queryPhysicalPlanBuildTimeInMs",QueryOptimizationTimeInMs:"queryOptimizationTimeInMs",IndexLookupTimeInMs:"indexLookupTimeInMs",DocumentLoadTimeInMs:"documentLoadTimeInMs",VMExecutionTimeInMs:"VMExecutionTimeInMs",DocumentWriteTimeInMs:"writeOutputTimeInMs",QueryEngineTimes:"queryEngineTimes",SystemFunctionExecuteTimeInMs:"systemFunctionExecuteTimeInMs",UserDefinedFunctionExecutionTimeInMs:"userFunctionExecuteTimeInMs",RetrievedDocumentCountText:"Retrieved Document Count",RetrievedDocumentSizeText:"Retrieved Document Size",OutputDocumentCountText:"Output Document Count",OutputDocumentSizeText:"Output Document Size",IndexUtilizationText:"Index Utilization",TotalQueryExecutionTimeText:"Total Query Execution Time",QueryPreparationTimesText:"Query Preparation Times",QueryCompileTimeText:"Query Compilation Time",LogicalPlanBuildTimeText:"Logical Plan Build Time",PhysicalPlanBuildTimeText:"Physical Plan Build Time",QueryOptimizationTimeText:"Query Optimization Time",QueryEngineTimesText:"Query Engine Times",IndexLookupTimeText:"Index Lookup Time",DocumentLoadTimeText:"Document Load Time",WriteOutputTimeText:"Document Write Time",RuntimeExecutionTimesText:"Runtime Execution Times",TotalExecutionTimeText:"Query Engine Execution Time",SystemFunctionExecuteTimeText:"System Function Execution Time",UserDefinedFunctionExecutionTimeText:"User-defined Function Execution Time",ClientSideQueryMetricsText:"Client Side Metrics",RetriesText:"Retry Count",RequestChargeText:"Request Charge",FetchExecutionRangesText:"Partition Execution Timeline",SchedulingMetricsText:"Scheduling Metrics"};let T=1e-7,U=6e8,V=1/U,W=60*U,X=1/W,Y=24*W,Z=1/Y,$=36e5,_=24*$,aa=Number.MAX_SAFE_INTEGER/1e4,ab=Number.MIN_SAFE_INTEGER/1e4;class ac{constructor(a,b,c,d,e){if(!Number.isInteger(a))throw Error("days is not an integer");if(!Number.isInteger(b))throw Error("hours is not an integer");if(!Number.isInteger(c))throw Error("minutes is not an integer");if(!Number.isInteger(d))throw Error("seconds is not an integer");if(!Number.isInteger(e))throw Error("milliseconds is not an integer");let f=(86400*a+3600*b+60*c+d)*1e3+e;if(f>aa||f<ab)throw Error("Total number of milliseconds was either too large or too small");this._ticks=1e4*f}add(a){if(ac.additionDoesOverflow(this._ticks,a._ticks))throw Error("Adding the two timestamps causes an overflow.");let b=this._ticks+a._ticks;return ac.fromTicks(b)}subtract(a){if(ac.subtractionDoesUnderflow(this._ticks,a._ticks))throw Error("Subtracting the two timestamps causes an underflow.");let b=this._ticks-a._ticks;return ac.fromTicks(b)}compareTo(a){if(null==a)return 1;if(!ac.isTimeSpan(a))throw Error("Argument must be a TimeSpan object");return ac.compare(this,a)}duration(){return ac.fromTicks(this._ticks>=0?this._ticks:-this._ticks)}equals(a){return!!ac.isTimeSpan(a)&&this._ticks===a._ticks}negate(){return ac.fromTicks(-this._ticks)}days(){return Math.floor(this._ticks/Y)}hours(){return Math.floor(this._ticks/W)}milliseconds(){return Math.floor(this._ticks/1e4)}seconds(){return Math.floor(this._ticks/1e7)}ticks(){return this._ticks}totalDays(){return this._ticks*Z}totalHours(){return this._ticks*X}totalMilliseconds(){return 1e-4*this._ticks}totalMinutes(){return this._ticks*V}totalSeconds(){return this._ticks*T}static fromTicks(a){let b=new ac(0,0,0,0,0);return b._ticks=a,b}static isTimeSpan(a){return a._ticks}static additionDoesOverflow(a,b){let c=a+b;return a!==c-b||b!==c-a}static subtractionDoesUnderflow(a,b){let c=a-b;return a!==c+b||b!==a-c}static compare(a,b){return a._ticks>b._ticks?1:a._ticks<b._ticks?-1:0}static interval(a,b){if(isNaN(a))throw Error("value must be a number");let c=a*b;if(c>aa||c<ab)throw Error("timespan too long");return ac.fromTicks(Math.floor(1e4*c))}static fromMilliseconds(a){return ac.interval(a,1)}static fromSeconds(a){return ac.interval(a,1e3)}static fromMinutes(a){return ac.interval(a,6e4)}static fromHours(a){return ac.interval(a,$)}static fromDays(a){return ac.interval(a,_)}}function ad(a){if(null==a)throw Error("delimitedString is null or undefined");let b={},c=a.split(";");for(let d of c){let e=d.split("=");if(2!==e.length)throw Error("recieved a malformed delimited string");let f=e[0],g=parseFloat(e[1]);b[f]=g}return b}function ae(a,b){return b in a?ac.fromMilliseconds(a[b]):ac.zero}ac.zero=new ac(0,0,0,0,0),ac.maxValue=ac.fromTicks(Number.MAX_SAFE_INTEGER),ac.minValue=ac.fromTicks(Number.MIN_SAFE_INTEGER);class af{constructor(a,b,c,d){this.queryCompilationTime=a,this.logicalPlanBuildTime=b,this.physicalPlanBuildTime=c,this.queryOptimizationTime=d}add(...a){let b=this.queryCompilationTime,c=this.logicalPlanBuildTime,d=this.physicalPlanBuildTime,e=this.queryOptimizationTime;for(let f of a){if(null==f)throw Error("queryPreparationTimesArray has null or undefined item(s)");b=b.add(f.queryCompilationTime),c=c.add(f.logicalPlanBuildTime),d=d.add(f.physicalPlanBuildTime),e=e.add(f.queryOptimizationTime)}return new af(b,c,d,e)}toDelimitedString(){return`${S.QueryCompileTimeInMs}=${this.queryCompilationTime.totalMilliseconds()};${S.LogicalPlanBuildTimeInMs}=${this.logicalPlanBuildTime.totalMilliseconds()};${S.PhysicalPlanBuildTimeInMs}=${this.physicalPlanBuildTime.totalMilliseconds()};${S.QueryOptimizationTimeInMs}=${this.queryOptimizationTime.totalMilliseconds()}`}static createFromArray(a){if(null==a)throw Error("queryPreparationTimesArray is null or undefined item(s)");return af.zero.add(...a)}static createFromDelimitedString(a){let b=ad(a);return new af(ae(b,S.QueryCompileTimeInMs),ae(b,S.LogicalPlanBuildTimeInMs),ae(b,S.PhysicalPlanBuildTimeInMs),ae(b,S.QueryOptimizationTimeInMs))}}af.zero=new af(ac.zero,ac.zero,ac.zero,ac.zero);class ag{constructor(a,b,c){this.queryEngineExecutionTime=a,this.systemFunctionExecutionTime=b,this.userDefinedFunctionExecutionTime=c}add(...a){let b=this.queryEngineExecutionTime,c=this.systemFunctionExecutionTime,d=this.userDefinedFunctionExecutionTime;for(let e of a){if(null==e)throw Error("runtimeExecutionTimes has null or undefined item(s)");b=b.add(e.queryEngineExecutionTime),c=c.add(e.systemFunctionExecutionTime),d=d.add(e.userDefinedFunctionExecutionTime)}return new ag(b,c,d)}toDelimitedString(){return`${S.SystemFunctionExecuteTimeInMs}=${this.systemFunctionExecutionTime.totalMilliseconds()};${S.UserDefinedFunctionExecutionTimeInMs}=${this.userDefinedFunctionExecutionTime.totalMilliseconds()}`}static createFromArray(a){if(null==a)throw Error("runtimeExecutionTimesArray is null or undefined item(s)");return ag.zero.add(...a)}static createFromDelimitedString(a){let b=ad(a),c=ae(b,S.VMExecutionTimeInMs),d=ae(b,S.IndexLookupTimeInMs),e=ae(b,S.DocumentLoadTimeInMs),f=ae(b,S.DocumentWriteTimeInMs),g=ac.zero;return g=(g=(g=(g=g.add(c)).subtract(d)).subtract(e)).subtract(f),new ag(g,ae(b,S.SystemFunctionExecuteTimeInMs),ae(b,S.UserDefinedFunctionExecutionTimeInMs))}}ag.zero=new ag(ac.zero,ac.zero,ac.zero);class ah{constructor(a,b,c,d,e,f,g,h,i,j,k,l,m){this.retrievedDocumentCount=a,this.retrievedDocumentSize=b,this.outputDocumentCount=c,this.outputDocumentSize=d,this.indexHitDocumentCount=e,this.totalQueryExecutionTime=f,this.queryPreparationTimes=g,this.indexLookupTime=h,this.documentLoadTime=i,this.vmExecutionTime=j,this.runtimeExecutionTimes=k,this.documentWriteTime=l,this.clientSideMetrics=m}get indexHitRatio(){return 0===this.retrievedDocumentCount?1:this.indexHitDocumentCount/this.retrievedDocumentCount}add(a){let b=0,c=0,d=0,e=0,f=0,g=ac.zero,h=[],i=ac.zero,j=ac.zero,k=ac.zero,l=[],m=ac.zero,n=[];for(let o of(a.push(this),a))o&&(b+=o.retrievedDocumentCount,c+=o.retrievedDocumentSize,d+=o.outputDocumentCount,e+=o.outputDocumentSize,f+=o.indexHitDocumentCount,g=g.add(o.totalQueryExecutionTime),h.push(o.queryPreparationTimes),i=i.add(o.indexLookupTime),j=j.add(o.documentLoadTime),k=k.add(o.vmExecutionTime),l.push(o.runtimeExecutionTimes),m=m.add(o.documentWriteTime),n.push(o.clientSideMetrics));return new ah(b,c,d,e,f,g,af.createFromArray(h),i,j,k,ag.createFromArray(l),m,w.createFromArray(...n))}toDelimitedString(){return S.RetrievedDocumentCount+"="+this.retrievedDocumentCount+";"+S.RetrievedDocumentSize+"="+this.retrievedDocumentSize+";"+S.OutputDocumentCount+"="+this.outputDocumentCount+";"+S.OutputDocumentSize+"="+this.outputDocumentSize+";"+S.IndexHitRatio+"="+this.indexHitRatio+";"+S.TotalQueryExecutionTimeInMs+"="+this.totalQueryExecutionTime.totalMilliseconds()+";"+this.queryPreparationTimes.toDelimitedString()+";"+S.IndexLookupTimeInMs+"="+this.indexLookupTime.totalMilliseconds()+";"+S.DocumentLoadTimeInMs+"="+this.documentLoadTime.totalMilliseconds()+";"+S.VMExecutionTimeInMs+"="+this.vmExecutionTime.totalMilliseconds()+";"+this.runtimeExecutionTimes.toDelimitedString()+";"+S.DocumentWriteTimeInMs+"="+this.documentWriteTime.totalMilliseconds()}static createFromArray(a){if(!a)throw Error("queryMetricsArray is null or undefined item(s)");return ah.zero.add(a)}static createFromDelimitedString(a,b){let c=ad(a),d=c[S.IndexHitRatio]||0,e=c[S.RetrievedDocumentCount]||0,f=c[S.OutputDocumentCount]||0,g=c[S.OutputDocumentSize]||0,h=c[S.RetrievedDocumentSize]||0,i=ae(c,S.TotalQueryExecutionTimeInMs);return new ah(e,h,f,g,d*e,i,af.createFromDelimitedString(a),ae(c,S.IndexLookupTimeInMs),ae(c,S.DocumentLoadTimeInMs),ae(c,S.VMExecutionTimeInMs),ag.createFromDelimitedString(a),ae(c,S.DocumentWriteTimeInMs),b||w.zero)}}function ai(){let a={};return a[d.HttpHeaders.RequestCharge]=0,a[d.HttpHeaders.QueryMetrics]={},a}function aj(a,b){if(void 0===a[d.HttpHeaders.RequestCharge]&&(a[d.HttpHeaders.RequestCharge]=0),void 0===a[d.HttpHeaders.QueryMetrics]&&(a[d.HttpHeaders.QueryMetrics]=ah.zero),b&&(a[d.HttpHeaders.RequestCharge]+=function(a){if("number"==typeof a)return a;if("string"==typeof a)return parseFloat(a);if(!a)return 0;{let b=a[d.HttpHeaders.RequestCharge];return b?parseFloat(b):0}}(b),b[d.HttpHeaders.IsRUPerMinuteUsed]&&(a[d.HttpHeaders.IsRUPerMinuteUsed]=b[d.HttpHeaders.IsRUPerMinuteUsed]),d.HttpHeaders.QueryMetrics in b)){let c=a[d.HttpHeaders.QueryMetrics],e=b[d.HttpHeaders.QueryMetrics];for(let f in e)if(c[f]){let g=c[f].add([e[f],]);c[f]=g}else c[f]=e[f]}}ah.zero=new ah(0,0,0,0,0,ac.zero,af.zero,ac.zero,ac.zero,ac.zero,ag.zero,ac.zero,w.zero);var ak=function(a,b){return(ak=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)},al=function(){return(al=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function am(a){return this instanceof am?(this.v=a,this):new am(a)}function an(a,b,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var d,e=c.apply(a,b||[]),f=[];return d={},g("next"),g("throw"),g("return"),d[Symbol.asyncIterator]=function(){return this},d;function g(a){e[a]&&(d[a]=function(b){return new Promise(function(c,d){f.push([a,b,c,d])>1||h(a,b)})})}function h(a,b){try{i(e[a](b))}catch(c){l(f[0][3],c)}}function i(a){a.value instanceof am?Promise.resolve(a.value.v).then(j,k):l(f[0][2],a)}function j(a){h("next",a)}function k(a){h("throw",a)}function l(a,b){a(b),f.shift(),f.length&&h(f[0][0],f[0][1])}}var ao=c(8955);let ap=void 0!==ao&&ao.env&&ao.env.DEBUG||void 0,aq,ar=[],as=[],at=[];ap&&av(ap);let au=Object.assign(a=>ax(a),{enable:av,enabled:aw,disable:function(){let a=aq||"";return av(""),a},log:function(...a){if(a.length>0){let b=String(a[0]);b.includes(":error")?console.error(...a):b.includes(":warning")?console.warn(...a):b.includes(":info")?console.info(...a):(b.includes(":verbose"),console.debug(...a))}}});function av(a){aq=a,ar=[],as=[];let b=/\*/g,c=a.split(",").map(a=>a.trim().replace(b,".*?"));for(let d of c)d.startsWith("-")?as.push(RegExp(`^${d.substr(1)}$`)):ar.push(RegExp(`^${d}$`));for(let e of at)e.enabled=aw(e.namespace)}function aw(a){if(a.endsWith("*"))return!0;for(let b of as)if(b.test(a))return!1;for(let c of ar)if(c.test(a))return!0;return!1}function ax(a){let b=Object.assign(function(...c){b.enabled&&(c.length>0&&(c[0]=`${a} ${c[0]}`),b.log(...c))},{enabled:aw(a),destroy:ay,log:au.log,namespace:a,extend:az});return at.push(b),b}function ay(){let a=at.indexOf(this);return a>=0&&(at.splice(a,1),!0)}function az(a){let b=ax(`${this.namespace}:${a}`);return b.log=this.log,b}var aA=au,aB=c(8955);let aC=new Set,aD=void 0!==aB&&aB.env&&aB.env.AZURE_LOG_LEVEL||void 0,aE,aF=aA("azure");aF.log=(...a)=>{aA.log(...a)};let aG=["verbose","info","warning","error"];aD&&(aM(aD)?function(a){if(a&&!aM(a))throw Error(`Unknown log level '${a}'. Acceptable values: ${aG.join(",")}`);aE=a;let b=[];for(let c of aC)aL(c)&&b.push(c.namespace);aA.enable(b.join(","))}(aD):console.error(`AZURE_LOG_LEVEL set to unknown log level '${aD}'; logging is not enabled. Acceptable values: ${aG.join(", ")}.`));let aH={verbose:400,info:300,warning:200,error:100};function aI(a){let b=aF.extend(a);return aJ(aF,b),{error:aK(b,"error"),warning:aK(b,"warning"),info:aK(b,"info"),verbose:aK(b,"verbose")}}function aJ(a,b){b.log=(...b)=>{a.log(...b)}}function aK(a,b){let c=Object.assign(a.extend(b),{level:b});if(aJ(a,c),aL(c)){let d=aA.disable();aA.enable(d+","+c.namespace)}return aC.add(c),c}function aL(a){return!!aE&&!!(aH[a.level]<=aH[aE])}function aM(a){return aG.includes(a)}let aN=aI("ClientContext");(du=L||(L={})).start="start",du.inProgress="inProgress",du.ended="ended";class aO{constructor(a,b){this.resources=[],this.currentIndex=0,this.currentPartitionIndex=0,this.fetchFunctions=Array.isArray(b)?b:[b],this.options=a||{},this.continuationToken=this.options.continuationToken||this.options.continuation||null,this.state=aO.STATES.start}get continuation(){return this.continuationToken}async nextItem(){++this.currentIndex;let a=await this.current();return a}async current(){if(this.currentIndex<this.resources.length)return{result:this.resources[this.currentIndex],headers:ai()};if(!this._canFetchMore())return this.state=aO.STATES.ended,{result:void 0,headers:ai()};{let{result:a,headers:b}=await this.fetchMore();return(this.resources=a,0===this.resources.length)?!this.continuationToken&&this.currentPartitionIndex>=this.fetchFunctions.length?(this.state=aO.STATES.ended,{result:void 0,headers:b}):this.current():{result:this.resources[this.currentIndex],headers:b}}}hasMoreResults(){return this.state===aO.STATES.start|| void 0!==this.continuationToken||this.currentIndex<this.resources.length-1||this.currentPartitionIndex<this.fetchFunctions.length}async fetchMore(){if(this.currentPartitionIndex>=this.fetchFunctions.length)return{headers:ai(),result:void 0};let a=this.options.continuationToken||this.options.continuation;if(this.options.continuationToken=this.continuationToken,this.currentPartitionIndex>=this.fetchFunctions.length)return{headers:ai(),result:void 0};let b,c;try{let e;void 0!==this.nextFetchFunction?(aN.verbose("using prefetch"),e=this.nextFetchFunction,this.nextFetchFunction=void 0):(aN.verbose("using fresh fetch"),e=this.fetchFunctions[this.currentPartitionIndex](this.options));let f=await e;if(b=f.result,c=f.headers,this.continuationToken=c[d.HttpHeaders.Continuation],!this.continuationToken&& ++this.currentPartitionIndex,this.options&& !0===this.options.bufferItems){let g=this.fetchFunctions[this.currentPartitionIndex];this.nextFetchFunction=g?g(Object.assign(Object.assign({},this.options),{continuationToken:this.continuationToken})):void 0}}catch(h){throw this.state=aO.STATES.ended,h}if(this.state=aO.STATES.inProgress,this.currentIndex=0,this.options.continuationToken=a,this.options.continuation=a,d.HttpHeaders.QueryMetrics in c){let i=c[d.HttpHeaders.QueryMetrics],j=ah.createFromDelimitedString(i);if(d.HttpHeaders.RequestCharge in c){let k=Number(c[d.HttpHeaders.RequestCharge])||0;j=new ah(j.retrievedDocumentCount,j.retrievedDocumentSize,j.outputDocumentCount,j.outputDocumentSize,j.indexHitDocumentCount,j.totalQueryExecutionTime,j.queryPreparationTimes,j.indexLookupTime,j.documentLoadTime,j.vmExecutionTime,j.runtimeExecutionTimes,j.documentWriteTime,new w(k))}c[d.HttpHeaders.QueryMetrics]={},c[d.HttpHeaders.QueryMetrics]["0"]=j}return{result:b,headers:c}}_canFetchMore(){let a=this.state===aO.STATES.start||this.continuationToken&&this.state===aO.STATES.inProgress||this.currentPartitionIndex<this.fetchFunctions.length&&this.state===aO.STATES.inProgress;return a}}aO.STATES=L;class aP{constructor(a,b,c){this.executionContext=a,this.offset=b,this.limit=c}async nextItem(){let a=ai();for(;this.offset>0;){let{headers:b}=await this.executionContext.nextItem();this.offset--,aj(a,b)}if(this.limit>0){let{result:c,headers:d}=await this.executionContext.nextItem();return this.limit--,aj(a,d),{result:c,headers:a}}return{result:void 0,headers:ai()}}hasMoreResults(){return(this.offset>0||this.limit>0)&&this.executionContext.hasMoreResults()}}function aQ(a){let b=new Uint8Array(a.length);for(let c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b}let aR="undefined"==typeof self?window:self;if(!aR)throw Error("Could not find global");let aS=aR.crypto||aR.msCrypto;if(!aS||!aS.subtle)throw Error("Browser does not support cryptography functions");async function aT(a){let b=aQ(a),c=await aS.subtle.digest("SHA-256",b);return aU(c)}function aU(a){return Array.prototype.map.call(new Uint8Array(a),a=>("00"+a.toString(16)).slice(-2)).join("")}var aV=c(5035),aW=c.n(aV);async function aX(a){let b=aW()(a);return aT(b)}class aY{aggregate(a){null!=a&&null!=a.sum&&(null==this.sum&&(this.sum=0,this.count=0),this.sum+=a.sum,this.count+=a.count)}getResult(){if(null!=this.sum&&!(this.count<=0))return this.sum/this.count}}class aZ{constructor(){this.value=0}aggregate(a){this.value+=a}getResult(){return this.value}}let a$=Object.freeze({NoValue:{ord:0},undefined:{ord:1},boolean:{ord:2,compFunc:(a,b)=>a===b?0:a>b?1:-1},number:{ord:4,compFunc:(a,b)=>a===b?0:a>b?1:-1},string:{ord:5,compFunc:(a,b)=>a===b?0:a>b?1:-1}});class a_{constructor(a){this.sortOrder=a}targetPartitionKeyRangeDocProdComparator(a,b){let c=a.getTargetParitionKeyRange().minInclusive,d=b.getTargetParitionKeyRange().minInclusive;return c===d?0:c>d?1:-1}compare(a,b){if(a.gotSplit())return -1;if(b.gotSplit())return 1;let c=this.getOrderByItems(a.peekBufferedItems()[0]),d=this.getOrderByItems(b.peekBufferedItems()[0]);this.validateOrderByItems(c,d);for(let e=0;e<c.length;e++){let f=this.compareOrderByItem(c[e],d[e]);if(0!==f){if("Ascending"===this.sortOrder[e])return f;if("Descending"===this.sortOrder[e])return-f}}return this.targetPartitionKeyRangeDocProdComparator(a,b)}compareValue(a,b,c,d){if("object"===b||"object"===d)throw Error("Tried to compare an object type");let e=a$[b].ord,f=a$[d].ord,g=e-f;if(0!==g)return g;if(e===a$.undefined.ord||e===a$.NoValue.ord)return 0;let h=a$[b].compFunc;if(void 0===h)throw Error("Cannot find the comparison function");return h(a,c)}compareOrderByItem(a,b){let c=this.getType(a),d=this.getType(b);return this.compareValue(a.item,c,b.item,d)}validateOrderByItems(a,b){if(a.length!==b.length)throw Error(`Expected ${a.length}, but got ${b.length}.`);if(a.length!==this.sortOrder.length)throw Error("orderByItems cannot have a different size than sort orders.");for(let c=0;c<this.sortOrder.length;c++){let d=this.getType(a[c]),e=this.getType(b[c]);if(d!==e)throw Error(`Expected ${d}, but got ${e}. Cannot execute cross partition order-by queries on mixed types. Consider filtering your query using IS_STRING or IS_NUMBER to get around this exception.`)}}getType(a){if(void 0===a|| void 0===a.item)return"NoValue";let b=typeof a.item;if(void 0===a$[b])throw Error(`unrecognizable type ${b}`);return b}getOrderByItems(a){return a.orderByItems}}class a0{constructor(){this.value=void 0,this.comparer=new a_(["Ascending"])}aggregate(a){void 0===this.value?this.value=a.max:this.comparer.compareValue(a.max,typeof a.max,this.value,typeof this.value)>0&&(this.value=a.max)}getResult(){return this.value}}class a1{constructor(){this.value=void 0,this.comparer=new a_(["Ascending"])}aggregate(a){if(void 0===this.value)this.value=a.min;else{let b=null===a.min?"NoValue":typeof a.min,c=null===this.value?"NoValue":typeof this.value;0>this.comparer.compareValue(a.min,b,this.value,c)&&(this.value=a.min)}}getResult(){return this.value}}class a2{aggregate(a){void 0!==a&&(void 0===this.sum?this.sum=a:this.sum+=a)}getResult(){return this.sum}}class a3{aggregate(a){void 0===this.value&&(this.value=a)}getResult(){return this.value}}function a4(a){switch(a){case"Average":return new aY;case"Count":return new aZ;case"Max":return new a0;case"Min":return new a1;case"Sum":return new a2;default:return new a3}}let a5="__empty__",a6=a=>Object.keys(a).length>0?a.item2?a.item2:a.item:null;var a7=c(2789),a8=c.n(a7),a9=c(45),ba=c.n(a9);class bb{constructor(a,b,c,d){this.min=a,this.max=b,this.isMinInclusive=c,this.isMaxInclusive=d}overlaps(a){let b=a;return!(void 0===this|| void 0===b||this.isEmpty()||b.isEmpty())&&(!!(this.min<=b.max)||!!(b.min<=this.max))&&(this.min!==b.max|| !!this.isMinInclusive&&!!b.isMaxInclusive)&&(b.min!==this.max|| !!b.isMinInclusive&&!!this.isMaxInclusive)}isFullRange(){return this.min===d.EffectivePartitionKeyConstants.MinimumInclusiveEffectivePartitionKey&&this.max===d.EffectivePartitionKeyConstants.MaximumExclusiveEffectivePartitionKey&& !0===this.isMinInclusive&& !1===this.isMaxInclusive}isEmpty(){return!(this.isMinInclusive&&this.isMaxInclusive)&&this.min===this.max}static parsePartitionKeyRange(a){return new bb(a[d.PartitionKeyRange.MinInclusive],a[d.PartitionKeyRange.MaxExclusive],!0,!1)}static parseFromDict(a){return new bb(a.min,a.max,a.isMinInclusive,a.isMaxInclusive)}}class bc{constructor(a,b){this.orderedPartitionKeyRanges=a,this.orderedRanges=a.map(a=>new bb(a[d.PartitionKeyRange.MinInclusive],a[d.PartitionKeyRange.MaxExclusive],!0,!1)),this.orderedPartitionInfo=b}getOrderedParitionKeyRanges(){return this.orderedPartitionKeyRanges}getOverlappingRanges(a){let b=Array.isArray(a)?a:[a],c={};for(let e of b){if(e.isEmpty())continue;if(e.isFullRange())return this.orderedPartitionKeyRanges;let f=this.orderedRanges.findIndex(a=>{if(e.min>a.min&&e.min<a.max||e.min===a.min||e.min===a.max)return!0});if(f<0)throw Error("error in collection routing map, queried value is less than the start range.");let g;for(let h=this.orderedRanges.length-1;h>=0;h--){let i=this.orderedRanges[h];if(e.max>i.min&&e.max<i.max||e.max===i.min||e.max===i.max){g=h;break}}if(g>this.orderedRanges.length)throw Error("error in collection routing map, queried value is greater than the end range.");for(let j=f;j<g+1;j++)e.overlaps(this.orderedRanges[j])&&(c[this.orderedPartitionKeyRanges[j][d.PartitionKeyRange.MinInclusive]]=this.orderedPartitionKeyRanges[j])}let k=Object.keys(c).map(a=>c[a]);return k.sort((a,b)=>a[d.PartitionKeyRange.MinInclusive].localeCompare(b[d.PartitionKeyRange.MinInclusive]))}}function bd(a,b){let c=a[0][d.PartitionKeyRange.MinInclusive],e=b[0][d.PartitionKeyRange.MinInclusive];return c>e?1:c<e?-1:0}let be=d.PartitionKeyRange;class bf{constructor(a){this.partitionKeyRangeCache=new class{constructor(a){this.clientContext=a,this.collectionRoutingMapByCollectionId={}}async onCollectionRoutingMap(a){let b=o(a);return void 0===this.collectionRoutingMapByCollectionId[b]&&(this.collectionRoutingMapByCollectionId[b]=this.requestCollectionRoutingMap(a)),this.collectionRoutingMapByCollectionId[b]}async getOverlappingRanges(a,b){let c=await this.onCollectionRoutingMap(a);return c.getOverlappingRanges(b)}async requestCollectionRoutingMap(a){let{resources:b}=await this.clientContext.queryPartitionKeyRanges(a).fetchAll();return function(a){let b={},c={},e=[];for(let f of a)b[f[0][d.PartitionKeyRange.Id]]=f,c[f[1]]=f[0],e.push(f);e=e.sort(bd);let g=e.map(a=>a[0]),h=e.map(a=>a[1]);if(function a(b){let c=!1;if(b.length>0){let e=b[0],f=b[b.length-1];c=(c=e[d.PartitionKeyRange.MinInclusive]===d.EffectivePartitionKeyConstants.MinimumInclusiveEffectivePartitionKey)&&f[d.PartitionKeyRange.MaxExclusive]===d.EffectivePartitionKeyConstants.MaximumExclusiveEffectivePartitionKey;for(let g=1;g<b.length;g++){let h=b[g-1],i=b[g];if(!(c=c&&h[d.PartitionKeyRange.MaxExclusive]===i[d.PartitionKeyRange.MinInclusive])){if(h[d.PartitionKeyRange.MaxExclusive]>i[d.PartitionKeyRange.MinInclusive])throw Error("Ranges overlap");break}}}return c}(g))return new bc(g,h)}(b.map(a=>[a,!0]))}}(a)}static _secondRangeIsAfterFirstRange(a,b){if(void 0===a.max)throw Error("range1 must have max");if(void 0===b.min)throw Error("range2 must have min");return!(a.max>b.min)&&(a.max!==b.min||!a.isMaxInclusive||!b.isMinInclusive)}static _isSortedAndNonOverlapping(a){for(let b=1;b<a.length;b++){let c=a[b-1],d=a[b];if(!this._secondRangeIsAfterFirstRange(c,d))return!1}return!0}static _stringMax(a,b){return a>=b?a:b}static _stringCompare(a,b){return a===b?0:a>b?1:-1}static _subtractRange(a,b){let c=this._stringMax(b[be.MaxExclusive],a.min),d=0===this._stringCompare(c,a.min)&&a.isMinInclusive;return new bb(c,a.max,d,a.isMaxInclusive)}async getOverlappingRanges(a,b){if(!bf._isSortedAndNonOverlapping(b))throw Error("the list of ranges is not a non-overlapping sorted ranges");let c=[];if(0===b.length)return c;let d=await this.partitionKeyRangeCache.onCollectionRoutingMap(a),e=0,f=b[e];for(;;){if(f.isEmpty()){if(++e>=b.length)return c;f=b[e];continue}let g;g=c.length>0?bf._subtractRange(f,c[c.length-1]):f;let h=d.getOverlappingRanges(g);if(h.length<=0)throw Error(`error: returned overlapping ranges for queryRange ${g} is empty`);c=c.concat(h);let i=bb.parsePartitionKeyRange(c[c.length-1]);if(!i)throw Error("expected lastKnowTargetRange to be truthy");if(bf._stringCompare(f.max,i.max)>0)throw Error(`error: returned overlapping ranges ${h} \
        does not contain the requested range ${g}`);if(++e>=b.length)return c;for(f=b[e];0>=bf._stringCompare(f.max,i.max);){if(++e>=b.length)return c;f=b[e]}}}}(dv=M||(M={}))[dv.Done=0]="Done",dv[dv.Exception=1]="Exception",dv[dv.Result=2]="Result";class bg{constructor(a,b){a?(this.feedResponse=a,this.fetchResultType=M.Result):(this.error=b,this.fetchResultType=M.Exception)}}class bh{constructor(a,b,c,d,e){this.clientContext=a,this.generation=0,this.fetchFunction=async a=>{let b=p(this.collectionLink,E.item),c=o(this.collectionLink);return this.clientContext.queryFeed({path:b,resourceType:E.item,resourceId:c,resultFn:a=>a.Documents,query:this.query,options:a,partitionKeyRangeId:this.targetPartitionKeyRange.id})},this.collectionLink=b,this.query=c,this.targetPartitionKeyRange=d,this.fetchResults=[],this.allFetched=!1,this.err=void 0,this.previousContinuationToken=void 0,this.continuationToken=void 0,this.respHeaders=ai(),this.internalExecutionContext=new aO(e,this.fetchFunction)}peekBufferedItems(){let a=[];for(let b=0,c=!1;b<this.fetchResults.length&&!c;b++){let d=this.fetchResults[b];switch(d.fetchResultType){case M.Done:case M.Exception:c=!0;break;case M.Result:a.push(d.feedResponse)}}return a}hasMoreResults(){return this.internalExecutionContext.hasMoreResults()||0!==this.fetchResults.length}gotSplit(){let a=this.fetchResults[0];return!!(a.fetchResultType===M.Exception&&bh._needPartitionKeyRangeCacheRefresh(a.error))}_getAndResetActiveResponseHeaders(){let a=this.respHeaders;return this.respHeaders=ai(),a}_updateStates(a,b){if(a){this.err=a;return}b&&(this.allFetched=!0),this.internalExecutionContext.continuationToken!==this.continuationToken&&(this.previousContinuationToken=this.continuationToken,this.continuationToken=this.internalExecutionContext.continuationToken)}static _needPartitionKeyRangeCacheRefresh(a){return a.code===u.Gone&&"substatus"in a&&a.substatus===v.PartitionKeyRangeGone}async bufferMore(){if(this.err)throw this.err;try{let{result:a,headers:b}=await this.internalExecutionContext.fetchMore();if(++this.generation,this._updateStates(void 0,void 0===a),void 0!==a&&a.forEach(a=>{this.fetchResults.push(new bg(a,void 0))}),null!=b&&d.HttpHeaders.QueryMetrics in b){let c=b[d.HttpHeaders.QueryMetrics]["0"];b[d.HttpHeaders.QueryMetrics]={},b[d.HttpHeaders.QueryMetrics][this.targetPartitionKeyRange.id]=c}return{result:a,headers:b}}catch(e){if(bh._needPartitionKeyRangeCacheRefresh(e)){let f=new bg(void 0,e);return this.fetchResults.push(f),{result:[f],headers:e.headers}}throw this._updateStates(e,void 0===e.resources),e}}getTargetParitionKeyRange(){return this.targetPartitionKeyRange}async nextItem(){if(this.err)throw this._updateStates(this.err,void 0),this.err;try{let{result:a,headers:b}=await this.current(),c=this.fetchResults.shift();if(this._updateStates(void 0,void 0===a),c.feedResponse!==a)throw Error(`Expected ${c.feedResponse} to equal ${a}`);switch(c.fetchResultType){case M.Done:return{result:void 0,headers:b};case M.Exception:throw c.error.headers=b,c.error;case M.Result:return{result:c.feedResponse,headers:b}}}catch(d){throw this._updateStates(d,void 0===d.item),d}}async current(){if(this.fetchResults.length>0){let a=this.fetchResults[0];switch(a.fetchResultType){case M.Done:return{result:void 0,headers:this._getAndResetActiveResponseHeaders()};case M.Exception:throw a.error.headers=this._getAndResetActiveResponseHeaders(),a.error;case M.Result:return{result:a.feedResponse,headers:this._getAndResetActiveResponseHeaders()}}}if(this.allFetched)return{result:void 0,headers:this._getAndResetActiveResponseHeaders()};let{result:b,headers:c}=await this.bufferMore();return(aj(this.respHeaders,c),void 0===b)?{result:void 0,headers:this.respHeaders}:this.current()}}let bi=aI("parallelQueryExecutionContextBase");(dw=N||(N={})).started="started",dw.inProgress="inProgress",dw.ended="ended";class bj{constructor(a,b,c,d,e){this.clientContext=a,this.collectionLink=b,this.query=c,this.options=d,this.partitionedQueryExecutionInfo=e,this.clientContext=a,this.collectionLink=b,this.query=c,this.options=d,this.partitionedQueryExecutionInfo=e,this.err=void 0,this.state=bj.STATES.started,this.routingProvider=new bf(this.clientContext),this.sortOrders=this.partitionedQueryExecutionInfo.queryInfo.orderBy,this.requestContinuation=d?d.continuationToken||d.continuation:null,this.respHeaders=ai(),this.orderByPQ=new(a8())((a,b)=>this.documentProducerComparator(b,a)),this.sem=ba()(1);let f=async()=>{try{let a=await this._onTargetPartitionRanges();this.waitingForInternalExecutionContexts=a.length;let b=void 0===d.maxDegreeOfParallelism||d.maxDegreeOfParallelism<1?a.length:Math.min(d.maxDegreeOfParallelism,a.length);bi.info("Query starting against "+a.length+" ranges with parallelism of "+b);let c=ba()(b),e=[],f=[];if(this.requestContinuation)throw Error("Continuation tokens are not yet supported for cross partition queries");(e=a).forEach(a=>{f.push(this._createTargetPartitionQueryExecutionContext(a))}),f.forEach(a=>{let b=async()=>{try{let{result:b,headers:d}=await a.current();if(this._mergeWithActiveResponseHeaders(d),void 0===b)return;try{this.orderByPQ.enq(a)}catch(e){this.err=e}}catch(f){this._mergeWithActiveResponseHeaders(f.headers),this.err=f}finally{c.leave(),this._decrementInitiationLock()}};c.take(b)})}catch(g){this.err=g,this.sem.leave();return}};this.sem.take(f)}_decrementInitiationLock(){this.waitingForInternalExecutionContexts=this.waitingForInternalExecutionContexts-1,0===this.waitingForInternalExecutionContexts&&(this.sem.leave(),0===this.orderByPQ.size()&&(this.state=bj.STATES.inProgress))}_mergeWithActiveResponseHeaders(a){aj(this.respHeaders,a)}_getAndResetActiveResponseHeaders(){let a=this.respHeaders;return this.respHeaders=ai(),a}async _onTargetPartitionRanges(){let a=this.partitionedQueryExecutionInfo.queryRanges,b=a.map(a=>bb.parseFromDict(a));return this.routingProvider.getOverlappingRanges(this.collectionLink,b)}async _getReplacementPartitionKeyRanges(a){let b=a.targetPartitionKeyRange;this.routingProvider=new bf(this.clientContext);let c=bb.parsePartitionKeyRange(b);return this.routingProvider.getOverlappingRanges(this.collectionLink,[c])}async _repairExecutionContext(a){let b=this.orderByPQ.deq();try{let c=await this._getReplacementPartitionKeyRanges(b),d=[];c.forEach(a=>{let c=this._createTargetPartitionQueryExecutionContext(a,b.continuationToken);d.push(c)});let e=async(a,b)=>{try{let{result:c}=await a.current();void 0===c||this.orderByPQ.enq(a),await b()}catch(d){this.err=d;return}},f=async b=>{if(!(b.length>0))return a();{let c=b.shift();await e(c,async()=>{await f(b)})}};await f(d)}catch(g){throw this.err=g,g}}static _needPartitionKeyRangeCacheRefresh(a){return a.code===u.Gone&&"substatus"in a&&a.substatus===v.PartitionKeyRangeGone}async _repairExecutionContextIfNeeded(a,b){let c=this.orderByPQ.peek();try{await c.current(),b()}catch(d){if(bj._needPartitionKeyRangeCacheRefresh(d))return this._repairExecutionContext(a);throw this.err=d,d}}async nextItem(){if(this.err)throw this.err;return new Promise((a,b)=>{this.sem.take(()=>{if(this.err){this.sem.leave(),this.err.headers=this._getAndResetActiveResponseHeaders(),b(this.err);return}if(0===this.orderByPQ.size())return this.state=bj.STATES.ended,this.sem.leave(),a({result:void 0,headers:this._getAndResetActiveResponseHeaders()});let c=()=>(this.sem.leave(),a(this.nextItem())),d=async()=>{let c;try{c=this.orderByPQ.deq()}catch(d){this.err=d,this.sem.leave(),this.err.headers=this._getAndResetActiveResponseHeaders(),b(this.err);return}let e,f;try{let g=await c.nextItem();if(e=g.result,f=g.headers,this._mergeWithActiveResponseHeaders(f),void 0===e)return this.err=Error(`Extracted DocumentProducer from the priority queue \
                                            doesn't have any buffered item!`),this.sem.leave(),a({result:void 0,headers:this._getAndResetActiveResponseHeaders()})}catch(h){this.err=Error(`Extracted DocumentProducer from the priority queue fails to get the \
                                    buffered item. Due to ${JSON.stringify(h)}`),this.err.headers=this._getAndResetActiveResponseHeaders(),this.sem.leave(),b(this.err);return}try{let{result:i,headers:j}=await c.current();if(this._mergeWithActiveResponseHeaders(j),void 0===i);else try{let k=c.fetchResults[0];if(void 0===k)throw Error("Extracted DocumentProducer from PQ is invalid state with no result!");this.orderByPQ.enq(c)}catch(l){this.err=l}}catch(m){bj._needPartitionKeyRangeCacheRefresh(m)?this.orderByPQ.enq(c):(this.err=m,b(this.err))}finally{this.sem.leave()}return a({result:e,headers:this._getAndResetActiveResponseHeaders()})};this._repairExecutionContextIfNeeded(c,d).catch(b)})})}hasMoreResults(){return!(this.state===bj.STATES.ended|| void 0!==this.err)}_createTargetPartitionQueryExecutionContext(a,b){let c=this.partitionedQueryExecutionInfo.queryInfo.rewrittenQuery,d,e=this.query;d="string"==typeof e?{query:e}:e,c&&(d=JSON.parse(JSON.stringify(d)),c=c.replace("{documentdb-formattableorderbyquery-filter}","true"),d.query=c);let f=Object.assign({},this.options);return f.continuationToken=b,new bh(this.clientContext,this.collectionLink,d,a,f)}}bj.STATES=N;class bk{constructor(a,b,c,d,e){this.clientContext=a,this.collectionLink=b,this.query=c,this.options=d,this.partitionedQueryExecutionInfo=e,this.endpoint=null,this.pageSize=d.maxItemCount,void 0===this.pageSize&&(this.pageSize=bk.DEFAULT_PAGE_SIZE);let f=e.queryInfo.orderBy;Array.isArray(f)&&f.length>0?this.endpoint=new class{constructor(a){this.executionContext=a}async nextItem(){let{result:a,headers:b}=await this.executionContext.nextItem();return{result:void 0!==a?a.payload:void 0,headers:b}}hasMoreResults(){return this.executionContext.hasMoreResults()}}(new class extends bj{constructor(a,b,c,d,e){super(a,b,c,d,e),this.orderByComparator=new a_(this.sortOrders)}documentProducerComparator(a,b){return this.orderByComparator.compare(a,b)}}(this.clientContext,this.collectionLink,this.query,this.options,this.partitionedQueryExecutionInfo)):this.endpoint=new class extends bj{documentProducerComparator(a,b){return a.generation-b.generation}}(this.clientContext,this.collectionLink,this.query,this.options,this.partitionedQueryExecutionInfo),(Object.keys(e.queryInfo.groupByAliasToAggregateType).length>0||e.queryInfo.aggregates.length>0||e.queryInfo.groupByExpressions.length>0)&&(e.queryInfo.hasSelectValue?this.endpoint=new class{constructor(a,b){this.executionContext=a,this.queryInfo=b,this.aggregators=new Map,this.aggregateResultArray=[],this.completed=!1,this.aggregateType=this.queryInfo.aggregates[0]}async nextItem(){if(this.aggregateResultArray.length>0)return{result:this.aggregateResultArray.pop(),headers:ai()};if(this.completed)return{result:void 0,headers:ai()};let a=ai();for(;this.executionContext.hasMoreResults();){let{result:b,headers:c}=await this.executionContext.nextItem();if(aj(a,c),b){let d=a5,e=b;b.groupByItems&&(e=b.payload,d=await aX(b.groupByItems));let f=this.aggregators.get(d);if(f||this.aggregators.set(d,a4(this.aggregateType)),this.aggregateType){let g=a6(e[0]);null===g&&(this.completed=!0),this.aggregators.get(d).aggregate(g)}else this.aggregators.get(d).aggregate(e)}}if(this.completed)return{result:void 0,headers:a};for(let h of this.aggregators.values())this.aggregateResultArray.push(h.getResult());return this.completed=!0,{result:this.aggregateResultArray.pop(),headers:a}}hasMoreResults(){return this.executionContext.hasMoreResults()||this.aggregateResultArray.length>0}}(this.endpoint,e.queryInfo):this.endpoint=new class{constructor(a,b){this.executionContext=a,this.queryInfo=b,this.groupings=new Map,this.aggregateResultArray=[],this.completed=!1}async nextItem(){if(this.aggregateResultArray.length>0)return{result:this.aggregateResultArray.pop(),headers:ai()};if(this.completed)return{result:void 0,headers:ai()};let a=ai();for(;this.executionContext.hasMoreResults();){let{result:b,headers:c}=await this.executionContext.nextItem();if(aj(a,c),b){let d=b.groupByItems?await aX(b.groupByItems):a5,e=this.groupings.get(d),f=b.payload;if(e)Object.keys(f).map(a=>{let b=f[a]?f[a]:new Map().set("item2",null),c=a6(b);e.get(a).aggregate(c)});else{let g=new Map;this.groupings.set(d,g),Object.keys(f).map(a=>{let b=this.queryInfo.groupByAliasToAggregateType[a],c=a4(b);if(g.set(a,c),b){let d=a6(f[a]);c.aggregate(d)}else c.aggregate(f[a])})}}}for(let h of this.groupings.values()){let i={};for(let[j,k]of h.entries())i[j]=k.getResult();this.aggregateResultArray.push(i)}return this.completed=!0,{result:this.aggregateResultArray.pop(),headers:a}}hasMoreResults(){return this.executionContext.hasMoreResults()||this.aggregateResultArray.length>0}}(this.endpoint,e.queryInfo));let g=e.queryInfo.top;"number"==typeof g&&(this.endpoint=new aP(this.endpoint,0,g));let h=e.queryInfo.limit,i=e.queryInfo.offset;"number"==typeof h&&"number"==typeof i&&(this.endpoint=new aP(this.endpoint,i,h));let j=e.queryInfo.distinctType;"Ordered"===j&&(this.endpoint=new class{constructor(a){this.executionContext=a}async nextItem(){let{headers:a,result:b}=await this.executionContext.nextItem();if(b){let c=await aX(b);if(c===this.hashedLastResult)return{result:void 0,headers:a};this.hashedLastResult=c}return{result:b,headers:a}}hasMoreResults(){return this.executionContext.hasMoreResults()}}(this.endpoint)),"Unordered"===j&&(this.endpoint=new class{constructor(a){this.executionContext=a,this.hashedResults=new Set}async nextItem(){let{headers:a,result:b}=await this.executionContext.nextItem();if(b){let c=await aX(b);if(this.hashedResults.has(c))return{result:void 0,headers:a};this.hashedResults.add(c)}return{result:b,headers:a}}hasMoreResults(){return this.executionContext.hasMoreResults()}}(this.endpoint))}async nextItem(){return this.endpoint.nextItem()}hasMoreResults(){return this.endpoint.hasMoreResults()}async fetchMore(){return"function"==typeof this.endpoint.fetchMore?this.endpoint.fetchMore():(this.fetchBuffer=[],this.fetchMoreRespHeaders=ai(),this._fetchMoreImplementation())}async _fetchMoreImplementation(){try{let{result:a,headers:b}=await this.endpoint.nextItem();if(aj(this.fetchMoreRespHeaders,b),void 0===a){if(0===this.fetchBuffer.length)return{result:void 0,headers:this.fetchMoreRespHeaders};{let c=this.fetchBuffer;return this.fetchBuffer=[],{result:c,headers:this.fetchMoreRespHeaders}}}if(this.fetchBuffer.push(a),!(this.fetchBuffer.length>=this.pageSize))return this._fetchMoreImplementation();{let d=this.fetchBuffer.slice(0,this.pageSize);return this.fetchBuffer=this.fetchBuffer.splice(this.pageSize),{result:d,headers:this.fetchMoreRespHeaders}}}catch(e){if(aj(this.fetchMoreRespHeaders,e.headers),e.headers=this.fetchMoreRespHeaders,e)throw e}}}bk.DEFAULT_PAGE_SIZE=10;class bl{constructor(a,b,c){this.resources=a,this.headers=b,this.hasMoreResults=c}get continuation(){return this.continuationToken}get continuationToken(){return this.headers[d.HttpHeaders.Continuation]}get queryMetrics(){return this.headers[d.HttpHeaders.QueryMetrics]}get requestCharge(){return this.headers[d.HttpHeaders.RequestCharge]}get activityId(){return this.headers[d.HttpHeaders.ActivityId]}}class bm{constructor(a,b,c,d,e,f){this.clientContext=a,this.query=b,this.options=c,this.fetchFunctions=d,this.resourceLink=e,this.resourceType=f,this.query=b,this.fetchFunctions=d,this.options=c||{},this.resourceLink=e,this.fetchAllLastResHeaders=ai(),this.reset(),this.isInitialized=!1}getAsyncIterator(){return an(this,arguments,function*(){for(this.reset(),this.queryPlanPromise=this.fetchQueryPlan();this.queryExecutionContext.hasMoreResults();){let a;try{a=yield am(this.queryExecutionContext.fetchMore())}catch(b){if(this.needsQueryPlan(b)){yield am(this.createPipelinedExecutionContext());try{a=yield am(this.queryExecutionContext.fetchMore())}catch(c){this.handleSplitError(c)}}else throw b}let d=new bl(a.result,a.headers,this.queryExecutionContext.hasMoreResults());void 0!==a.result&&(yield yield am(d))}})}hasMoreResults(){return this.queryExecutionContext.hasMoreResults()}async fetchAll(){this.reset(),this.fetchAllTempResources=[];let a;try{a=await this.toArrayImplementation()}catch(b){this.handleSplitError(b)}return a}async fetchNext(){this.queryPlanPromise=this.fetchQueryPlan(),this.isInitialized||await this.init();let a;try{a=await this.queryExecutionContext.fetchMore()}catch(b){if(this.needsQueryPlan(b)){await this.createPipelinedExecutionContext();try{a=await this.queryExecutionContext.fetchMore()}catch(c){this.handleSplitError(c)}}else throw b}return new bl(a.result,a.headers,this.queryExecutionContext.hasMoreResults())}reset(){this.queryPlanPromise=void 0,this.queryExecutionContext=new aO(this.options,this.fetchFunctions)}async toArrayImplementation(){for(this.queryPlanPromise=this.fetchQueryPlan(),this.isInitialized||await this.init();this.queryExecutionContext.hasMoreResults();){let a;try{a=await this.queryExecutionContext.nextItem()}catch(b){if(this.needsQueryPlan(b))await this.createPipelinedExecutionContext(),a=await this.queryExecutionContext.nextItem();else throw b}let{result:c,headers:d}=a;aj(this.fetchAllLastResHeaders,d),void 0!==c&&this.fetchAllTempResources.push(c)}return new bl(this.fetchAllTempResources,this.fetchAllLastResHeaders,this.queryExecutionContext.hasMoreResults())}async createPipelinedExecutionContext(){let a=await this.queryPlanPromise;if(a instanceof Error)throw a;let b=a.result,c=b.queryInfo;if(c.aggregates.length>0&& !1===c.hasSelectValue)throw Error("Aggregate queries must use the VALUE keyword");this.queryExecutionContext=new bk(this.clientContext,this.resourceLink,this.query,this.options,b)}async fetchQueryPlan(){return this.queryPlanPromise||this.resourceType!==E.item?this.queryPlanPromise:this.clientContext.getQueryPlan(p(this.resourceLink)+"/docs",E.item,this.resourceLink,this.query,this.options).catch(a=>a)}needsQueryPlan(a){var b;if((null===(b=a.body)|| void 0===b?void 0:b.additionalErrorInfo)||a.message.includes("Cross partition query only supports"))return a.code===u.BadRequest&&this.resourceType===E.item;throw a}async init(){if(!0!==this.isInitialized)return void 0===this.initPromise&&(this.initPromise=this._init()),this.initPromise}async _init(){!0===this.options.forceQueryPlan&&this.resourceType===E.item&&await this.createPipelinedExecutionContext(),this.isInitialized=!0}handleSplitError(a){if(410===a.code){let b=Error("Encountered partition split and could not recover. This request is retryable");throw b.code=503,b.originalError=a,b}throw a}}function bn(a){return a=r(a),s(a),d.Path.DatabasesPathSegment+"/"+a}function bo(a,b){return b=r(b),s(b),bn(a)+"/"+d.Path.CollectionsPathSegment+"/"+b}function bp(a,b){return b=r(b),s(b),bn(a)+"/"+d.Path.UsersPathSegment+"/"+b}class bq{constructor(a,b,c,d){this.resource=a,this.headers=b,this.statusCode=c,this.substatus=d}get requestCharge(){return Number(this.headers[d.HttpHeaders.RequestCharge])||0}get activityId(){return this.headers[d.HttpHeaders.ActivityId]}get etag(){return this.headers[d.HttpHeaders.ETag]}}class br{constructor(a,b){this.container=a,this.clientContext=b}query(a,b){let c=p(this.container.url,E.conflicts),d=o(this.container.url);return new bm(this.clientContext,a,b,b=>this.clientContext.queryFeed({path:c,resourceType:E.conflicts,resourceId:d,resultFn:a=>a.Conflicts,query:a,options:b}))}readAll(a){return this.query(void 0,a)}}class bs extends bq{constructor(a,b,c,d){super(a,b,c),this.conflict=d}}function bt(a,b){if(b&&b.paths&&b.paths.length>0){let c=[];return(b.paths.forEach(b=>{let d=function(a){let b=[],c=0,d=()=>{throw Error("Path "+a+" is invalid at index "+c)},e=()=>{let b=a[c],e=++c;for(;-1===(e=a.indexOf(b,e))&&d(),"\\"===a[e-1];)++e;let f=a.substr(c,e-c);return c=e+1,f},f=()=>{let b=a.indexOf("/",c),d=null;return -1===b?(d=a.substr(c),c=a.length):(d=a.substr(c,b-c),c=b),d=d.trim()};for(;c<a.length&&("/"!==a[c]&&d(),++c!==a.length);)'"'===a[c]||"'"===a[c]?b.push(e()):b.push(f());return b}(b),e=a;for(let f of d)if("object"==typeof e&&f in e)e=e[f];else{e=void 0;break}c.push(e)}),1===c.length&& void 0===c[0])?bu(b):c}}function bu(a){return!0===a.systemKey?[]:[{}]}class bv{constructor(a,b,c,d){this.container=a,this.id=b,this.clientContext=c,this.partitionKey=d,this.partitionKey=d}get url(){return`/${this.container.url}/${d.Path.ConflictsPathSegment}/${this.id}`}async read(a){let b=p(this.url,E.conflicts),c=o(this.url),d=await this.clientContext.read({path:b,resourceType:E.user,resourceId:c,options:a});return new bs(d.result,d.headers,d.code,this)}async delete(a){if(void 0===this.partitionKey){let{resource:b}=await this.container.readPartitionKeyDefinition();this.partitionKey=bu(b)}let c=p(this.url),d=o(this.url),e=await this.clientContext.delete({path:c,resourceType:E.conflicts,resourceId:d,options:a,partitionKey:this.partitionKey});return new bs(e.result,e.headers,e.code,this)}}var bw=new Uint8Array(16);function bx(){if(!O&&!(O="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return O(bw)}for(var by=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,bz=[],bA=0;bA<256;++bA)bz.push((bA+256).toString(16).substr(1));var bB=function(a){var b,c=arguments.length>1&& void 0!==arguments[1]?arguments[1]:0,d=(bz[a[c+0]]+bz[a[c+1]]+bz[a[c+2]]+bz[a[c+3]]+"-"+bz[a[c+4]]+bz[a[c+5]]+"-"+bz[a[c+6]]+bz[a[c+7]]+"-"+bz[a[c+8]]+bz[a[c+9]]+"-"+bz[a[c+10]]+bz[a[c+11]]+bz[a[c+12]]+bz[a[c+13]]+bz[a[c+14]]+bz[a[c+15]]).toLowerCase();if(!("string"==typeof(b=d)&&by.test(b)))throw TypeError("Stringified UUID is invalid");return d},bC=function(a,b,c){var d=(a=a||{}).random||(a.rng||bx)();if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,b){c=c||0;for(var e=0;e<16;++e)b[c+e]=d[e];return b}return bB(d)};class bD{constructor(a,b,c,d){this.result=a,this.count=b,this.statusCode=c,this.headers=Object.freeze(d)}get requestCharge(){let a=this.headers[d.HttpHeaders.RequestCharge];return a?parseInt(a,10):null}get activityId(){return this.headers[d.HttpHeaders.ActivityId]}get continuation(){return this.etag}get sessionToken(){return this.headers[d.HttpHeaders.SessionToken]}get etag(){return this.headers[d.HttpHeaders.ETag]}}class bE{constructor(a,b,c,d,e){this.clientContext=a,this.resourceId=b,this.resourceLink=c,this.partitionKey=d,this.changeFeedOptions=e,this.isPartitionSpecified=void 0!==d;let f=!0;e.continuation&&(this.nextIfNoneMatch=e.continuation,f=!1),e.startTime&&(this.ifModifiedSince=e.startTime.toUTCString(),f=!1),f&&!e.startFromBeginning&&(this.nextIfNoneMatch=bE.IfNoneMatchAllHeaderValue)}get hasMoreResults(){return this.lastStatusCode!==u.NotModified}getAsyncIterator(){return an(this,arguments,function*(){do{let a=yield am(this.fetchNext());a.count>0&&(yield yield am(a))}while(this.hasMoreResults)})}async fetchNext(){let a=await this.getFeedResponse();return this.lastStatusCode=a.statusCode,this.nextIfNoneMatch=a.headers[d.HttpHeaders.ETag],a}async getFeedResponse(){if(!this.isPartitionSpecified)throw Error("Container is partitioned, but no partition key or partition key range id was specified.");let a={initialHeaders:{},useIncrementalFeed:!0};"number"==typeof this.changeFeedOptions.maxItemCount&&(a.maxItemCount=this.changeFeedOptions.maxItemCount),this.changeFeedOptions.sessionToken&&(a.sessionToken=this.changeFeedOptions.sessionToken),this.nextIfNoneMatch&&(a.accessCondition={type:d.HttpHeaders.IfNoneMatch,condition:this.nextIfNoneMatch}),this.ifModifiedSince&&(a.initialHeaders[d.HttpHeaders.IfModifiedSince]=this.ifModifiedSince);let b=await this.clientContext.queryFeed({path:this.resourceLink,resourceType:E.item,resourceId:this.resourceId,resultFn:a=>a?a.Documents:[],query:void 0,options:a,partitionKey:this.partitionKey});return new bD(b.result,b.result?b.result.length:0,b.code,b.headers)}}bE.IfNoneMatchAllHeaderValue="*";class bF extends bq{constructor(a,b,c,d,e){super(a,b,c,d),this.item=e}}class bG{constructor(a,b,c,d){this.container=a,this.id=b,this.clientContext=d,this.partitionKey=c}get url(){var a,b,c;return a=this.container.database.id,b=this.container.id,c=this.id,!function(a){if("string"!=typeof a||q(a))throw Error("Resource ID must be a string and cannot be undefined, null or empty");if(h.test(a))throw Error("Illegal characters ['/', '\\', '#'] cannot be used in Resource ID");return!0}(c=r(c)),bo(a,b)+"/"+d.Path.DocumentsPathSegment+"/"+c}async read(a={}){if(void 0===this.partitionKey){let{resource:b}=await this.container.readPartitionKeyDefinition();this.partitionKey=bu(b)}let c=p(this.url),d=o(this.url),e;try{e=await this.clientContext.read({path:c,resourceType:E.item,resourceId:d,options:a,partitionKey:this.partitionKey})}catch(f){if(f.code!==u.NotFound)throw f;e=f}return new bF(e.result,e.headers,e.code,e.substatus,this)}async replace(a,b={}){if(void 0===this.partitionKey){let{resource:c}=await this.container.readPartitionKeyDefinition();this.partitionKey=bt(a,c)}let d={};if(!n(a,d))throw d;let e=p(this.url),f=o(this.url),g=await this.clientContext.replace({body:a,path:e,resourceType:E.item,resourceId:f,options:b,partitionKey:this.partitionKey});return new bF(g.result,g.headers,g.code,g.substatus,this)}async delete(a={}){if(void 0===this.partitionKey){let{resource:b}=await this.container.readPartitionKeyDefinition();this.partitionKey=bu(b)}let c=p(this.url),d=o(this.url),e=await this.clientContext.delete({path:c,resourceType:E.item,resourceId:d,options:a,partitionKey:this.partitionKey});return new bF(e.result,e.headers,e.code,e.substatus,this)}async patch(a,b={}){if(void 0===this.partitionKey){let{resource:c}=await this.container.readPartitionKeyDefinition();this.partitionKey=bt(a,c)}let d=p(this.url),e=o(this.url),f=await this.clientContext.patch({body:a,path:d,resourceType:E.item,resourceId:e,options:b,partitionKey:this.partitionKey});return new bF(f.result,f.headers,f.code,f.substatus,this)}}let bH=bC,bI={Create:"Create",Upsert:"Upsert",Read:"Read",Delete:"Delete",Replace:"Replace",Patch:"Patch"};var bJ=c(9499),bK=c.n(bJ);let bL={Undefined:"00",Null:"01",False:"02",True:"03",MinNumber:"04",Number:"05",MaxNumber:"06",MinString:"07",String:"08",MaxString:"09",Int64:"0a",Int32:"0b",Int16:"0c",Int8:"0d",Uint64:"0e",Uint32:"0f",Uint16:"10",Uint8:"11",Binary:"12",Guid:"13",Float:"14",Infinity:"FF"};var bM=c(1876).Buffer;function bN(a){let b=bO(a),c=bM.from(bL.Number,"hex"),d=bK().asUintN(64,bK().signedRightShift(b,bK().BigInt(56)));c=bM.concat([c,bM.from(d.toString(16),"hex")]),b=bK().asUintN(64,bK().leftShift(bK().BigInt(b),bK().BigInt(8)));let e=bK().BigInt(0),f=!1,g,h;do f?f=!1:"00"!==(h=e.toString(16).padStart(2,"0"))&&(c=bM.concat([c,bM.from(h,"hex")])),g=bK().asUintN(64,bK().signedRightShift(b,bK().BigInt(56))),e=bK().asUintN(64,bK().bitwiseOr(g,bK().BigInt(1))),b=bK().asUintN(64,bK().leftShift(b,bK().BigInt(7)));while(bK().notEqual(b,bK().BigInt(0)));let i=bK().asUintN(64,bK().bitwiseAnd(e,bK().BigInt(254)));return"00"!==(h=i.toString(16).padStart(2,"0"))&&(c=bM.concat([c,bM.from(h,"hex")])),c}function bO(a){let b=bQ(a),c=bK().BigInt(0x7fffffffffffffff),d=b<c?bK().bitwiseXor(b,c):bK().add(bK().bitwiseNot(b),bK().BigInt(1));return d}function bP(a){let b=bM.alloc(8),c=bQ(a);for(let d=0;d<8;d++)b[d]=bK().toNumber(bK().bitwiseAnd(bK().signedRightShift(c,bK().multiply(bK().BigInt(d),bK().BigInt(8))),bK().BigInt(255)));return b}function bQ(a){let b=new DataView(new ArrayBuffer(8));return b.setFloat64(0,a),bK().BigInt(`0x${bR(b.buffer)}`)}function bR(a){return Array.prototype.map.call(new Uint8Array(a),a=>("00"+a.toString(16)).slice(-2)).join("")}var bS=c(1876).Buffer,bT=c(1876).Buffer;function bU(a,b){return(65535&a)*b+(((a>>>16)*b&65535)<<16)}function bV(a,b){return a<<b|a>>>32-b}function bW(a){return a^=a>>>16,a=bU(a,2246822507),a^=a>>>13,a=bU(a,3266489909),a^=a>>>16}function bX(a,b){a=[a[0]>>>16,65535&a[0],a[1]>>>16,65535&a[1]],b=[b[0]>>>16,65535&b[0],b[1]>>>16,65535&b[1]];let c=[0,0,0,0];return c[3]+=a[3]+b[3],c[2]+=c[3]>>>16,c[3]&=65535,c[2]+=a[2]+b[2],c[1]+=c[2]>>>16,c[2]&=65535,c[1]+=a[1]+b[1],c[0]+=c[1]>>>16,c[1]&=65535,c[0]+=a[0]+b[0],c[0]&=65535,[c[0]<<16|c[1],c[2]<<16|c[3]]}function bY(a,b){a=[a[0]>>>16,65535&a[0],a[1]>>>16,65535&a[1]],b=[b[0]>>>16,65535&b[0],b[1]>>>16,65535&b[1]];let c=[0,0,0,0];return c[3]+=a[3]*b[3],c[2]+=c[3]>>>16,c[3]&=65535,c[2]+=a[2]*b[3],c[1]+=c[2]>>>16,c[2]&=65535,c[2]+=a[3]*b[2],c[1]+=c[2]>>>16,c[2]&=65535,c[1]+=a[1]*b[3],c[0]+=c[1]>>>16,c[1]&=65535,c[1]+=a[2]*b[2],c[0]+=c[1]>>>16,c[1]&=65535,c[1]+=a[3]*b[1],c[0]+=c[1]>>>16,c[1]&=65535,c[0]+=a[0]*b[3]+a[1]*b[2]+a[2]*b[1]+a[3]*b[0],c[0]&=65535,[c[0]<<16|c[1],c[2]<<16|c[3]]}function bZ(a,b){return 32==(b%=64)?[a[1],a[0]]:b<32?[a[0]<<b|a[1]>>>32-b,a[1]<<b|a[0]>>>32-b]:(b-=32,[a[1]<<b|a[0]>>>32-b,a[0]<<b|a[1]>>>32-b])}function b$(a,b){return 0==(b%=64)?a:b<32?[a[0]<<b|a[1]>>>32-b,a[1]<<b]:[a[1]<<b-32,0]}function b_(a,b){return[a[0]^b[0],a[1]^b[1]]}function b0(a){return a=bY(a=b_(a,[0,a[0]>>>1]),[4283543511,3981806797]),a=b_(a,[0,a[0]>>>1]),a=bY(a,[3301882366,444984403]),a=b_(a,[0,a[0]>>>1])}function b1(a){let b=bT.allocUnsafe(a.length);for(let c=0,d=a.length-1;c<=d;++c,--d)b[c]=a[d],b[d]=a[c];return b}var b2={version:"3.0.0",x86:{hash32:function(a,b){b=b||0;let c=a.length%4,d=a.length-c,e=b,f=0,g=0;for(let h=0;h<d;h+=4)f=bV(f=bU(f=a[h]|a[h+1]<<8|a[h+2]<<16|a[h+3]<<24,3432918353),15),f=bU(f,461845907),e^=f,e=bV(e,13),e=bU(e,5)+3864292196,g=h+4;switch(f=0,c){case 3:f^=a[g+2]<<16;case 2:f^=a[g+1]<<8;case 1:f^=a[g],f=bV(f=bU(f,3432918353),15),f=bU(f,461845907),e^=f}return e^=a.length,(e=bW(e))>>>0},hash128:function(a,b){b=b||0;let c=a.length%16,d=a.length-c,e=b,f=b,g=b,h=b,i=0,j=0,k=0,l=0,m=0;for(let n=0;n<d;n+=16)i=a[n]|a[n+1]<<8|a[n+2]<<16|a[n+3]<<24,j=a[n+4]|a[n+5]<<8|a[n+6]<<16|a[n+7]<<24,k=a[n+8]|a[n+9]<<8|a[n+10]<<16|a[n+11]<<24,l=a[n+12]|a[n+13]<<8|a[n+14]<<16|a[n+15]<<24,i=bU(i,597399067),i=bV(i,15),i=bU(i,2869860233),e^=i,e=bV(e,19),e+=f,e=bU(e,5)+1444728091,j=bU(j,2869860233),j=bV(j,16),j=bU(j,951274213),f^=j,f=bV(f,17),f+=g,f=bU(f,5)+197830471,k=bU(k,951274213),k=bV(k,17),k=bU(k,2716044179),g^=k,g=bV(g,15),g+=h,g=bU(g,5)+2530024501,l=bU(l,2716044179),l=bV(l,18),l=bU(l,597399067),h^=l,h=bV(h,13),h+=e,h=bU(h,5)+850148119,m=n+16;switch(i=0,j=0,k=0,l=0,c){case 15:l^=a[m+14]<<16;case 14:l^=a[m+13]<<8;case 13:l^=a[m+12],l=bV(l=bU(l,2716044179),18),l=bU(l,597399067),h^=l;case 12:k^=a[m+11]<<24;case 11:k^=a[m+10]<<16;case 10:k^=a[m+9]<<8;case 9:k^=a[m+8],k=bV(k=bU(k,951274213),17),k=bU(k,2716044179),g^=k;case 8:j^=a[m+7]<<24;case 7:j^=a[m+6]<<16;case 6:j^=a[m+5]<<8;case 5:j^=a[m+4],j=bV(j=bU(j,2869860233),16),j=bU(j,951274213),f^=j;case 4:i^=a[m+3]<<24;case 3:i^=a[m+2]<<16;case 2:i^=a[m+1]<<8;case 1:i^=a[m],i=bV(i=bU(i,597399067),15),i=bU(i,2869860233),e^=i}return e^=a.length,f^=a.length,g^=a.length,h^=a.length,e+=f,e+=g,e+=h,f+=e,g+=e,h+=e,e=bW(e),f=bW(f),g=bW(g),h=bW(h),e+=f,e+=g,e+=h,f+=e,g+=e,h+=e,("00000000"+(e>>>0).toString(16)).slice(-8)+("00000000"+(f>>>0).toString(16)).slice(-8)+("00000000"+(g>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)}},x64:{hash128:function(a,b){b=b||0;let c=a.length%16,d=a.length-c,e=[0,b],f=[0,b],g=[0,0],h=[0,0],i=[2277735313,289559509],j=[1291169091,658871167],k=0;for(let l=0;l<d;l+=16)g=[a[l+4]|a[l+5]<<8|a[l+6]<<16|a[l+7]<<24,a[l]|a[l+1]<<8|a[l+2]<<16|a[l+3]<<24,],h=[a[l+12]|a[l+13]<<8|a[l+14]<<16|a[l+15]<<24,a[l+8]|a[l+9]<<8|a[l+10]<<16|a[l+11]<<24,],g=bY(g,i),g=bZ(g,31),g=bY(g,j),e=b_(e,g),e=bZ(e,27),e=bX(e,f),e=bX(bY(e,[0,5]),[0,1390208809]),h=bY(h,j),h=bZ(h,33),h=bY(h,i),f=b_(f,h),f=bZ(f,31),f=bX(f,e),f=bX(bY(f,[0,5]),[0,944331445]),k=l+16;switch(g=[0,0],h=[0,0],c){case 15:h=b_(h,b$([0,a[k+14]],48));case 14:h=b_(h,b$([0,a[k+13]],40));case 13:h=b_(h,b$([0,a[k+12]],32));case 12:h=b_(h,b$([0,a[k+11]],24));case 11:h=b_(h,b$([0,a[k+10]],16));case 10:h=b_(h,b$([0,a[k+9]],8));case 9:h=bZ(h=bY(h=b_(h,[0,a[k+8]]),j),33),h=bY(h,i),f=b_(f,h);case 8:g=b_(g,b$([0,a[k+7]],56));case 7:g=b_(g,b$([0,a[k+6]],48));case 6:g=b_(g,b$([0,a[k+5]],40));case 5:g=b_(g,b$([0,a[k+4]],32));case 4:g=b_(g,b$([0,a[k+3]],24));case 3:g=b_(g,b$([0,a[k+2]],16));case 2:g=b_(g,b$([0,a[k+1]],8));case 1:g=bZ(g=bY(g=b_(g,[0,a[k]]),i),31),g=bY(g,j),e=b_(e,g)}e=b_(e,[0,a.length]),f=b_(f,[0,a.length]),e=bX(e,f),f=bX(f,e),e=b0(e),f=b0(f),e=bX(e,f),f=bX(f,e);let m=bT.from(("00000000"+(e[0]>>>0).toString(16)).slice(-8)+("00000000"+(e[1]>>>0).toString(16)).slice(-8),"hex"),n=b1(m).toString("hex"),o=bT.from(("00000000"+(f[0]>>>0).toString(16)).slice(-8)+("00000000"+(f[1]>>>0).toString(16)).slice(-8),"hex"),p=b1(o).toString("hex");return n+p}},inputValidation:!0},b3=c(1876).Buffer,b4=c(1876).Buffer;let b5=bC;function b6(a){let b=typeof a;return a&&!("string"===b||"boolean"===b||"number"===b)}class b7{constructor(a,b){this.container=a,this.clientContext=b}query(a,b={}){let c=p(this.container.url,E.item),d=o(this.container.url),e=e=>this.clientContext.queryFeed({path:c,resourceType:E.item,resourceId:d,resultFn:a=>a?a.Documents:[],query:a,options:e,partitionKey:b.partitionKey});return new bm(this.clientContext,a,b,e,this.container.url,E.item)}readChangeFeed(a,b){return b6(a)?this.changeFeed(a):this.changeFeed(a,b)}changeFeed(a,b){let c;!b&&b6(a)?(c=void 0,b=a):void 0===a||b6(a)||(c=a),b||(b={});let d=p(this.container.url,E.item),e=o(this.container.url);return new bE(this.clientContext,e,d,c,b)}readAll(a){return this.query("SELECT * from c",a)}async create(a,b={}){void 0!==a.id&&""!==a.id||b.disableAutomaticIdGeneration||(a.id=b5());let{resource:c}=await this.container.readPartitionKeyDefinition(),d=bt(a,c),e={};if(!n(a,e))throw e;let f=p(this.container.url,E.item),g=o(this.container.url),h=await this.clientContext.create({body:a,path:f,resourceType:E.item,resourceId:g,options:b,partitionKey:d}),i=new bG(this.container,h.result.id,d,this.clientContext);return new bF(h.result,h.headers,h.code,h.substatus,i)}async upsert(a,b={}){let{resource:c}=await this.container.readPartitionKeyDefinition(),d=bt(a,c);void 0!==a.id&&""!==a.id||b.disableAutomaticIdGeneration||(a.id=b5());let e={};if(!n(a,e))throw e;let f=p(this.container.url,E.item),g=o(this.container.url),h=await this.clientContext.upsert({body:a,path:f,resourceType:E.item,resourceId:g,options:b,partitionKey:d}),i=new bG(this.container,h.result.id,d,this.clientContext);return new bF(h.result,h.headers,h.code,h.substatus,i)}async bulk(a,b,c){let{resources:d}=await this.container.readPartitionKeyRanges().fetchAll(),{resource:e}=await this.container.getPartitionKeyDefinition(),f=d.map(a=>({min:a.minInclusive,max:a.maxExclusive,rangeId:a.id,indexes:[],operations:[]}));a.map(a=>(function(a,b,c={}){if(a.operationType!==bI.Create&&a.operationType!==bI.Upsert|| void 0!==a.resourceBody.id&&""!==a.resourceBody.id||c.disableAutomaticIdGeneration||(a.resourceBody.id=bH()),"partitionKey"in a){let d=bt(a,{paths:["/partitionKey"]});return Object.assign(Object.assign({},a),{partitionKey:JSON.stringify(d)})}if(a.operationType===bI.Create||a.operationType===bI.Replace||a.operationType===bI.Upsert){let e=bt(a.resourceBody,b);return Object.assign(Object.assign({},a),{partitionKey:JSON.stringify(e)})}return a.operationType===bI.Read||a.operationType===bI.Delete?Object.assign(Object.assign({},a),{partitionKey:"[{}]"}):a})(a,e,c)).forEach((a,b)=>{let c=e.paths[0].replace("/",""),d=e.version&&2===e.version,g=function(a,b){var c;let d="Patch"!==(c=a).operationType&& void 0!==c.resourceBody?function a(b,c){let d=c.split("/"),e=b;for(let f of d){if(!(f in e))return console.warn(`Partition key not found, using undefined: ${c} at ${f}`),"{}";e=e[f]}return e}(a.resourceBody,b):a.partitionKey&&a.partitionKey.replace(/[[\]"']/g,"")||a.partitionKey;return"{}"===d&&"[{}]"===a.partitionKey?{}:"null"===d&&"[null]"===a.partitionKey?null:"0"===d&&"[0]"===a.partitionKey?0:d}(a,c),h=d?function(a){let b=function a(b){let c;switch(typeof b){case"string":return b4.concat([b4.from(bL.String,"hex"),b4.from(b),b4.from(bL[1/0],"hex"),]);case"number":{let d=bP(b);return b4.concat([b4.from(bL.Number,"hex"),d])}case"boolean":{let e=b?bL.True:bL.False;return b4.from(e,"hex")}case"object":if(null===b)return b4.from(bL.Null,"hex");return b4.from(bL.Undefined,"hex");case"undefined":return b4.from(bL.Undefined,"hex");default:throw Error(`Unexpected type: ${typeof b}`)}}(a),c=b2.x64.hash128(b),d=function a(b){let c=b4.allocUnsafe(b.length);for(let d=0,e=b.length-1;d<=e;++d,--e)c[d]=b[e],c[e]=b[d];return c}(b4.from(c,"hex"));return d[0]&=63,d.toString("hex").toUpperCase()}(g):function(a){let b=function a(b){let c;switch(typeof b){case"string":{let d=b.substr(0,100);return b3.concat([b3.from(bL.String,"hex"),b3.from(d),b3.from(bL.Undefined,"hex"),])}case"number":{let e=bP(b);return b3.concat([b3.from(bL.Number,"hex"),e])}case"boolean":{let f=b?bL.True:bL.False;return b3.from(f,"hex")}case"object":if(null===b)return b3.from(bL.Null,"hex");return b3.from(bL.Undefined,"hex");case"undefined":return b3.from(bL.Undefined,"hex");default:throw Error(`Unexpected type: ${typeof b}`)}}(a),c=b2.x86.hash32(b),d=bN(c),e=function a(b){switch(typeof b){case"string":{let c=b.substr(0,100);return function(a){let b=bS.from(bL.String,"hex"),c=[...bS.from(a)],d=a.length<=100;for(let e=0;e<(d?c.length:101);e++){let f=c[e];f<255&&f++,b=bS.concat([b,bS.from(f.toString(16),"hex")])}return d&&(b=bS.concat([b,bS.from(bL.Undefined,"hex")])),b}(c)}case"number":{let d=bN(b);return d}case"boolean":{let e=b?bL.True:bL.False;return b3.from(e,"hex")}case"object":if(null===b)return b3.from(bL.Null,"hex");return b3.from(bL.Undefined,"hex");case"undefined":return b3.from(bL.Undefined,"hex");default:throw Error(`Unexpected type: ${typeof b}`)}}(a);return b3.concat([d,e]).toString("hex").toUpperCase()}(g),i=f.find(a=>(function(a,b,c){let d=c.localeCompare(a)>=0,e=0>c.localeCompare(b);return d&&e})(a.min,a.max,h));i.operations.push(a),i.indexes.push(b)});let g=p(this.container.url,E.item),h=[];return await Promise.all(f.filter(a=>a.operations.length).map(async a=>{if(a.operations.length>100)throw Error("Cannot run bulk request with more than 100 operations per partition");try{let d=await this.clientContext.bulk({body:a.operations,partitionKeyRangeId:a.rangeId,path:g,resourceId:this.container.url,bulkOptions:b,options:c});d.result.forEach((b,c)=>{h[a.indexes[c]]=b})}catch(e){if(410===e.code)throw Error("Partition key error. Either the partitions have split or an operation has an unsupported partitionKey type");throw Error(`Bulk request errored with: ${e.message}`)}})),h}async batch(a,b="[{}]",c){a.map(a=>(function(a,b={}){return a.operationType!==bI.Create&&a.operationType!==bI.Upsert|| void 0!==a.resourceBody.id&&""!==a.resourceBody.id||b.disableAutomaticIdGeneration||(a.resourceBody.id=bH()),a})(a,c));let d=p(this.container.url,E.item);if(a.length>100)throw Error("Cannot run batch request with more than 100 operations per partition");try{let e=await this.clientContext.batch({body:a,partitionKey:b,path:d,resourceId:this.container.url,options:c});return e}catch(f){throw Error(`Batch request error: ${f.message}`)}}}class b8 extends bq{constructor(a,b,c,d){super(a,b,c),this.storedProcedure=d}get sproc(){return this.storedProcedure}}class b9{constructor(a,b,c){this.container=a,this.id=b,this.clientContext=c}get url(){var a,b,c;return a=this.container.database.id,b=this.container.id,c=r(c=this.id),s(c),bo(a,b)+"/"+d.Path.StoredProceduresPathSegment+"/"+c}async read(a){let b=p(this.url),c=o(this.url),d=await this.clientContext.read({path:b,resourceType:E.sproc,resourceId:c,options:a});return new b8(d.result,d.headers,d.code,this)}async replace(a,b){a.body&&(a.body=a.body.toString());let c={};if(!m(a,c))throw c;let d=p(this.url),e=o(this.url),f=await this.clientContext.replace({body:a,path:d,resourceType:E.sproc,resourceId:e,options:b});return new b8(f.result,f.headers,f.code,this)}async delete(a){let b=p(this.url),c=o(this.url),d=await this.clientContext.delete({path:b,resourceType:E.sproc,resourceId:c,options:a});return new b8(d.result,d.headers,d.code,this)}async execute(a,b,c){if(void 0===a){let{resource:d}=await this.container.readPartitionKeyDefinition();a=bu(d)}let e=await this.clientContext.execute({sprocLink:this.url,params:b,options:c,partitionKey:a});return new bq(e.result,e.headers,e.code)}}class ca{constructor(a,b){this.container=a,this.clientContext=b}query(a,b){let c=p(this.container.url,E.sproc),d=o(this.container.url);return new bm(this.clientContext,a,b,b=>this.clientContext.queryFeed({path:c,resourceType:E.sproc,resourceId:d,resultFn:a=>a.StoredProcedures,query:a,options:b}))}readAll(a){return this.query(void 0,a)}async create(a,b){a.body&&(a.body=a.body.toString());let c={};if(!m(a,c))throw c;let d=p(this.container.url,E.sproc),e=o(this.container.url),f=await this.clientContext.create({body:a,path:d,resourceType:E.sproc,resourceId:e,options:b}),g=new b9(this.container,f.result.id,this.clientContext);return new b8(f.result,f.headers,f.code,g)}}class cb extends bq{constructor(a,b,c,d){super(a,b,c),this.trigger=d}}class cc{constructor(a,b,c){this.container=a,this.id=b,this.clientContext=c}get url(){var a,b,c;return a=this.container.database.id,b=this.container.id,c=r(c=this.id),s(c),bo(a,b)+"/"+d.Path.TriggersPathSegment+"/"+c}async read(a){let b=p(this.url),c=o(this.url),d=await this.clientContext.read({path:b,resourceType:E.trigger,resourceId:c,options:a});return new cb(d.result,d.headers,d.code,this)}async replace(a,b){a.body&&(a.body=a.body.toString());let c={};if(!m(a,c))throw c;let d=p(this.url),e=o(this.url),f=await this.clientContext.replace({body:a,path:d,resourceType:E.trigger,resourceId:e,options:b});return new cb(f.result,f.headers,f.code,this)}async delete(a){let b=p(this.url),c=o(this.url),d=await this.clientContext.delete({path:b,resourceType:E.trigger,resourceId:c,options:a});return new cb(d.result,d.headers,d.code,this)}}class cd{constructor(a,b){this.container=a,this.clientContext=b}query(a,b){let c=p(this.container.url,E.trigger),d=o(this.container.url);return new bm(this.clientContext,a,b,b=>this.clientContext.queryFeed({path:c,resourceType:E.trigger,resourceId:d,resultFn:a=>a.Triggers,query:a,options:b}))}readAll(a){return this.query(void 0,a)}async create(a,b){a.body&&(a.body=a.body.toString());let c={};if(!m(a,c))throw c;let d=p(this.container.url,E.trigger),e=o(this.container.url),f=await this.clientContext.create({body:a,path:d,resourceType:E.trigger,resourceId:e,options:b}),g=new cc(this.container,f.result.id,this.clientContext);return new cb(f.result,f.headers,f.code,g)}}class ce extends bq{constructor(a,b,c,d){super(a,b,c),this.userDefinedFunction=d}get udf(){return this.userDefinedFunction}}class cf{constructor(a,b,c){this.container=a,this.id=b,this.clientContext=c}get url(){var a,b,c;return a=this.container.database.id,b=this.container.id,c=r(c=this.id),s(c),bo(a,b)+"/"+d.Path.UserDefinedFunctionsPathSegment+"/"+c}async read(a){let b=p(this.url),c=o(this.url),d=await this.clientContext.read({path:b,resourceType:E.udf,resourceId:c,options:a});return new ce(d.result,d.headers,d.code,this)}async replace(a,b){a.body&&(a.body=a.body.toString());let c={};if(!m(a,c))throw c;let d=p(this.url),e=o(this.url),f=await this.clientContext.replace({body:a,path:d,resourceType:E.udf,resourceId:e,options:b});return new ce(f.result,f.headers,f.code,this)}async delete(a){let b=p(this.url),c=o(this.url),d=await this.clientContext.delete({path:b,resourceType:E.udf,resourceId:c,options:a});return new ce(d.result,d.headers,d.code,this)}}class cg{constructor(a,b){this.container=a,this.clientContext=b}query(a,b){let c=p(this.container.url,E.udf),d=o(this.container.url);return new bm(this.clientContext,a,b,b=>this.clientContext.queryFeed({path:c,resourceType:E.udf,resourceId:d,resultFn:a=>a.UserDefinedFunctions,query:a,options:b}))}readAll(a){return this.query(void 0,a)}async create(a,b){a.body&&(a.body=a.body.toString());let c={};if(!m(a,c))throw c;let d=p(this.container.url,E.udf),e=o(this.container.url),f=await this.clientContext.create({body:a,path:d,resourceType:E.udf,resourceId:e,options:b}),g=new cf(this.container,f.result.id,this.clientContext);return new ce(f.result,f.headers,f.code,g)}}class ch{constructor(a,b){this.container=a,this.clientContext=b}storedProcedure(a){return new b9(this.container,a,this.clientContext)}trigger(a){return new cc(this.container,a,this.clientContext)}userDefinedFunction(a){return new cf(this.container,a,this.clientContext)}get storedProcedures(){return this.$sprocs||(this.$sprocs=new ca(this.container,this.clientContext)),this.$sprocs}get triggers(){return this.$triggers||(this.$triggers=new cd(this.container,this.clientContext)),this.$triggers}get userDefinedFunctions(){return this.$udfs||(this.$udfs=new cg(this.container,this.clientContext)),this.$udfs}}class ci extends bq{constructor(a,b,c,d){super(a,b,c),this.container=d}}class cj extends bq{constructor(a,b,c,d){super(a,b,c),this.offer=d}}class ck{constructor(a,b,c){this.client=a,this.id=b,this.clientContext=c}get url(){return`/${d.Path.OffersPathSegment}/${this.id}`}async read(a){let b=await this.clientContext.read({path:this.url,resourceType:E.offer,resourceId:this.id,options:a});return new cj(b.result,b.headers,b.code,this)}async replace(a,b){let c={};if(!m(a,c))throw c;let d=await this.clientContext.replace({body:a,path:this.url,resourceType:E.offer,resourceId:this.id,options:b});return new cj(d.result,d.headers,d.code,this)}}class cl{constructor(a,b,c){this.database=a,this.id=b,this.clientContext=c}get items(){return this.$items||(this.$items=new b7(this,this.clientContext)),this.$items}get scripts(){return this.$scripts||(this.$scripts=new ch(this,this.clientContext)),this.$scripts}get conflicts(){return this.$conflicts||(this.$conflicts=new br(this,this.clientContext)),this.$conflicts}get url(){return bo(this.database.id,this.id)}item(a,b){return new bG(this,a,b,this.clientContext)}conflict(a,b){return new bv(this,a,this.clientContext,b)}async read(a){let b=p(this.url),c=o(this.url),d=await this.clientContext.read({path:b,resourceType:E.container,resourceId:c,options:a});return this.clientContext.partitionKeyDefinitionCache[this.url]=d.result.partitionKey,new ci(d.result,d.headers,d.code,this)}async replace(a,b){let c={};if(!m(a,c))throw c;let d=p(this.url),e=o(this.url),f=await this.clientContext.replace({body:a,path:d,resourceType:E.container,resourceId:e,options:b});return new ci(f.result,f.headers,f.code,this)}async delete(a){let b=p(this.url),c=o(this.url),d=await this.clientContext.delete({path:b,resourceType:E.container,resourceId:c,options:a});return new ci(d.result,d.headers,d.code,this)}async getPartitionKeyDefinition(){return this.readPartitionKeyDefinition()}async readPartitionKeyDefinition(){if(this.url in this.clientContext.partitionKeyDefinitionCache)return new bq(this.clientContext.partitionKeyDefinitionCache[this.url],{},0);let{headers:a,statusCode:b}=await this.read();return new bq(this.clientContext.partitionKeyDefinitionCache[this.url],a,b)}async readOffer(a={}){let{resource:b}=await this.read(),c=b._self,d=await this.clientContext.queryFeed({path:"/offers",resourceId:"",resourceType:E.offer,query:`SELECT * from root where root.resource = "${c}"`,resultFn:a=>a.Offers,options:a}),e=d.result[0]?new ck(this.database.client,d.result[0].id,this.clientContext):void 0;return new cj(d.result[0],d.headers,d.code,e)}async getQueryPlan(a){let b=p(this.url);return this.clientContext.getQueryPlan(b+"/docs",E.item,o(this.url),a)}readPartitionKeyRanges(a){return a=a||{},this.clientContext.queryPartitionKeyRanges(this.url,void 0,a)}}function cm(a){if(a.throughput){if(a.maxThroughput)throw console.log("should be erroring"),Error("Cannot specify `throughput` with `maxThroughput`");if(a.autoUpgradePolicy)throw Error("Cannot specify autoUpgradePolicy with throughput. Use `maxThroughput` instead")}}class cn extends bq{constructor(a,b,c,d){super(a,b,c),this.permission=d}}class co{constructor(a,b,c){this.user=a,this.id=b,this.clientContext=c}get url(){var a,b,c;return a=this.user.database.id,b=this.user.id,c=r(c=this.id),s(c),bp(a,b)+"/"+d.Path.PermissionsPathSegment+"/"+c}async read(a){let b=p(this.url),c=o(this.url),d=await this.clientContext.read({path:b,resourceType:E.permission,resourceId:c,options:a});return new cn(d.result,d.headers,d.code,this)}async replace(a,b){let c={};if(!m(a,c))throw c;let d=p(this.url),e=o(this.url),f=await this.clientContext.replace({body:a,path:d,resourceType:E.permission,resourceId:e,options:b});return new cn(f.result,f.headers,f.code,this)}async delete(a){let b=p(this.url),c=o(this.url),d=await this.clientContext.delete({path:b,resourceType:E.permission,resourceId:c,options:a});return new cn(d.result,d.headers,d.code,this)}}class cp extends bq{constructor(a,b,c,d){super(a,b,c),this.user=d}}class cq{constructor(a,b,c){this.database=a,this.id=b,this.clientContext=c,this.permissions=new class{constructor(a,b){this.user=a,this.clientContext=b}query(a,b){let c=p(this.user.url,E.permission),d=o(this.user.url);return new bm(this.clientContext,a,b,b=>this.clientContext.queryFeed({path:c,resourceType:E.permission,resourceId:d,resultFn:a=>a.Permissions,query:a,options:b}))}readAll(a){return this.query(void 0,a)}async create(a,b){let c={};if(!m(a,c))throw c;let d=p(this.user.url,E.permission),e=o(this.user.url),f=await this.clientContext.create({body:a,path:d,resourceType:E.permission,resourceId:e,options:b}),g=new co(this.user,f.result.id,this.clientContext);return new cn(f.result,f.headers,f.code,g)}async upsert(a,b){let c={};if(!m(a,c))throw c;let d=p(this.user.url,E.permission),e=o(this.user.url),f=await this.clientContext.upsert({body:a,path:d,resourceType:E.permission,resourceId:e,options:b}),g=new co(this.user,f.result.id,this.clientContext);return new cn(f.result,f.headers,f.code,g)}}(this,this.clientContext)}get url(){return bp(this.database.id,this.id)}permission(a){return new co(this,a,this.clientContext)}async read(a){let b=p(this.url),c=o(this.url),d=await this.clientContext.read({path:b,resourceType:E.user,resourceId:c,options:a});return new cp(d.result,d.headers,d.code,this)}async replace(a,b){let c={};if(!m(a,c))throw c;let d=p(this.url),e=o(this.url),f=await this.clientContext.replace({body:a,path:d,resourceType:E.user,resourceId:e,options:b});return new cp(f.result,f.headers,f.code,this)}async delete(a){let b=p(this.url),c=o(this.url),d=await this.clientContext.delete({path:b,resourceType:E.user,resourceId:c,options:a});return new cp(d.result,d.headers,d.code,this)}}class cr extends bq{constructor(a,b,c,d){super(a,b,c),this.database=d}}class cs{constructor(a,b,c){this.client=a,this.id=b,this.clientContext=c,this.containers=new class{constructor(a,b){this.database=a,this.clientContext=b}query(a,b){let c=p(this.database.url,E.container),d=o(this.database.url);return new bm(this.clientContext,a,b,b=>this.clientContext.queryFeed({path:c,resourceType:E.container,resourceId:d,resultFn:a=>a.DocumentCollections,query:a,options:b}))}async create(a,b={}){let c={};if(!m(a,c))throw c;let e=p(this.database.url,E.container),f=o(this.database.url);if(cm(a),a.maxThroughput){let g={maxThroughput:a.maxThroughput};a.autoUpgradePolicy&&(g.autoUpgradePolicy=a.autoUpgradePolicy);let h=JSON.stringify(g);b.initialHeaders=Object.assign({},b.initialHeaders,{[d.HttpHeaders.AutoscaleSettings]:h}),delete a.maxThroughput,delete a.autoUpgradePolicy}if(a.throughput&&(b.initialHeaders=Object.assign({},b.initialHeaders,{[d.HttpHeaders.OfferThroughput]:a.throughput}),delete a.throughput),"string"==typeof a.partitionKey){if(!a.partitionKey.startsWith("/"))throw Error("Partition key must start with '/'");a.partitionKey={paths:[a.partitionKey]}}a.partitionKey&&a.partitionKey.paths||(a.partitionKey={paths:["/_partitionKey"]});let i=await this.clientContext.create({body:a,path:e,resourceType:E.container,resourceId:f,options:b}),j=new cl(this.database,i.result.id,this.clientContext);return new ci(i.result,i.headers,i.code,j)}async createIfNotExists(a,b){if(!a||null===a.id|| void 0===a.id)throw Error("body parameter must be an object with an id property");try{let c=await this.database.container(a.id).read(b);return c}catch(d){if(d.code===u.NotFound){let e=await this.create(a,b);return aj(e.headers,d.headers),e}throw d}}readAll(a){return this.query(void 0,a)}}(this,this.clientContext),this.users=new class{constructor(a,b){this.database=a,this.clientContext=b}query(a,b){let c=p(this.database.url,E.user),d=o(this.database.url);return new bm(this.clientContext,a,b,b=>this.clientContext.queryFeed({path:c,resourceType:E.user,resourceId:d,resultFn:a=>a.Users,query:a,options:b}))}readAll(a){return this.query(void 0,a)}async create(a,b){let c={};if(!m(a,c))throw c;let d=p(this.database.url,E.user),e=o(this.database.url),f=await this.clientContext.create({body:a,path:d,resourceType:E.user,resourceId:e,options:b}),g=new cq(this.database,f.result.id,this.clientContext);return new cp(f.result,f.headers,f.code,g)}async upsert(a,b){let c={};if(!m(a,c))throw c;let d=p(this.database.url,E.user),e=o(this.database.url),f=await this.clientContext.upsert({body:a,path:d,resourceType:E.user,resourceId:e,options:b}),g=new cq(this.database,f.result.id,this.clientContext);return new cp(f.result,f.headers,f.code,g)}}(this,this.clientContext)}get url(){return bn(this.id)}container(a){return new cl(this,a,this.clientContext)}user(a){return new cq(this,a,this.clientContext)}async read(a){let b=p(this.url),c=o(this.url),d=await this.clientContext.read({path:b,resourceType:E.database,resourceId:c,options:a});return new cr(d.result,d.headers,d.code,this)}async delete(a){let b=p(this.url),c=o(this.url),d=await this.clientContext.delete({path:b,resourceType:E.database,resourceId:c,options:a});return new cr(d.result,d.headers,d.code,this)}async readOffer(a={}){let{resource:b}=await this.read(),c=b._self,d=await this.clientContext.queryFeed({path:"/offers",resourceId:"",resourceType:E.offer,query:`SELECT * from root where root.resource = "${c}"`,resultFn:a=>a.Offers,options:a}),e=d.result[0]?new ck(this.client,d.result[0].id,this.clientContext):void 0;return new cj(d.result[0],d.headers,d.code,e)}}let ct=new Set(["Deserialize","Serialize","Retry","Sign"]);class cu{constructor(a=[]){this._policies=[],this._policies=a,this._orderedPolicies=void 0}addPolicy(a,b={}){if(b.phase&&b.afterPhase)throw Error("Policies inside a phase cannot specify afterPhase.");if(b.phase&&!ct.has(b.phase))throw Error(`Invalid phase name: ${b.phase}`);if(b.afterPhase&&!ct.has(b.afterPhase))throw Error(`Invalid afterPhase name: ${b.afterPhase}`);this._policies.push({policy:a,options:b}),this._orderedPolicies=void 0}removePolicy(a){let b=[];return this._policies=this._policies.filter(c=>(!a.name||c.policy.name!==a.name)&&(!a.phase||c.options.phase!==a.phase)||(b.push(c.policy),!1)),this._orderedPolicies=void 0,b}sendRequest(a,b){let c=this.getOrderedPolicies(),d=c.reduceRight((a,b)=>c=>b.sendRequest(c,a),b=>a.sendRequest(b));return d(b)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new cu(this._policies)}static create(){return new cu}orderPolicies(){let a=[],b=new Map;function c(a){return{name:a,policies:new Set,hasRun:!1}}let d=c("Serialize"),e=c("None"),f=c("Deserialize"),g=c("Retry"),h=c("Sign"),i=[d,e,f,g,h];function j(a){return"Retry"===a?g:"Serialize"===a?d:"Deserialize"===a?f:"Sign"===a?h:e}for(let k of this._policies){let l=k.policy,m=k.options,n=l.name;if(b.has(n))throw Error("Duplicate policy names not allowed in pipeline");let o={policy:l,dependsOn:new Set,dependants:new Set};m.afterPhase&&(o.afterPhase=j(m.afterPhase)),b.set(n,o);let p=j(m.phase);p.policies.add(o)}for(let q of this._policies){let{policy:r,options:s}=q,t=r.name,u=b.get(t);if(!u)throw Error(`Missing node for policy ${t}`);if(s.afterPolicies)for(let v of s.afterPolicies){let w=b.get(v);w&&(u.dependsOn.add(w),w.dependants.add(u))}if(s.beforePolicies)for(let x of s.beforePolicies){let y=b.get(x);y&&(y.dependsOn.add(u),u.dependants.add(y))}}function z(c){for(let d of(c.hasRun=!0,c.policies))if((!d.afterPhase||d.afterPhase.hasRun&&!d.afterPhase.policies.size)&&0===d.dependsOn.size){for(let e of(a.push(d.policy),d.dependants))e.dependsOn.delete(d);b.delete(d.policy.name),c.policies.delete(d)}}function A(){for(let a of i)if(z(a),a.policies.size>0&&a!==e){e.hasRun||z(e);return}}let B=0;for(;b.size>0;){B++;let C=a.length;if(A(),a.length<=C&&B>1)throw Error("Cannot satisfy policy dependencies due to requirements cycle.")}return a}}class cv extends Error{constructor(a){super(a),this.name="AbortError"}}let cw="The operation was aborted.";function cx(a,b,c){return new Promise((d,e)=>{let f,g,h=()=>e(new cv((null==c?void 0:c.abortErrorMsg)?null==c?void 0:c.abortErrorMsg:cw)),i=()=>{(null==c?void 0:c.abortSignal)&&g&&c.abortSignal.removeEventListener("abort",g)};if(g=()=>(f&&clearTimeout(f),i(),h()),(null==c?void 0:c.abortSignal)&&c.abortSignal.aborted)return h();f=setTimeout(()=>{i(),d(b)},a),(null==c?void 0:c.abortSignal)&&c.abortSignal.addEventListener("abort",g)})}let cy={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};async function cz(a,b,c){async function d(){if(Date.now()<c)try{return await a()}catch(b){return null}else{let d=await a();if(null===d)throw Error("Failed to refresh access token.");return d}}let e=await d();for(;null===e;)await cx(b),e=await d();return e}let cA=aI("core-rest-pipeline");async function cB(a){let{scopes:b,getAccessToken:c,request:d}=a,e={abortSignal:d.abortSignal,tracingOptions:d.tracingOptions},f=await c(b,e);f&&a.request.headers.set("Authorization",`Bearer ${f.token}`)}(dx=P||(P={})).Strong="Strong",dx.BoundedStaleness="BoundedStaleness",dx.Session="Session",dx.Eventual="Eventual",dx.ConsistentPrefix="ConsistentPrefix";class cC{constructor(a,b){this.writableLocations=[],this.readableLocations=[],this.databasesLink="/dbs/",this.mediaLink="/media/",this.maxMediaStorageUsageInMB=b[d.HttpHeaders.MaxMediaStorageUsageInMB],this.currentMediaStorageUsageInMB=b[d.HttpHeaders.CurrentMediaStorageUsageInMB],this.consistencyPolicy=a.userConsistencyPolicy?a.userConsistencyPolicy.defaultConsistencyLevel:P.Session,a[d.WritableLocations]&&"localhost"!==a.id&&(this.writableLocations=a[d.WritableLocations]),a[d.ReadableLocations]&&"localhost"!==a.id&&(this.readableLocations=a[d.ReadableLocations]),a[d.ENABLE_MULTIPLE_WRITABLE_LOCATIONS]&&(this.enableMultipleWritableLocations=!0===a[d.ENABLE_MULTIPLE_WRITABLE_LOCATIONS]||"true"===a[d.ENABLE_MULTIPLE_WRITABLE_LOCATIONS])}get DatabasesLink(){return this.databasesLink}get MediaLink(){return this.mediaLink}get MaxMediaStorageUsageInMB(){return this.maxMediaStorageUsageInMB}get CurrentMediaStorageUsageInMB(){return this.currentMediaStorageUsageInMB}get ConsistencyPolicy(){return this.consistencyPolicy}}async function cD(a,b,c){if(!a.plugins)return b(a,void 0);let d=0,e=f=>++d>=f.plugins.length?b(a,void 0):f.plugins[d].on!==c?e(a):f.plugins[d].plugin(f,e);return a.plugins[d].on!==c?e(a):a.plugins[d].plugin(a,e)}(dy=Q||(Q={})).request="request",dy.operation="operation";let cE,cF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",cG=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;var cH="function"!=typeof atob?a=>{if(a=String(a).replace(/[\t\n\f\r ]+/g,""),!cG.test(a))throw TypeError("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");a+="==".slice(2-(3&a.length));let b,c="",d,e,f=0;for(;f<a.length;)b=cF.indexOf(a.charAt(f++))<<18|cF.indexOf(a.charAt(f++))<<12|(d=cF.indexOf(a.charAt(f++)))<<6|(e=cF.indexOf(a.charAt(f++))),c+=64===d?String.fromCharCode(b>>16&255):64===e?String.fromCharCode(b>>16&255,b>>8&255):String.fromCharCode(b>>16&255,b>>8&255,255&b);return c}:atob;async function cI(a,b){let c={name:"HMAC",hash:{name:"SHA-256"}},d=new Uint8Array([...unescape(encodeURIComponent(b))].map(a=>a.charCodeAt(0))),e=aQ(cH(a)),f=await aS.subtle.importKey("raw",e,c,!1,["sign",]),g=await aS.subtle.sign(c,f,d);return function(a){if("function"!=typeof btoa)throw Error("Your browser environment is missing the global `btoa` function");let b="",c=new Uint8Array(a),d=c.byteLength;for(let e=0;e<d;e++)b+=String.fromCharCode(c[e]);return btoa(b)}(g)}async function cJ(a,b,c=E.none,e="",f=new Date){if(a.startsWith("type=sas&"))return{[d.HttpHeaders.Authorization]:encodeURIComponent(a),[d.HttpHeaders.XDate]:f.toUTCString()};let g=await cK(a,b,c,e,f);return{[d.HttpHeaders.Authorization]:g,[d.HttpHeaders.XDate]:f.toUTCString()}}async function cK(a,b,c,d="",e=new Date){let f=b.toLowerCase()+"\n"+c.toLowerCase()+"\n"+d+"\n"+e.toUTCString().toLowerCase()+"\n\n",g=await cI(a,f);return encodeURIComponent("type=master&ver=1.0&sig="+g)}async function cL(a,b,c,e,f,g){if(a.permissionFeed)for(let h of(a.resourceTokens={},a.permissionFeed)){let i=t(h.resource);if(!i)throw Error(`authorization error: ${i} \
                          is an invalid resourceId in permissionFeed`);a.resourceTokens[i]=h._token}a.key?await cM(b,e,f,g,a.key):a.resourceTokens?g[d.HttpHeaders.Authorization]=encodeURIComponent(cN(a.resourceTokens,c,e)):a.tokenProvider&&(g[d.HttpHeaders.Authorization]=encodeURIComponent(await a.tokenProvider({verb:b,path:c,resourceId:e,resourceType:f,headers:g})))}async function cM(a,b,c,d,e){c===E.offer&&(b=b&&b.toLowerCase()),d=Object.assign(d,await cJ(e,a,c,b))}function cN(a,b,c){if(a&&Object.keys(a).length>0){if(!b&&!c)return a[Object.keys(a)[0]];if(c&&a[c])return a[c];if(!b||b.length<4)return null;b=r(b);let d=b&&b.split("/")||[];if(6===d.length){let e=d.slice(0,4).map(decodeURIComponent).join("/");if(a[e])return a[e]}let f=d.length%2==0?d.length-1:d.length-2;for(;f>0;f-=2){let g=decodeURI(d[f]);if(a[g])return a[g]}}return null}function cO(a){if("object"==typeof a){var b;return JSON.stringify(b=a).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}return a}let cP="application/json";async function cQ({clientOptions:a,defaultHeaders:b,verb:c,path:e,resourceId:f,resourceType:g,options:h={},partitionKeyRangeId:i,useMultipleWriteLocations:j,partitionKey:k}){let l=Object.assign({[d.HttpHeaders.ResponseContinuationTokenLimitInKB]:1,[d.HttpHeaders.EnableCrossPartitionQuery]:!0},b);if(j&&(l[d.HttpHeaders.ALLOW_MULTIPLE_WRITES]=!0),h.continuationTokenLimitInKB&&(l[d.HttpHeaders.ResponseContinuationTokenLimitInKB]=h.continuationTokenLimitInKB),h.continuationToken?l[d.HttpHeaders.Continuation]=h.continuationToken:h.continuation&&(l[d.HttpHeaders.Continuation]=h.continuation),h.preTriggerInclude&&(l[d.HttpHeaders.PreTriggerInclude]=h.preTriggerInclude.constructor===Array?h.preTriggerInclude.join(","):h.preTriggerInclude),h.postTriggerInclude&&(l[d.HttpHeaders.PostTriggerInclude]=h.postTriggerInclude.constructor===Array?h.postTriggerInclude.join(","):h.postTriggerInclude),h.offerType&&(l[d.HttpHeaders.OfferType]=h.offerType),h.offerThroughput&&(l[d.HttpHeaders.OfferThroughput]=h.offerThroughput),h.maxItemCount&&(l[d.HttpHeaders.PageSize]=h.maxItemCount),h.accessCondition&&("IfMatch"===h.accessCondition.type?l[d.HttpHeaders.IfMatch]=h.accessCondition.condition:l[d.HttpHeaders.IfNoneMatch]=h.accessCondition.condition),h.useIncrementalFeed&&(l[d.HttpHeaders.A_IM]="Incremental Feed"),h.indexingDirective&&(l[d.HttpHeaders.IndexingDirective]=h.indexingDirective),h.consistencyLevel&&(l[d.HttpHeaders.ConsistencyLevel]=h.consistencyLevel),h.maxIntegratedCacheStalenessInMs&&g===E.item&&(l[d.HttpHeaders.DedicatedGatewayPerRequestCacheStaleness]=h.maxIntegratedCacheStalenessInMs),h.resourceTokenExpirySeconds&&(l[d.HttpHeaders.ResourceTokenExpiry]=h.resourceTokenExpirySeconds),h.sessionToken&&(l[d.HttpHeaders.SessionToken]=h.sessionToken),h.enableScanInQuery&&(l[d.HttpHeaders.EnableScanInQuery]=h.enableScanInQuery),h.populateQuotaInfo&&(l[d.HttpHeaders.PopulateQuotaInfo]=h.populateQuotaInfo),h.populateQueryMetrics&&(l[d.HttpHeaders.PopulateQueryMetrics]=h.populateQueryMetrics),void 0!==h.maxDegreeOfParallelism&&(l[d.HttpHeaders.ParallelizeCrossPartitionQuery]=!0),h.populateQuotaInfo&&(l[d.HttpHeaders.PopulateQuotaInfo]=!0),void 0!==k&&!l[d.HttpHeaders.PartitionKey]){var m;null!==k&&Array.isArray(k)||(k=[k]),l[d.HttpHeaders.PartitionKey]=JSON.stringify(m=k).replace(/[\u007F-\uFFFF]/g,a=>"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4))}return(a.key||a.tokenProvider)&&(l[d.HttpHeaders.XDate]=new Date().toUTCString()),c!==F.post&&c!==F.put||l[d.HttpHeaders.ContentType]||(l[d.HttpHeaders.ContentType]=cP),l[d.HttpHeaders.Accept]||(l[d.HttpHeaders.Accept]=cP),void 0!==i&&(l[d.HttpHeaders.PartitionKeyRangeID]=i),h.enableScriptLogging&&(l[d.HttpHeaders.EnableScriptLogging]=h.enableScriptLogging),h.disableRUPerMinuteUsage&&(l[d.HttpHeaders.DisableRUPerMinuteUsage]=!0),(a.key||a.resourceTokens||a.tokenProvider||a.permissionFeed)&&await cL(a,c,e,f,g,l),l}var cR=c(8779);function cS(a){return a.toLowerCase()}class cT{constructor(a){if(this._headersMap=new Map,a)for(let b of Object.keys(a))this.set(b,a[b])}set(a,b){this._headersMap.set(cS(a),{name:a,value:String(b)})}get(a){var b;return null===(b=this._headersMap.get(cS(a)))|| void 0===b?void 0:b.value}has(a){return this._headersMap.has(cS(a))}delete(a){this._headersMap.delete(cS(a))}toJSON(a={}){let b={};if(a.preserveCase)for(let c of this._headersMap.values())b[c.name]=c.value;else for(let[d,e]of this._headersMap)b[d]=e.value;return b}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return function*(a){for(let b of a.values())yield[b.name,b.value]}(this._headersMap)}}function cU(a){return new cT(a)}class cV{constructor(a){var b,c,d,e,f,g,h;this.url=a.url,this.body=a.body,this.headers=null!==(b=a.headers)&& void 0!==b?b:cU(),this.method=null!==(c=a.method)&& void 0!==c?c:"GET",this.timeout=null!==(d=a.timeout)&& void 0!==d?d:0,this.formData=a.formData,this.disableKeepAlive=null!==(e=a.disableKeepAlive)&& void 0!==e&&e,this.proxySettings=a.proxySettings,this.streamResponseStatusCodes=a.streamResponseStatusCodes,this.withCredentials=null!==(f=a.withCredentials)&& void 0!==f&&f,this.abortSignal=a.abortSignal,this.tracingOptions=a.tracingOptions,this.onUploadProgress=a.onUploadProgress,this.onDownloadProgress=a.onDownloadProgress,this.requestId=a.requestId||bC(),this.allowInsecureConnection=null!==(g=a.allowInsecureConnection)&& void 0!==g&&g,this.enableBrowserStreams=null!==(h=a.enableBrowserStreams)&& void 0!==h&&h}}let cW="TimeoutError";class cX extends Error{constructor(a){super(a),this.code=cW,this.name=cW}}let cY=[10004,10009,10013,10014,10022,10035,10036,10048,10054,10058,10060,10061,10063,10064,10065,"ECONNRESET",cW,"EPIPE",];class cZ{constructor(a){this.operationType=a,this.maxTries=10,this.currentRetryAttemptCount=0,this.retryAfterInMs=1e3}async shouldRetry(a){if(a){var b,c;if(this.currentRetryAttemptCount<this.maxTries&&(b=this.operationType,c=a.code,(b===G.Read||b===G.Query)&& -1!==cY.indexOf(c)))return this.currentRetryAttemptCount++,!0}return!1}}class c${constructor(a,b){this.globalEndpointManager=a,this.operationType=b,this.maxTries=c$.maxTries,this.currentRetryAttemptCount=0,this.retryAfterInMs=c$.retryAfterInMs}async shouldRetry(a,b,c){return!!a&&!!b&&!!c&&!!this.globalEndpointManager.enableEndpointDiscovery&&!(this.currentRetryAttemptCount>=this.maxTries)&&(this.currentRetryAttemptCount++,j(this.operationType)?await this.globalEndpointManager.markCurrentLocationUnavailableForRead(c):await this.globalEndpointManager.markCurrentLocationUnavailableForWrite(c),b.retryCount=this.currentRetryAttemptCount,b.clearSessionTokenNotAvailable=!1,b.retryRequestOnPreferredLocations=!1,!0)}}c$.maxTries=120,c$.retryAfterInMs=1e3;class c_{constructor(a=9,b=0,c=30){this.maxTries=a,this.fixedRetryIntervalInMs=b,this.currentRetryAttemptCount=0,this.cummulativeWaitTimeinMs=0,this.retryAfterInMs=0,this.timeoutInMs=1e3*c,this.currentRetryAttemptCount=0,this.cummulativeWaitTimeinMs=0}async shouldRetry(a){return!!a&&this.currentRetryAttemptCount<this.maxTries&&(this.currentRetryAttemptCount++,this.retryAfterInMs=0,this.fixedRetryIntervalInMs?this.retryAfterInMs=this.fixedRetryIntervalInMs:a.retryAfterInMs&&(this.retryAfterInMs=a.retryAfterInMs),this.cummulativeWaitTimeinMs<this.timeoutInMs)&&(this.cummulativeWaitTimeinMs+=this.retryAfterInMs,!0)}}class c0{constructor(a,b,c,d){this.globalEndpointManager=a,this.resourceType=b,this.operationType=c,this.connectionPolicy=d,this.currentRetryAttemptCount=0,this.retryAfterInMs=0}async shouldRetry(a,b){if(!a||!b||!this.connectionPolicy.enableEndpointDiscovery)return!1;if(this.globalEndpointManager.canUseMultipleWriteLocations(this.resourceType,this.operationType)){let c=j(this.operationType)?await this.globalEndpointManager.getReadEndpoints():await this.globalEndpointManager.getWriteEndpoints();return!(this.currentRetryAttemptCount>c.length)&&(this.currentRetryAttemptCount++,b.retryCount++,b.retryRequestOnPreferredLocations=this.currentRetryAttemptCount>1,b.clearSessionTokenNotAvailable=this.currentRetryAttemptCount===c.length,!0)}return!(this.currentRetryAttemptCount>1)&&(this.currentRetryAttemptCount++,b.retryCount++,b.retryRequestOnPreferredLocations=!1,b.clearSessionTokenNotAvailable=!0,!0)}}async function c1({retryContext:a={retryCount:0},retryPolicies:b,requestContext:c,executeRequest:e}){b||(b={endpointDiscoveryRetryPolicy:new c$(c.globalEndpointManager,c.operationType),resourceThrottleRetryPolicy:new c_(c.connectionPolicy.retryOptions.maxRetryAttemptCount,c.connectionPolicy.retryOptions.fixedRetryIntervalInMilliseconds,c.connectionPolicy.retryOptions.maxWaitTimeInSeconds),sessionReadRetryPolicy:new c0(c.globalEndpointManager,c.resourceType,c.operationType,c.connectionPolicy),defaultRetryPolicy:new cZ(c.operationType)}),a&&a.clearSessionTokenNotAvailable&&(c.client.clearSessionToken(c.path),delete c.headers["x-ms-session-token"]),c.endpoint=await c.globalEndpointManager.resolveServiceEndpoint(c.resourceType,c.operationType);try{let f=await e(c);return f.headers[d.ThrottleRetryCount]=b.resourceThrottleRetryPolicy.currentRetryAttemptCount,f.headers[d.ThrottleRetryWaitTimeInMs]=b.resourceThrottleRetryPolicy.cummulativeWaitTimeinMs,f}catch(g){let h=null,i=g.headers||{};h=g.code===u.ENOTFOUND||"REQUEST_SEND_ERROR"===g.code||g.code===u.Forbidden&&(g.substatus===v.DatabaseAccountNotFound||g.substatus===v.WriteForbidden)?b.endpointDiscoveryRetryPolicy:g.code===u.TooManyRequests?b.resourceThrottleRetryPolicy:g.code===u.NotFound&&g.substatus===v.ReadSessionNotAvailable?b.sessionReadRetryPolicy:b.defaultRetryPolicy;let j=await h.shouldRetry(g,a,c.endpoint);if(j){var k;c.retryCount++;let l=j[1];return void 0!==l&&(c.endpoint=l),await (k=h.retryAfterInMs,new Promise(a=>{setTimeout(()=>{a()},k)})),c1({executeRequest:e,requestContext:c,retryContext:a,retryPolicies:b})}throw i[d.ThrottleRetryCount]=b.resourceThrottleRetryPolicy.currentRetryAttemptCount,i[d.ThrottleRetryWaitTimeInMs]=b.resourceThrottleRetryPolicy.cummulativeWaitTimeinMs,g.headers=Object.assign(Object.assign({},g.headers),i),g}}let c2,c3,c4="REDACTED",c5=new class{constructor({additionalAllowedHeaderNames:a=[],additionalAllowedQueryParameters:b=[]}={}){a=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate",].concat(a),b=["api-version"].concat(b),this.allowedHeaderNames=new Set(a.map(a=>a.toLowerCase())),this.allowedQueryParameters=new Set(b.map(a=>a.toLowerCase()))}sanitize(a){let b=new Set;return JSON.stringify(a,(a,c)=>{var d;if(c instanceof Error)return Object.assign(Object.assign({},c),{name:c.name,message:c.message});if("headers"===a)return this.sanitizeHeaders(c);if("url"===a)return this.sanitizeUrl(c);if("query"===a)return this.sanitizeQuery(c);if("body"!==a&&"response"!==a&&"operationSpec"!==a){if(Array.isArray(c)||"object"==typeof(d=c)&&null!==d&&!Array.isArray(d)&&!(d instanceof RegExp)&&!(d instanceof Date)){if(b.has(c))return"[Circular]";b.add(c)}return c}},2)}sanitizeHeaders(a){let b={};for(let c of Object.keys(a))this.allowedHeaderNames.has(c.toLowerCase())?b[c]=a[c]:b[c]=c4;return b}sanitizeQuery(a){if("object"!=typeof a||null===a)return a;let b={};for(let c of Object.keys(a))this.allowedQueryParameters.has(c.toLowerCase())?b[c]=a[c]:b[c]=c4;return b}sanitizeUrl(a){if("string"!=typeof a||null===a)return a;let b=new URL(a);if(!b.search)return a;for(let[c]of b.searchParams)this.allowedQueryParameters.has(c.toLowerCase())||b.searchParams.set(c,c4);return b.toString()}};class c6 extends Error{constructor(a,b={}){super(a),this.name="RestError",this.code=b.code,this.statusCode=b.statusCode,this.request=b.request,this.response=b.response,Object.setPrototypeOf(this,c6.prototype)}[{}](){return`RestError: ${this.message} 
 ${c5.sanitize(this)}`}}function c7(a){return Boolean(a&&"function"==typeof a.getReader&&"function"==typeof a.tee)}c6.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",c6.PARSE_ERROR="PARSE_ERROR";class c8{async sendRequest(a){let b=new URL(a.url),c="https:"!==b.protocol;if(c&&!a.allowInsecureConnection)throw Error(`Cannot connect to ${a.url} while allowInsecureConnection is false.`);if(a.proxySettings)throw Error("HTTP proxy is not supported in browser environment");try{return await c9(a)}catch(d){throw dc(d,a)}}}async function c9(a){let{abortController:b,abortControllerCleanup:c}=db(a);try{let d=dd(a.headers),e=df(a),f=await fetch(a.url,{body:e,method:a.method,headers:d,signal:b.signal,credentials:a.withCredentials?"include":"same-origin",cache:"no-store"});return da(f,a)}finally{c&&c()}}async function da(a,b){var c,d;let e=de(a),f={request:b,headers:e,status:a.status},g=c7(a.body)?dg(a.body,b.onDownloadProgress):a.body;if((null===(c=b.streamResponseStatusCodes)|| void 0===c?void 0:c.has(Number.POSITIVE_INFINITY))||(null===(d=b.streamResponseStatusCodes)|| void 0===d?void 0:d.has(f.status))){if(b.enableBrowserStreams)f.browserStreamBody=null!=g?g:void 0;else{let h=new Response(g);f.blobBody=h.blob()}}else{let i=new Response(g);f.bodyAsText=await i.text()}return f}function db(a){let b=new AbortController,c,d;if(a.abortSignal){if(a.abortSignal.aborted)throw new cv("The operation was aborted.");d=a=>{"abort"===a.type&&b.abort()},a.abortSignal.addEventListener("abort",d),c=()=>{var b;d&&(null===(b=a.abortSignal)|| void 0===b||b.removeEventListener("abort",d))}}return a.timeout>0&&setTimeout(()=>{b.abort()},a.timeout),{abortController:b,abortControllerCleanup:c}}function dc(a,b){var c;return a&&(null==a?void 0:a.name)==="AbortError"?a:new c6(`Error sending request: ${a.message}`,{code:null!==(c=null==a?void 0:a.code)&& void 0!==c?c:c6.REQUEST_SEND_ERROR,request:b})}function dd(a){let b=new Headers;for(let[c,d]of a)b.append(c,d);return b}function de(a){let b=cU();for(let[c,d]of a.headers)b.set(c,d);return b}function df(a){var b;let c="function"==typeof a.body?a.body():a.body;if((b=c)&&"function"==typeof b.pipe)throw Error("Node streams are not supported in browser environment.");return c7(c)?dg(c,a.onUploadProgress):c}function dg(a,b){let c=0;if(dh(a))return a.pipeThrough(new TransformStream({transform(a,d){if(null===a){d.terminate();return}d.enqueue(a),c+=a.length,b&&b({loadedBytes:c})}}));{let d=a.getReader();return new ReadableStream({async pull(a){var e;let{done:f,value:g}=await d.read();if(f||!g){a.close(),d.releaseLock();return}c+=null!==(e=null==g?void 0:g.length)&& void 0!==e?e:0,a.enqueue(g),b&&b({loadedBytes:c})}})}}function dh(a){return void 0!==a.pipeThrough&& void 0!==self.TransformStream}let di,dj=aI("RequestHandler");async function dk(a){return cD(a,dl,Q.request)}async function dl(a){var b;let c=new cR.H,e=c.signal,f=a.options&&a.options.abortSignal;f&&(f.aborted?c.abort():f.addEventListener("abort",()=>{c.abort()}));let g=setTimeout(()=>{c.abort()},a.connectionPolicy.requestTimeout),h;a.body&&(a.body=cO(a.body));let i=(di||(di=new c8),di),j=l(a.endpoint)+a.path,k=cU(a.headers),m=(b={url:j,headers:k,method:a.method,abortSignal:e,body:a.body},new cV(b));if(a.requestAgent)m.agent=a.requestAgent;else{let n=new URL(j);m.agent="http"===n.protocol?c2:c3}try{h=a.pipeline?await a.pipeline.sendRequest(i,m):await i.sendRequest(m)}catch(o){if("AbortError"===o.name){if(f&& !0===f.aborted)throw clearTimeout(g),o;throw new cX}throw o}clearTimeout(g);let p=204===h.status||304===h.status?null:JSON.parse(h.bodyAsText),q=h.headers.toJSON(),r=q[d.HttpHeaders.SubStatus]?parseInt(q[d.HttpHeaders.SubStatus],10):void 0;if(h.status>=400){let s=Error(p.message);throw dj.warning(h.status+" "+a.endpoint+" "+a.path+" "+p.message),s.code=h.status,s.body=p,s.headers=q,d.HttpHeaders.ActivityId in q&&(s.activityId=q[d.HttpHeaders.ActivityId]),d.HttpHeaders.SubStatus in q&&(s.substatus=r),d.HttpHeaders.RetryAfterInMs in q&&(s.retryAfterInMs=parseInt(q[d.HttpHeaders.RetryAfterInMs],10),Object.defineProperty(s,"retryAfterInMilliseconds",{get:()=>s.retryAfterInMs})),s}return{headers:q,result:p,code:h.status,substatus:r}}async function dm(a){if(a.body&&(a.body=cO(a.body),!a.body))throw Error("parameter data must be a javascript object, string, or Buffer");return c1({requestContext:a,executeRequest:dk})}class dn{constructor(a,b,c,d){if(this.version=a,this.globalLsn=b,this.localLsnByregion=c,this.sessionToken=d,!this.sessionToken){let e=[];for(let[f,g]of this.localLsnByregion.entries())e.push(`${f}${dn.REGION_PROGRESS_SEPARATOR}${g}`);let h=e.join(dn.SEGMENT_SEPARATOR);""===h?this.sessionToken=`${this.version}${dn.SEGMENT_SEPARATOR}${this.globalLsn}`:this.sessionToken=`${this.version}${dn.SEGMENT_SEPARATOR}${this.globalLsn}${dn.SEGMENT_SEPARATOR}${h}`}}static create(a){let[b,c,...d]=a.split(dn.SEGMENT_SEPARATOR),e=parseInt(b,10),f=parseFloat(c);if("number"!=typeof e||"number"!=typeof f)return null;let g=new Map;for(let h of d){let[i,j]=h.split(dn.REGION_PROGRESS_SEPARATOR);if(!i||!j)return null;let k=parseInt(i,10),l;try{l=j}catch(m){return null}if("number"!=typeof k)return null;g.set(k,l)}return new dn(e,f,g,a)}equals(a){return!!a&&this.version===a.version&&this.globalLsn===a.globalLsn&&this.areRegionProgressEqual(a.localLsnByregion)}merge(a){if(null==a)throw Error("other (Vector Session Token) must not be null");if(this.version===a.version&&this.localLsnByregion.size!==a.localLsnByregion.size)throw Error(`Compared session tokens ${this.sessionToken} and ${a.sessionToken} have unexpected regions`);let[b,c]=this.version<a.version?[a,this]:[this,a],d=new Map;for(let[e,f]of b.localLsnByregion.entries()){let g=c.localLsnByregion.get(e);if(g)d.set(e,dp(f,g));else if(this.version===a.version)throw Error(`Compared session tokens have unexpected regions. Session 1: ${this.sessionToken} - Session 2: ${this.sessionToken}`);else d.set(e,f)}return new dn(Math.max(this.version,a.version),Math.max(this.globalLsn,a.globalLsn),d)}toString(){return this.sessionToken}areRegionProgressEqual(a){if(this.localLsnByregion.size!==a.size)return!1;for(let[b,c]of this.localLsnByregion.entries()){let d=a.get(b);if(c!==d)return!1}return!0}}function dp(a,b){return a.length===b.length?a>b?a:b:a.length>b.length?a:b}dn.SEGMENT_SEPARATOR="#",dn.REGION_PROGRESS_SEPARATOR="=";class dq{constructor(a=new Map,b=new Map){this.collectionNameToCollectionResourceId=a,this.collectionResourceIdToSessionTokens=b}get(a){if(!a)throw Error("request cannot be null");let b=k(l(a.resourceAddress)),c=this.getPartitionKeyRangeIdToTokenMap(b);return dq.getCombinedSessionTokenString(c)}remove(a){let b,c=l(a.resourceAddress),d=k(c);d&&(b=this.collectionNameToCollectionResourceId.get(d),this.collectionNameToCollectionResourceId.delete(d)),void 0!==b&&this.collectionResourceIdToSessionTokens.delete(b)}set(a,b){if(!b||dq.isReadingFromMaster(a.resourceType,a.operationType))return;let c=b[d.HttpHeaders.SessionToken];if(!c)return;let e=this.getContainerName(a,b),f=a.isNameBased&&b[d.HttpHeaders.OwnerId]||a.resourceId;if(f&&e&&this.validateOwnerID(f)){this.collectionResourceIdToSessionTokens.has(f)||this.collectionResourceIdToSessionTokens.set(f,new Map),this.collectionNameToCollectionResourceId.has(e)||this.collectionNameToCollectionResourceId.set(e,f);let g=this.collectionResourceIdToSessionTokens.get(f);dq.compareAndSetToken(c,g)}}validateOwnerID(a){return 8===cH(a.replace(/-/g,"/")).length}getPartitionKeyRangeIdToTokenMap(a){let b=null;return a&&this.collectionNameToCollectionResourceId.has(a)&&(b=this.collectionResourceIdToSessionTokens.get(this.collectionNameToCollectionResourceId.get(a))),b}static getCombinedSessionTokenString(a){if(!a||0===a.size)return dq.EMPTY_SESSION_TOKEN;let b="";for(let[c,d]of a.entries())b+=c+dq.SESSION_TOKEN_PARTITION_SPLITTER+d.toString()+dq.SESSION_TOKEN_SEPARATOR;return b.slice(0,-1)}static compareAndSetToken(a,b){if(!a)return;let c=a.split(dq.SESSION_TOKEN_SEPARATOR);for(let d of c){let e=d.split(dq.SESSION_TOKEN_PARTITION_SPLITTER);if(2!==e.length)return;let f=e[0],g=dn.create(e[1]),h=b.get(f)?b.get(f).merge(g):g;b.set(f,h)}}static isReadingFromMaster(a,b){return a===d.Path.OffersPathSegment||a===d.Path.DatabasesPathSegment||a===d.Path.UsersPathSegment||a===d.Path.PermissionsPathSegment||a===d.Path.TopologyPathSegment||a===d.Path.DatabaseAccountPathSegment||a===d.Path.PartitionKeyRangesPathSegment||a===d.Path.CollectionsPathSegment&&b===G.Query}getContainerName(a,b){let c=b[d.HttpHeaders.OwnerFullName];return c||(c=l(a.resourceAddress)),k(c)}}dq.EMPTY_SESSION_TOKEN="",dq.SESSION_TOKEN_SEPARATOR=",",dq.SESSION_TOKEN_PARTITION_SPLITTER=":";let dr=bC,ds=aI("ClientContext"),dt="application/query+json";var du,dv,dw,dx,dy,dz,dA=c(3454);(dz=R||(R={}))[dz.Gateway=0]="Gateway";let dB=Object.freeze({connectionMode:R.Gateway,requestTimeout:6e4,enableEndpointDiscovery:!0,preferredLocations:[],retryOptions:{maxRetryAttemptCount:9,fixedRetryIntervalInMilliseconds:0,maxWaitTimeInSeconds:30},useMultipleWriteLocations:!0,endpointRefreshRateInMs:3e5,enableBackgroundEndpointRefreshing:!0});class dC{constructor(a,b){this.readDatabaseAccount=b,this.writeableLocations=[],this.readableLocations=[],this.options=a,this.defaultEndpoint=a.endpoint,this.enableEndpointDiscovery=a.connectionPolicy.enableEndpointDiscovery,this.isRefreshing=!1,this.preferredLocations=this.options.connectionPolicy.preferredLocations}async getReadEndpoint(){return this.resolveServiceEndpoint(E.item,G.Read)}async getWriteEndpoint(){return this.resolveServiceEndpoint(E.item,G.Replace)}async getReadEndpoints(){return this.readableLocations.map(a=>a.databaseAccountEndpoint)}async getWriteEndpoints(){return this.writeableLocations.map(a=>a.databaseAccountEndpoint)}async markCurrentLocationUnavailableForRead(a){await this.refreshEndpointList();let b=this.readableLocations.find(b=>b.databaseAccountEndpoint===a);b&&(b.unavailable=!0)}async markCurrentLocationUnavailableForWrite(a){await this.refreshEndpointList();let b=this.writeableLocations.find(b=>b.databaseAccountEndpoint===a);b&&(b.unavailable=!0)}canUseMultipleWriteLocations(a,b){let c=this.options.connectionPolicy.useMultipleWriteLocations;return a&&(c=c&&(a===E.item||a===E.sproc&&b===G.Execute)),c}async resolveServiceEndpoint(a,b){if(!this.options.connectionPolicy.enableEndpointDiscovery||a===E.none)return this.defaultEndpoint;if(0===this.readableLocations.length||0===this.writeableLocations.length){let{resource:c}=await this.readDatabaseAccount({urlConnection:this.defaultEndpoint});this.writeableLocations=c.writableLocations,this.readableLocations=c.readableLocations}let d=j(b)?this.readableLocations:this.writeableLocations,e;if(this.preferredLocations&&this.preferredLocations.length>0){for(let f of this.preferredLocations)if(e=d.find(a=>!0!==a.unavailable&&dD(a.name)===dD(f)))break}return e||(e=d.find(a=>!0!==a.unavailable)),e?e.databaseAccountEndpoint:this.defaultEndpoint}async refreshEndpointList(){if(!this.isRefreshing&&this.enableEndpointDiscovery){this.isRefreshing=!0;let a=await this.getDatabaseAccountFromAnyEndpoint();a&&this.refreshEndpoints(a),this.isRefreshing=!1}}refreshEndpoints(a){for(let b of a.writableLocations){let c=this.writeableLocations.find(a=>a.name===b.name);c||this.writeableLocations.push(b)}for(let d of a.writableLocations){let e=this.readableLocations.find(a=>a.name===d.name);e||this.readableLocations.push(d)}}async getDatabaseAccountFromAnyEndpoint(){try{let a={urlConnection:this.defaultEndpoint},{resource:b}=await this.readDatabaseAccount(a);return b}catch(c){}if(this.preferredLocations)for(let d of this.preferredLocations)try{let e=dC.getLocationalEndpoint(this.defaultEndpoint,d),f={urlConnection:e},{resource:g}=await this.readDatabaseAccount(f);if(g)return g}catch(h){}}static getLocationalEndpoint(a,b){let c=new URL(a);if(c.hostname){let d=c.hostname.toString().toLowerCase().split(".");if(d){let e=d[0],f=e+"-"+b.replace(" ",""),g=a.toLowerCase().replace(e,f);return g}}return null}}function dD(a){return a.split(" ").join("").toLowerCase()}class dE{constructor(a){var b,c,e;"string"==typeof a&&(a=function(a){let b=a.split(";"),{AccountEndpoint:c,AccountKey:d}=b.reduce((a,b)=>{let[c,...d]=b.split("=");return a[c]=d.join("="),a},{});if(!c||!d)throw Error("Could not parse the provided connection string");return{endpoint:c,key:d}}(a));let f=(e=a.endpoint,new URL(e));if(!f)throw Error("Invalid endpoint specified");a.connectionPolicy=Object.assign({},dB,a.connectionPolicy),a.defaultHeaders=a.defaultHeaders||{},a.defaultHeaders[d.HttpHeaders.CacheControl]="no-cache",a.defaultHeaders[d.HttpHeaders.Version]=d.CurrentVersion,void 0!==a.consistencyLevel&&(a.defaultHeaders[d.HttpHeaders.ConsistencyLevel]=a.consistencyLevel),a.defaultHeaders[d.HttpHeaders.UserAgent]=function(a){let b=`${"object"==typeof navigator&&"userAgent"in navigator?navigator.userAgent:"object"==typeof dA&&"version"in dA?`Node.js/${dA.version.substr(1)} (${dA.platform}; ${dA.arch})`:"<environment undetectable>"} ${d.SDKName}/${d.SDKVersion}`;return a?b+" "+a:b}(a.userAgentSuffix);let g=new dC(a,async a=>this.getDatabaseAccount(a));this.clientContext=new class{constructor(a,b){if(this.cosmosClientOptions=a,this.globalEndpointManager=b,this.connectionPolicy=a.connectionPolicy,this.sessionContainer=new dq,this.partitionKeyDefinitionCache={},this.pipeline=null,a.aadCredentials){var c;this.pipeline=cu.create();let d=(c=a.endpoint,new URL(c).href.replace(/\/$/,"")),e=`${d}/.default`;this.pipeline.addPolicy(function(a){var b;let{credential:c,scopes:d,challengeCallbacks:e}=a,f=a.logger||cA,g=Object.assign({authorizeRequest:null!==(b=null==e?void 0:e.authorizeRequest)&& void 0!==b?b:cB,authorizeRequestOnChallenge:null==e?void 0:e.authorizeRequestOnChallenge},e),h=c?function(a,b){let c=null,d=null,e,f=Object.assign(Object.assign({},cy),void 0),g={get isRefreshing(){return null!==c},get shouldRefresh(){var h;return!g.isRefreshing&&(null!==(h=null==d?void 0:d.expiresOnTimestamp)&& void 0!==h?h:0)-f.refreshWindowInMs<Date.now()},get mustRefresh(){return null===d||d.expiresOnTimestamp-f.forcedRefreshWindowInMs<Date.now()}};function i(b,h){var i;if(!g.isRefreshing){let j=()=>a.getToken(b,h);c=cz(j,f.retryIntervalInMs,null!==(i=null==d?void 0:d.expiresOnTimestamp)&& void 0!==i?i:Date.now()).then(a=>(c=null,d=a,e=h.tenantId,d)).catch(a=>{throw c=null,d=null,e=void 0,a})}return c}return async(a,b)=>{let c=e!==b.tenantId||Boolean(b.claims)||g.mustRefresh;return c?i(a,b):(g.shouldRefresh&&i(a,b),d)}}(c):()=>Promise.resolve(null);return{name:"bearerTokenAuthenticationPolicy",async sendRequest(a,b){if(!a.url.toLowerCase().startsWith("https://"))throw Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await g.authorizeRequest({scopes:Array.isArray(d)?d:[d],request:a,getAccessToken:h,logger:f});let c,e;try{c=await b(a)}catch(i){e=i,c=i.response}if(g.authorizeRequestOnChallenge&&(null==c?void 0:c.status)===401&&function(a){let b=a.headers.get("WWW-Authenticate");if(401===a.status&&b)return b}(c)){let j=await g.authorizeRequestOnChallenge({scopes:Array.isArray(d)?d:[d],request:a,response:c,getAccessToken:h,logger:f});if(j)return b(a)}if(!e)return c;throw e}}}({credential:a.aadCredentials,scopes:e,challengeCallbacks:{async authorizeRequest({request:a,getAccessToken:b}){let c=await b([e],{}),d="type=aad&ver=1.0&sig=",f=`${d}${c.token}`;a.headers.set("Authorization",f)}}}))}}async read({path:a,resourceType:b,resourceId:c,options:d={},partitionKey:e}){try{let f={globalEndpointManager:this.globalEndpointManager,requestAgent:this.cosmosClientOptions.agent,connectionPolicy:this.connectionPolicy,method:F.get,path:a,operationType:G.Read,client:this,resourceId:c,options:d,resourceType:b,plugins:this.cosmosClientOptions.plugins,partitionKey:e,pipeline:this.pipeline};f.headers=await this.buildHeaders(f),this.applySessionToken(f),f.endpoint=await this.globalEndpointManager.resolveServiceEndpoint(f.resourceType,f.operationType);let g=await cD(f,dm,Q.operation);return this.captureSessionToken(void 0,a,G.Read,g.headers),g}catch(h){throw this.captureSessionToken(h,a,G.Upsert,h.headers),h}}async queryFeed({path:a,resourceType:b,resourceId:c,resultFn:e,query:f,options:g,partitionKeyRangeId:h,partitionKey:i}){let j={globalEndpointManager:this.globalEndpointManager,requestAgent:this.cosmosClientOptions.agent,connectionPolicy:this.connectionPolicy,method:F.get,path:a,operationType:G.Query,client:this,partitionKeyRangeId:h,resourceId:c,resourceType:b,options:g,body:f,plugins:this.cosmosClientOptions.plugins,partitionKey:i,pipeline:this.pipeline},k=dr();void 0!==f&&(j.method=F.post),j.endpoint=await this.globalEndpointManager.resolveServiceEndpoint(j.resourceType,j.operationType),j.headers=await this.buildHeaders(j),void 0!==f&&(j.headers[d.HttpHeaders.IsQuery]="true",j.headers[d.HttpHeaders.ContentType]=dt,"string"==typeof f&&(j.body={query:f})),this.applySessionToken(j),ds.info("query "+k+" started"+(j.partitionKeyRangeId?" pkrid: "+j.partitionKeyRangeId:"")),ds.verbose(j);let l=Date.now(),m=await dm(j);return ds.info("query "+k+" finished - "+(Date.now()-l)+"ms"),this.captureSessionToken(void 0,a,G.Query,m.headers),this.processQueryFeedResponse(m,!!f,e)}async getQueryPlan(a,b,c,e,f={}){let g={globalEndpointManager:this.globalEndpointManager,requestAgent:this.cosmosClientOptions.agent,connectionPolicy:this.connectionPolicy,method:F.post,path:a,operationType:G.Read,client:this,resourceId:c,resourceType:b,options:f,body:e,plugins:this.cosmosClientOptions.plugins,pipeline:this.pipeline};g.endpoint=await this.globalEndpointManager.resolveServiceEndpoint(g.resourceType,g.operationType),g.headers=await this.buildHeaders(g),g.headers[d.HttpHeaders.IsQueryPlan]="True",g.headers[d.HttpHeaders.QueryVersion]="1.4",g.headers[d.HttpHeaders.SupportedQueryFeatures]="NonValueAggregate, Aggregate, Distinct, MultipleOrderBy, OffsetAndLimit, OrderBy, Top, CompositeAggregate, GroupBy, MultipleAggregates",g.headers[d.HttpHeaders.ContentType]=dt,"string"==typeof e&&(g.body={query:e}),this.applySessionToken(g);let h=await dm(g);return this.captureSessionToken(void 0,a,G.Query,h.headers),h}queryPartitionKeyRanges(a,b,c){let d=p(a,E.pkranges),e=o(a),f=a=>this.queryFeed({path:d,resourceType:E.pkranges,resourceId:e,resultFn:a=>a.PartitionKeyRanges,query:b,options:a});return new bm(this,b,c,f)}async delete({path:a,resourceType:b,resourceId:c,options:d={},partitionKey:e}){try{let f={globalEndpointManager:this.globalEndpointManager,requestAgent:this.cosmosClientOptions.agent,connectionPolicy:this.connectionPolicy,method:F.delete,client:this,operationType:G.Delete,path:a,resourceType:b,options:d,resourceId:c,plugins:this.cosmosClientOptions.plugins,partitionKey:e,pipeline:this.pipeline};f.headers=await this.buildHeaders(f),this.applySessionToken(f),f.endpoint=await this.globalEndpointManager.resolveServiceEndpoint(f.resourceType,f.operationType);let g=await cD(f,dm,Q.operation);return"colls"!==i(a).type?this.captureSessionToken(void 0,a,G.Delete,g.headers):this.clearSessionToken(a),g}catch(h){throw this.captureSessionToken(h,a,G.Upsert,h.headers),h}}async patch({body:a,path:b,resourceType:c,resourceId:d,options:e={},partitionKey:f}){try{let g={globalEndpointManager:this.globalEndpointManager,requestAgent:this.cosmosClientOptions.agent,connectionPolicy:this.connectionPolicy,method:F.patch,client:this,operationType:G.Patch,path:b,resourceType:c,body:a,resourceId:d,options:e,plugins:this.cosmosClientOptions.plugins,partitionKey:f};g.headers=await this.buildHeaders(g),this.applySessionToken(g),g.endpoint=await this.globalEndpointManager.resolveServiceEndpoint(g.resourceType,g.operationType);let h=await cD(g,dm,Q.operation);return this.captureSessionToken(void 0,b,G.Patch,h.headers),h}catch(i){throw this.captureSessionToken(i,b,G.Upsert,i.headers),i}}async create({body:a,path:b,resourceType:c,resourceId:d,options:e={},partitionKey:f}){try{let g={globalEndpointManager:this.globalEndpointManager,requestAgent:this.cosmosClientOptions.agent,connectionPolicy:this.connectionPolicy,method:F.post,client:this,operationType:G.Create,path:b,resourceType:c,resourceId:d,body:a,options:e,plugins:this.cosmosClientOptions.plugins,partitionKey:f,pipeline:this.pipeline};g.headers=await this.buildHeaders(g),this.applySessionToken(g),g.endpoint=await this.globalEndpointManager.resolveServiceEndpoint(g.resourceType,g.operationType);let h=await cD(g,dm,Q.operation);return this.captureSessionToken(void 0,b,G.Create,h.headers),h}catch(i){throw this.captureSessionToken(i,b,G.Upsert,i.headers),i}}processQueryFeedResponse(a,b,c){if(b)return{result:c(a.result),headers:a.headers,code:a.code};{let d=c(a.result).map(a=>a);return{result:d,headers:a.headers,code:a.code}}}applySessionToken(a){let b=this.getSessionParams(a.path);if(a.headers&&a.headers[d.HttpHeaders.SessionToken])return;let c=a.headers[d.HttpHeaders.ConsistencyLevel];if(c&&c===P.Session&&b.resourceAddress){let e=this.sessionContainer.get(b);e&&(a.headers[d.HttpHeaders.SessionToken]=e)}}async replace({body:a,path:b,resourceType:c,resourceId:d,options:e={},partitionKey:f}){try{let g={globalEndpointManager:this.globalEndpointManager,requestAgent:this.cosmosClientOptions.agent,connectionPolicy:this.connectionPolicy,method:F.put,client:this,operationType:G.Replace,path:b,resourceType:c,body:a,resourceId:d,options:e,plugins:this.cosmosClientOptions.plugins,partitionKey:f,pipeline:this.pipeline};g.headers=await this.buildHeaders(g),this.applySessionToken(g),g.endpoint=await this.globalEndpointManager.resolveServiceEndpoint(g.resourceType,g.operationType);let h=await cD(g,dm,Q.operation);return this.captureSessionToken(void 0,b,G.Replace,h.headers),h}catch(i){throw this.captureSessionToken(i,b,G.Upsert,i.headers),i}}async upsert({body:a,path:b,resourceType:c,resourceId:e,options:f={},partitionKey:g}){try{let h={globalEndpointManager:this.globalEndpointManager,requestAgent:this.cosmosClientOptions.agent,connectionPolicy:this.connectionPolicy,method:F.post,client:this,operationType:G.Upsert,path:b,resourceType:c,body:a,resourceId:e,options:f,plugins:this.cosmosClientOptions.plugins,partitionKey:g,pipeline:this.pipeline};h.headers=await this.buildHeaders(h),h.headers[d.HttpHeaders.IsUpsert]=!0,this.applySessionToken(h),h.endpoint=await this.globalEndpointManager.resolveServiceEndpoint(h.resourceType,h.operationType);let i=await cD(h,dm,Q.operation);return this.captureSessionToken(void 0,b,G.Upsert,i.headers),i}catch(j){throw this.captureSessionToken(j,b,G.Upsert,j.headers),j}}async execute({sprocLink:a,params:b,options:c={},partitionKey:d}){null==b||Array.isArray(b)||(b=[b]);let e=p(a),f=o(a),g={globalEndpointManager:this.globalEndpointManager,requestAgent:this.cosmosClientOptions.agent,connectionPolicy:this.connectionPolicy,method:F.post,client:this,operationType:G.Execute,path:e,resourceType:E.sproc,options:c,resourceId:f,body:b,plugins:this.cosmosClientOptions.plugins,partitionKey:d,pipeline:this.pipeline};return g.headers=await this.buildHeaders(g),g.endpoint=await this.globalEndpointManager.resolveServiceEndpoint(g.resourceType,g.operationType),cD(g,dm,Q.operation)}async getDatabaseAccount(a={}){let b=a.urlConnection||this.cosmosClientOptions.endpoint,c={endpoint:b,globalEndpointManager:this.globalEndpointManager,requestAgent:this.cosmosClientOptions.agent,connectionPolicy:this.connectionPolicy,method:F.get,client:this,operationType:G.Read,path:"",resourceType:E.none,options:a,plugins:this.cosmosClientOptions.plugins,pipeline:this.pipeline};c.headers=await this.buildHeaders(c);let{result:d,headers:e}=await cD(c,dm,Q.operation),f=new cC(d,e);return{result:f,headers:e}}getWriteEndpoint(){return this.globalEndpointManager.getWriteEndpoint()}getReadEndpoint(){return this.globalEndpointManager.getReadEndpoint()}getWriteEndpoints(){return this.globalEndpointManager.getWriteEndpoints()}getReadEndpoints(){return this.globalEndpointManager.getReadEndpoints()}async batch({body:a,path:b,partitionKey:c,resourceId:e,options:f={}}){try{let g={globalEndpointManager:this.globalEndpointManager,requestAgent:this.cosmosClientOptions.agent,connectionPolicy:this.connectionPolicy,method:F.post,client:this,operationType:G.Batch,path:b,body:a,resourceType:E.item,resourceId:e,plugins:this.cosmosClientOptions.plugins,options:f,pipeline:this.pipeline,partitionKey:c};g.headers=await this.buildHeaders(g),g.headers[d.HttpHeaders.IsBatchRequest]=!0,g.headers[d.HttpHeaders.IsBatchAtomic]=!0,this.applySessionToken(g),g.endpoint=await this.globalEndpointManager.resolveServiceEndpoint(g.resourceType,g.operationType);let h=await cD(g,dm,Q.operation);return this.captureSessionToken(void 0,b,G.Batch,h.headers),h}catch(i){throw this.captureSessionToken(i,b,G.Upsert,i.headers),i}}async bulk({body:a,path:b,partitionKeyRangeId:c,resourceId:e,bulkOptions:f={},options:g={}}){try{let h={globalEndpointManager:this.globalEndpointManager,requestAgent:this.cosmosClientOptions.agent,connectionPolicy:this.connectionPolicy,method:F.post,client:this,operationType:G.Batch,path:b,body:a,resourceType:E.item,resourceId:e,plugins:this.cosmosClientOptions.plugins,options:g,pipeline:this.pipeline};h.headers=await this.buildHeaders(h),h.headers[d.HttpHeaders.IsBatchRequest]=!0,h.headers[d.HttpHeaders.PartitionKeyRangeID]=c,h.headers[d.HttpHeaders.IsBatchAtomic]=!1,h.headers[d.HttpHeaders.BatchContinueOnError]=f.continueOnError||!1,this.applySessionToken(h),h.endpoint=await this.globalEndpointManager.resolveServiceEndpoint(h.resourceType,h.operationType);let i=await cD(h,dm,Q.operation);return this.captureSessionToken(void 0,b,G.Batch,i.headers),i}catch(j){throw this.captureSessionToken(j,b,G.Upsert,j.headers),j}}captureSessionToken(a,b,c,d){let e=this.getSessionParams(b);e.operationType=c,a&&(this.isMasterResource(e.resourceType)||a.code!==u.PreconditionFailed&&a.code!==u.Conflict&&(a.code!==u.NotFound||a.substatus===v.ReadSessionNotAvailable))||this.sessionContainer.set(e,d)}clearSessionToken(a){let b=this.getSessionParams(a);this.sessionContainer.remove(b)}getSessionParams(a){let b=null,c=i(a);b=c.objectBody.self;let d=c.type;return{resourceId:null,resourceAddress:b,resourceType:d,isNameBased:!0}}isMasterResource(a){return a===d.Path.OffersPathSegment||a===d.Path.DatabasesPathSegment||a===d.Path.UsersPathSegment||a===d.Path.PermissionsPathSegment||a===d.Path.TopologyPathSegment||a===d.Path.DatabaseAccountPathSegment||a===d.Path.PartitionKeyRangesPathSegment||a===d.Path.CollectionsPathSegment}buildHeaders(a){return cQ({clientOptions:this.cosmosClientOptions,defaultHeaders:Object.assign(Object.assign({},this.cosmosClientOptions.defaultHeaders),a.options.initialHeaders),verb:a.method,path:a.path,resourceId:a.resourceId,resourceType:a.resourceType,options:a.options,partitionKeyRangeId:a.partitionKeyRangeId,useMultipleWriteLocations:this.connectionPolicy.useMultipleWriteLocations,partitionKey:a.partitionKey})}}(a,g),(null===(b=a.connectionPolicy)|| void 0===b?void 0:b.enableEndpointDiscovery)&&(null===(c=a.connectionPolicy)|| void 0===c?void 0:c.enableBackgroundEndpointRefreshing)&&this.backgroundRefreshEndpointList(g,a.connectionPolicy.endpointRefreshRateInMs||dB.endpointRefreshRateInMs),this.databases=new class{constructor(a,b){this.client=a,this.clientContext=b}query(a,b){let c=b=>this.clientContext.queryFeed({path:"/dbs",resourceType:E.database,resourceId:"",resultFn:a=>a.Databases,query:a,options:b});return new bm(this.clientContext,a,b,c)}async create(a,b={}){let c={};if(!m(a,c))throw c;if(cm(a),a.maxThroughput){let e={maxThroughput:a.maxThroughput};a.autoUpgradePolicy&&(e.autoUpgradePolicy=a.autoUpgradePolicy);let f=JSON.stringify(e);b.initialHeaders=Object.assign({},b.initialHeaders,{[d.HttpHeaders.AutoscaleSettings]:f}),delete a.maxThroughput,delete a.autoUpgradePolicy}a.throughput&&(b.initialHeaders=Object.assign({},b.initialHeaders,{[d.HttpHeaders.OfferThroughput]:a.throughput}),delete a.throughput);let g=await this.clientContext.create({body:a,path:"/dbs",resourceType:E.database,resourceId:void 0,options:b}),h=new cs(this.client,a.id,this.clientContext);return new cr(g.result,g.headers,g.code,h)}async createIfNotExists(a,b){if(!a||null===a.id|| void 0===a.id)throw Error("body parameter must be an object with an id property");try{let c=await this.client.database(a.id).read(b);return c}catch(d){if(d.code===u.NotFound){let e=await this.create(a,b);return aj(e.headers,d.headers),e}throw d}}readAll(a){return this.query(void 0,a)}}(this,this.clientContext),this.offers=new class{constructor(a,b){this.client=a,this.clientContext=b}query(a,b){return new bm(this.clientContext,a,b,b=>this.clientContext.queryFeed({path:"/offers",resourceType:E.offer,resourceId:"",resultFn:a=>a.Offers,query:a,options:b}))}readAll(a){return this.query(void 0,a)}}(this,this.clientContext)}async getDatabaseAccount(a){let b=await this.clientContext.getDatabaseAccount(a);return new bq(b.result,b.headers,b.code)}getWriteEndpoint(){return this.clientContext.getWriteEndpoint()}getReadEndpoint(){return this.clientContext.getReadEndpoint()}getWriteEndpoints(){return this.clientContext.getWriteEndpoints()}getReadEndpoints(){return this.clientContext.getReadEndpoints()}database(a){return new cs(this,a,this.clientContext)}offer(a){return new ck(this,a,this.clientContext)}dispose(){clearTimeout(this.endpointRefresher)}async backgroundRefreshEndpointList(a,b){this.endpointRefresher=setInterval(()=>{try{a.refreshEndpointList()}catch(b){console.warn("Failed to refresh endpoints",b)}},b),this.endpointRefresher.unref&&"function"==typeof this.endpointRefresher.unref&&this.endpointRefresher.unref()}}},5035:function(a){"use strict";a.exports=function(a,b){b||(b={}),"function"==typeof b&&(b={cmp:b});var c,d="boolean"==typeof b.cycles&&b.cycles,e=b.cmp&&(c=b.cmp,function(a){return function(b,d){var e={key:b,value:a[b]},f={key:d,value:a[d]};return c(e,f)}}),f=[];return function a(b){if(b&&b.toJSON&&"function"==typeof b.toJSON&&(b=b.toJSON()),void 0!==b){if("number"==typeof b)return isFinite(b)?""+b:"null";if("object"!=typeof b)return JSON.stringify(b);if(Array.isArray(b)){for(c=0,g="[";c<b.length;c++)c&&(g+=","),g+=a(b[c])||"null";return g+"]"}if(null===b)return"null";if(-1!==f.indexOf(b)){if(d)return JSON.stringify("__cycle__");throw TypeError("Converting circular structure to JSON")}var c,g,h=f.push(b)-1,i=Object.keys(b).sort(e&&e(b));for(c=0,g="";c<i.length;c++){var j=i[c],k=a(b[j]);k&&(g&&(g+=","),g+=JSON.stringify(j)+":"+k)}return f.splice(h,1),"{"+g+"}"}}(a)}},9499:function(a){!function(b,c){a.exports=c()}(this,function(){"use strict";var a=Math.clz32,b=Math.abs,c=Math.max,d=Math.floor;class e extends Array{constructor(a,b){if(super(a),this.sign=b,a>e.__kMaxLength)throw RangeError("Maximum BigInt size exceeded")}static BigInt(a){var b=Number.isFinite;if("number"==typeof a){if(0===a)return e.__zero();if(e.__isOneDigitInt(a))return 0>a?e.__oneDigit(-a,!0):e.__oneDigit(a,!1);if(!b(a)||d(a)!==a)throw RangeError("The number "+a+" cannot be converted to BigInt because it is not an integer");return e.__fromDouble(a)}if("string"==typeof a){let c=e.__fromString(a);if(null===c)throw SyntaxError("Cannot convert "+a+" to a BigInt");return c}if("boolean"==typeof a)return!0===a?e.__oneDigit(1,!1):e.__zero();if("object"==typeof a){if(a.constructor===e)return a;let f=e.__toPrimitive(a);return e.BigInt(f)}throw TypeError("Cannot convert "+a+" to a BigInt")}toDebugString(){let a=["BigInt["];for(let b of this)a.push((b?(b>>>0).toString(16):b)+", ");return a.push("]"),a.join("")}toString(a=10){if(2>a||36<a)throw RangeError("toString() radix argument must be between 2 and 36");return 0===this.length?"0":0==(a&a-1)?e.__toStringBasePowerOfTwo(this,a):e.__toStringGeneric(this,a,!1)}static toNumber(a){let b=a.length;if(0===b)return 0;if(1===b){let c=a.__unsignedDigit(0);return a.sign?-c:c}let d=a.__digit(b-1),f=e.__clz30(d),g=30*b-f;if(1024<g)return a.sign?-1/0:1/0;let h=g-1,i=d,j=b-1,k=f+3,l=32===k?0:i<<k;l>>>=12;let m=k-12,n=12<=k?0:i<<20+k,o=20+k;for(0<m&&0<j&&(j--,i=a.__digit(j),l|=i>>>30-m,n=i<<m+2,o=m+2);0<o&&0<j;)j--,i=a.__digit(j),n|=30<=o?i<<o-30:i>>>30-o,o-=30;let p=e.__decideRounding(a,o,j,i);if((1===p||0===p&&1==(1&n))&&0==(n=n+1>>>0)&&0!= ++l>>>20&&(l=0,1023< ++h))return a.sign?-1/0:1/0;let q=a.sign?-2147483648:0;return h=h+1023<<20,e.__kBitConversionInts[1]=q|h|l,e.__kBitConversionInts[0]=n,e.__kBitConversionDouble[0]}static unaryMinus(a){if(0===a.length)return a;let b=a.__copy();return b.sign=!a.sign,b}static bitwiseNot(a){return a.sign?e.__absoluteSubOne(a).__trim():e.__absoluteAddOne(a,!0)}static exponentiate(a,b){if(b.sign)throw RangeError("Exponent must be positive");if(0===b.length)return e.__oneDigit(1,!1);if(0===a.length)return a;if(1===a.length&&1===a.__digit(0))return a.sign&&0==(1&b.__digit(0))?e.unaryMinus(a):a;if(1<b.length)throw RangeError("BigInt too big");let c=b.__unsignedDigit(0);if(1===c)return a;if(c>=e.__kMaxLengthBits)throw RangeError("BigInt too big");if(1===a.length&&2===a.__digit(0)){let d=1+(0|c/30),f=a.sign&&0!=(1&c),g=new e(d,f);g.__initializeDigits();let h=1<<c%30;return g.__setDigit(d-1,h),g}let i=null,j=a;for(0!=(1&c)&&(i=a),c>>=1;0!==c;c>>=1)j=e.multiply(j,j),0!=(1&c)&&(i=null===i?j:e.multiply(i,j));return i}static multiply(a,b){if(0===a.length)return a;if(0===b.length)return b;let c=a.length+b.length;30<=a.__clzmsd()+b.__clzmsd()&&c--;let d=new e(c,a.sign!==b.sign);d.__initializeDigits();for(let f=0;f<a.length;f++)e.__multiplyAccumulate(b,a.__digit(f),d,f);return d.__trim()}static divide(a,b){if(0===b.length)throw RangeError("Division by zero");if(0>e.__absoluteCompare(a,b))return e.__zero();let c=a.sign!==b.sign,d=b.__unsignedDigit(0),f;if(1===b.length&&32767>=d){if(1===d)return c===a.sign?a:e.unaryMinus(a);f=e.__absoluteDivSmall(a,d,null)}else f=e.__absoluteDivLarge(a,b,!0,!1);return f.sign=c,f.__trim()}static remainder(a,b){if(0===b.length)throw RangeError("Division by zero");if(0>e.__absoluteCompare(a,b))return a;let c=b.__unsignedDigit(0);if(1===b.length&&32767>=c){if(1===c)return e.__zero();let d=e.__absoluteModSmall(a,c);return 0===d?e.__zero():e.__oneDigit(d,a.sign)}let f=e.__absoluteDivLarge(a,b,!1,!0);return f.sign=a.sign,f.__trim()}static add(a,b){let c=a.sign;return c===b.sign?e.__absoluteAdd(a,b,c):0<=e.__absoluteCompare(a,b)?e.__absoluteSub(a,b,c):e.__absoluteSub(b,a,!c)}static subtract(a,b){let c=a.sign;return c===b.sign?0<=e.__absoluteCompare(a,b)?e.__absoluteSub(a,b,c):e.__absoluteSub(b,a,!c):e.__absoluteAdd(a,b,c)}static leftShift(a,b){return 0===b.length||0===a.length?a:b.sign?e.__rightShiftByAbsolute(a,b):e.__leftShiftByAbsolute(a,b)}static signedRightShift(a,b){return 0===b.length||0===a.length?a:b.sign?e.__leftShiftByAbsolute(a,b):e.__rightShiftByAbsolute(a,b)}static unsignedRightShift(){throw TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(a,b){return 0>e.__compareToBigInt(a,b)}static lessThanOrEqual(a,b){return 0>=e.__compareToBigInt(a,b)}static greaterThan(a,b){return 0<e.__compareToBigInt(a,b)}static greaterThanOrEqual(a,b){return 0<=e.__compareToBigInt(a,b)}static equal(a,b){if(a.sign!==b.sign||a.length!==b.length)return!1;for(let c=0;c<a.length;c++)if(a.__digit(c)!==b.__digit(c))return!1;return!0}static notEqual(a,b){return!e.equal(a,b)}static bitwiseAnd(a,b){if(!a.sign&&!b.sign)return e.__absoluteAnd(a,b).__trim();if(a.sign&&b.sign){let d=c(a.length,b.length)+1,f=e.__absoluteSubOne(a,d),g=e.__absoluteSubOne(b);return f=e.__absoluteOr(f,g,f),e.__absoluteAddOne(f,!0,f).__trim()}return a.sign&&([a,b]=[b,a]),e.__absoluteAndNot(a,e.__absoluteSubOne(b)).__trim()}static bitwiseXor(a,b){if(!a.sign&&!b.sign)return e.__absoluteXor(a,b).__trim();if(a.sign&&b.sign){let d=c(a.length,b.length),f=e.__absoluteSubOne(a,d),g=e.__absoluteSubOne(b);return e.__absoluteXor(f,g,f).__trim()}let h=c(a.length,b.length)+1;a.sign&&([a,b]=[b,a]);let i=e.__absoluteSubOne(b,h);return i=e.__absoluteXor(i,a,i),e.__absoluteAddOne(i,!0,i).__trim()}static bitwiseOr(a,b){let d=c(a.length,b.length);if(!a.sign&&!b.sign)return e.__absoluteOr(a,b).__trim();if(a.sign&&b.sign){let f=e.__absoluteSubOne(a,d),g=e.__absoluteSubOne(b);return f=e.__absoluteAnd(f,g,f),e.__absoluteAddOne(f,!0,f).__trim()}a.sign&&([a,b]=[b,a]);let h=e.__absoluteSubOne(b,d);return h=e.__absoluteAndNot(h,a,h),e.__absoluteAddOne(h,!0,h).__trim()}static asIntN(a,b){if(0===b.length)return b;if(0>(a=d(a)))throw RangeError("Invalid value: not (convertible to) a safe integer");if(0===a)return e.__zero();if(a>=e.__kMaxLengthBits)return b;let c=0|(a+29)/30;if(b.length<c)return b;let f=b.__unsignedDigit(c-1),g=1<<(a-1)%30;if(b.length===c&&f<g)return b;if((f&g)!==g)return e.__truncateToNBits(a,b);if(!b.sign)return e.__truncateAndSubFromPowerOfTwo(a,b,!0);if(0==(f&g-1)){for(let h=c-2;0<=h;h--)if(0!==b.__digit(h))return e.__truncateAndSubFromPowerOfTwo(a,b,!1);return b.length===c&&f===g?b:e.__truncateToNBits(a,b)}return e.__truncateAndSubFromPowerOfTwo(a,b,!1)}static asUintN(a,b){if(0===b.length)return b;if(0>(a=d(a)))throw RangeError("Invalid value: not (convertible to) a safe integer");if(0===a)return e.__zero();if(b.sign){if(a>e.__kMaxLengthBits)throw RangeError("BigInt too big");return e.__truncateAndSubFromPowerOfTwo(a,b,!1)}if(a>=e.__kMaxLengthBits)return b;let c=0|(a+29)/30;if(b.length<c)return b;let f=a%30;if(b.length==c){if(0===f)return b;let g=b.__digit(c-1);if(0==g>>>f)return b}return e.__truncateToNBits(a,b)}static ADD(a,b){if(a=e.__toPrimitive(a),b=e.__toPrimitive(b),"string"==typeof a)return"string"!=typeof b&&(b=b.toString()),a+b;if("string"==typeof b)return a.toString()+b;if(a=e.__toNumeric(a),b=e.__toNumeric(b),e.__isBigInt(a)&&e.__isBigInt(b))return e.add(a,b);if("number"==typeof a&&"number"==typeof b)return a+b;throw TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(a,b){return e.__compare(a,b,0)}static LE(a,b){return e.__compare(a,b,1)}static GT(a,b){return e.__compare(a,b,2)}static GE(a,b){return e.__compare(a,b,3)}static EQ(a,b){for(;;){if(e.__isBigInt(a))return e.__isBigInt(b)?e.equal(a,b):e.EQ(b,a);if("number"==typeof a){if(e.__isBigInt(b))return e.__equalToNumber(b,a);if("object"!=typeof b)return a==b;b=e.__toPrimitive(b)}else if("string"==typeof a){if(e.__isBigInt(b))return null!==(a=e.__fromString(a))&&e.equal(a,b);if("object"!=typeof b)return a==b;b=e.__toPrimitive(b)}else if("boolean"==typeof a){if(e.__isBigInt(b))return e.__equalToNumber(b,+a);if("object"!=typeof b)return a==b;b=e.__toPrimitive(b)}else if("symbol"==typeof a){if(e.__isBigInt(b))return!1;if("object"!=typeof b)return a==b;b=e.__toPrimitive(b)}else{if("object"!=typeof a||"object"==typeof b&&b.constructor!==e)return a==b;a=e.__toPrimitive(a)}}}static NE(a,b){return!e.EQ(a,b)}static __zero(){return new e(0,!1)}static __oneDigit(a,b){let c=new e(1,b);return c.__setDigit(0,a),c}__copy(){let a=new e(this.length,this.sign);for(let b=0;b<this.length;b++)a[b]=this[b];return a}__trim(){let a=this.length,b=this[a-1];for(;0===b;)b=this[--a-1],this.pop();return 0===a&&(this.sign=!1),this}__initializeDigits(){for(let a=0;a<this.length;a++)this[a]=0}static __decideRounding(a,b,c,d){if(0<b)return -1;let e;if(0>b)e=-b-1;else{if(0===c)return -1;c--,d=a.__digit(c),e=29}let f=1<<e;if(0==(d&f))return -1;if(0!=(d&(f-=1)))return 1;for(;0<c;)if(c--,0!==a.__digit(c))return 1;return 0}static __fromDouble(a){e.__kBitConversionDouble[0]=a;let b=2047&e.__kBitConversionInts[1]>>>20,c=b-1023,d=(0|c/30)+1,f=new e(d,0>a),g=1048575&e.__kBitConversionInts[1]|1048576,h=e.__kBitConversionInts[0],i=20,j=c%30,k,l=0;if(20>j){let m=i-j;l=m+32,k=g>>>m,g=g<<32-m|h>>>m,h<<=32-m}else if(20===j)l=32,k=g,g=h,h=0;else{let n=j-i;l=32-n,k=g<<n|h>>>32-n,g=h<<n,h=0}f.__setDigit(d-1,k);for(let o=d-2;0<=o;o--)0<l?(l-=30,k=g>>>2,g=g<<30|h>>>2,h<<=30):k=0,f.__setDigit(o,k);return f.__trim()}static __isWhitespace(a){return!!(13>=a&&9<=a)||(159>=a?32==a:131071>=a?160==a||5760==a:196607>=a?10>=(a&=131071)||40==a||41==a||47==a||95==a||4096==a:65279==a)}static __fromString(a,b=0){let c=0,d=a.length,f=0;if(f===d)return e.__zero();let g=a.charCodeAt(f);for(;e.__isWhitespace(g);){if(++f===d)return e.__zero();g=a.charCodeAt(f)}if(43===g){if(++f===d)return null;g=a.charCodeAt(f),c=1}else if(45===g){if(++f===d)return null;g=a.charCodeAt(f),c=-1}if(0===b){if(b=10,48===g){if(++f===d)return e.__zero();if(88===(g=a.charCodeAt(f))||120===g){if(b=16,++f===d)return null;g=a.charCodeAt(f)}else if(79===g||111===g){if(b=8,++f===d)return null;g=a.charCodeAt(f)}else if(66===g||98===g){if(b=2,++f===d)return null;g=a.charCodeAt(f)}}}else if(16===b&&48===g){if(++f===d)return e.__zero();if(88===(g=a.charCodeAt(f))||120===g){if(++f===d)return null;g=a.charCodeAt(f)}}if(0!=c&&10!==b)return null;for(;48===g;){if(++f===d)return e.__zero();g=a.charCodeAt(f)}let h=d-f,i=e.__kMaxBitsPerChar[b],j=e.__kBitsPerCharTableMultiplier-1;if(h>1073741824/i)return null;let k=i*h+j>>>e.__kBitsPerCharTableShift,l=new e(0|(k+29)/30,!1),m=10>b?b:10,n=10<b?b-10:0;if(0==(b&b-1)){i>>=e.__kBitsPerCharTableShift;let o=[],p=[],q=!1;do{let r=0,s=0;for(;;){let t;if(g-48>>>0<m)t=g-48;else if((32|g)-97>>>0<n)t=(32|g)-87;else{q=!0;break}if(s+=i,r=r<<i|t,++f===d){q=!0;break}if(g=a.charCodeAt(f),30<s+i)break}o.push(r),p.push(s)}while(!q);e.__fillFromParts(l,o,p)}else{l.__initializeDigits();let u=!1,v=0;do{let w=0,x=1;for(;;){let y;if(g-48>>>0<m)y=g-48;else if((32|g)-97>>>0<n)y=(32|g)-87;else{u=!0;break}let z=x*b;if(1073741823<z)break;if(x=z,w=w*b+y,v++,++f===d){u=!0;break}g=a.charCodeAt(f)}j=30*e.__kBitsPerCharTableMultiplier-1;let A=0|(i*v+j>>>e.__kBitsPerCharTableShift)/30;l.__inplaceMultiplyAdd(x,w,A)}while(!u)}if(f!==d){if(!e.__isWhitespace(g))return null;for(f++;f<d;f++)if(g=a.charCodeAt(f),!e.__isWhitespace(g))return null}return l.sign=-1==c,l.__trim()}static __fillFromParts(a,b,c){let d=0,e=0,f=0;for(let g=b.length-1;0<=g;g--){let h=b[g],i=c[g];e|=h<<f,30===(f+=i)?(a.__setDigit(d++,e),f=0,e=0):30<f&&(a.__setDigit(d++,1073741823&e),f-=30,e=h>>>i-f)}if(0!==e){if(d>=a.length)throw Error("implementation bug");a.__setDigit(d++,e)}for(;d<a.length;d++)a.__setDigit(d,0)}static __toStringBasePowerOfTwo(a,b){let c=a.length,d=b-1;d=(15&(d=(51&(d=(85&d>>>1)+(85&d))>>>2)+(51&d))>>>4)+(15&d);let f=d,g=b-1,h=a.__digit(c-1),i=e.__clz30(h),j=0|(30*c-i+f-1)/f;if(a.sign&&j++,268435456<j)throw Error("string too long");let k=Array(j),l=j-1,m=0,n=0;for(let o=0;o<c-1;o++){let p=a.__digit(o),q=(m|p<<n)&g;k[l--]=e.__kConversionChars[q];let r=f-n;for(m=p>>>r,n=30-r;n>=f;)k[l--]=e.__kConversionChars[m&g],m>>>=f,n-=f}let s=(m|h<<n)&g;for(k[l--]=e.__kConversionChars[s],m=h>>>f-n;0!==m;)k[l--]=e.__kConversionChars[m&g],m>>>=f;if(a.sign&&(k[l--]="-"),-1!=l)throw Error("implementation bug");return k.join("")}static __toStringGeneric(a,b,c){let d=a.length;if(0===d)return"";if(1===d){let f=a.__unsignedDigit(0).toString(b);return!1===c&&a.sign&&(f="-"+f),f}let g=30*d-e.__clz30(a.__digit(d-1)),h=e.__kMaxBitsPerChar[b],i=h-1,j=g*e.__kBitsPerCharTableMultiplier;j+=i-1,j=0|j/i;let k=j+1>>1,l=e.exponentiate(e.__oneDigit(b,!1),e.__oneDigit(k,!1)),m,n,o=l.__unsignedDigit(0);if(1===l.length&&32767>=o){(m=new e(a.length,!1)).__initializeDigits();let p=0;for(let q=2*a.length-1;0<=q;q--){let r=p<<15|a.__halfDigit(q);m.__setHalfDigit(q,0|r/o),p=0|r%o}n=p.toString(b)}else{let s=e.__absoluteDivLarge(a,l,!0,!0);m=s.quotient;let t=s.remainder.__trim();n=e.__toStringGeneric(t,b,!0)}m.__trim();let u=e.__toStringGeneric(m,b,!0);for(;n.length<k;)n="0"+n;return!1===c&&a.sign&&(u="-"+u),u+n}static __unequalSign(a){return a?-1:1}static __absoluteGreater(a){return a?-1:1}static __absoluteLess(a){return a?1:-1}static __compareToBigInt(a,b){let c=a.sign;if(c!==b.sign)return e.__unequalSign(c);let d=e.__absoluteCompare(a,b);return 0<d?e.__absoluteGreater(c):0>d?e.__absoluteLess(c):0}static __compareToNumber(a,c){if(e.__isOneDigitInt(c)){let d=a.sign,f=0>c;if(d!==f)return e.__unequalSign(d);if(0===a.length){if(f)throw Error("implementation bug");return 0===c?0:-1}if(1<a.length)return e.__absoluteGreater(d);let g=b(c),h=a.__unsignedDigit(0);return h>g?e.__absoluteGreater(d):h<g?e.__absoluteLess(d):0}return e.__compareToDouble(a,c)}static __compareToDouble(a,b){if(b!=b)return b;if(b===1/0)return -1;if(b=== -1/0)return 1;let c=a.sign;if(c!==0>b)return e.__unequalSign(c);if(0===b)throw Error("implementation bug: should be handled elsewhere");if(0===a.length)return -1;e.__kBitConversionDouble[0]=b;let d=2047&e.__kBitConversionInts[1]>>>20;if(2047==d)throw Error("implementation bug: handled elsewhere");let f=d-1023;if(0>f)return e.__absoluteGreater(c);let g=a.length,h=a.__digit(g-1),i=e.__clz30(h),j=30*g-i,k=f+1;if(j<k)return e.__absoluteLess(c);if(j>k)return e.__absoluteGreater(c);let l=1048576|1048575&e.__kBitConversionInts[1],m=e.__kBitConversionInts[0],n=20,o=29-i;if(o!==(0|(j-1)%30))throw Error("implementation bug");let p,q=0;if(20>o){let r=n-o;q=r+32,p=l>>>r,l=l<<32-r|m>>>r,m<<=32-r}else if(20===o)q=32,p=l,l=m,m=0;else{let s=o-n;q=32-s,p=l<<s|m>>>32-s,l=m<<s,m=0}if((h>>>=0)>(p>>>=0))return e.__absoluteGreater(c);if(h<p)return e.__absoluteLess(c);for(let t=g-2;0<=t;t--){0<q?(q-=30,p=l>>>2,l=l<<30|m>>>2,m<<=30):p=0;let u=a.__unsignedDigit(t);if(u>p)return e.__absoluteGreater(c);if(u<p)return e.__absoluteLess(c)}if(0!==l||0!==m){if(0===q)throw Error("implementation bug");return e.__absoluteLess(c)}return 0}static __equalToNumber(a,c){return e.__isOneDigitInt(c)?0===c?0===a.length:1===a.length&&a.sign===0>c&&a.__unsignedDigit(0)===b(c):0===e.__compareToDouble(a,c)}static __comparisonResultToBool(a,b){return 0===b?0>a:1===b?0>=a:2===b?0<a:3===b?0<=a:void 0}static __compare(a,b,c){if(a=e.__toPrimitive(a),b=e.__toPrimitive(b),"string"==typeof a&&"string"==typeof b)switch(c){case 0:return a<b;case 1:return a<=b;case 2:return a>b;case 3:return a>=b}if(e.__isBigInt(a)&&"string"==typeof b)return null!==(b=e.__fromString(b))&&e.__comparisonResultToBool(e.__compareToBigInt(a,b),c);if("string"==typeof a&&e.__isBigInt(b))return null!==(a=e.__fromString(a))&&e.__comparisonResultToBool(e.__compareToBigInt(a,b),c);if(a=e.__toNumeric(a),b=e.__toNumeric(b),e.__isBigInt(a)){if(e.__isBigInt(b))return e.__comparisonResultToBool(e.__compareToBigInt(a,b),c);if("number"!=typeof b)throw Error("implementation bug");return e.__comparisonResultToBool(e.__compareToNumber(a,b),c)}if("number"!=typeof a)throw Error("implementation bug");if(e.__isBigInt(b))return e.__comparisonResultToBool(e.__compareToNumber(b,a),2^c);if("number"!=typeof b)throw Error("implementation bug");return 0===c?a<b:1===c?a<=b:2===c?a>b:3===c?a>=b:void 0}__clzmsd(){return e.__clz30(this.__digit(this.length-1))}static __absoluteAdd(a,b,c){if(a.length<b.length)return e.__absoluteAdd(b,a,c);if(0===a.length)return a;if(0===b.length)return a.sign===c?a:e.unaryMinus(a);let d=a.length;(0===a.__clzmsd()||b.length===a.length&&0===b.__clzmsd())&&d++;let f=new e(d,c),g=0,h=0;for(;h<b.length;h++){let i=a.__digit(h)+b.__digit(h)+g;g=i>>>30,f.__setDigit(h,1073741823&i)}for(;h<a.length;h++){let j=a.__digit(h)+g;g=j>>>30,f.__setDigit(h,1073741823&j)}return h<f.length&&f.__setDigit(h,g),f.__trim()}static __absoluteSub(a,b,c){if(0===a.length)return a;if(0===b.length)return a.sign===c?a:e.unaryMinus(a);let d=new e(a.length,c),f=0,g=0;for(;g<b.length;g++){let h=a.__digit(g)-b.__digit(g)-f;f=1&h>>>30,d.__setDigit(g,1073741823&h)}for(;g<a.length;g++){let i=a.__digit(g)-f;f=1&i>>>30,d.__setDigit(g,1073741823&i)}return d.__trim()}static __absoluteAddOne(a,b,c=null){let d=a.length;null===c?c=new e(d,b):c.sign=b;let f=1;for(let g=0;g<d;g++){let h=a.__digit(g)+f;f=h>>>30,c.__setDigit(g,1073741823&h)}return 0!=f&&c.__setDigitGrow(d,1),c}static __absoluteSubOne(a,b){let c=a.length;b=b||c;let d=new e(b,!1),f=1;for(let g=0;g<c;g++){let h=a.__digit(g)-f;f=1&h>>>30,d.__setDigit(g,1073741823&h)}if(0!=f)throw Error("implementation bug");for(let i=c;i<b;i++)d.__setDigit(i,0);return d}static __absoluteAnd(a,b,c=null){let d=a.length,f=b.length,g=f;if(d<f){g=d;let h=a,i=d;a=b,d=f,b=h,f=i}let j=g;null===c?c=new e(j,!1):j=c.length;let k=0;for(;k<g;k++)c.__setDigit(k,a.__digit(k)&b.__digit(k));for(;k<j;k++)c.__setDigit(k,0);return c}static __absoluteAndNot(a,b,c=null){let d=a.length,f=b.length,g=f;d<f&&(g=d);let h=d;null===c?c=new e(h,!1):h=c.length;let i=0;for(;i<g;i++)c.__setDigit(i,a.__digit(i)& ~b.__digit(i));for(;i<d;i++)c.__setDigit(i,a.__digit(i));for(;i<h;i++)c.__setDigit(i,0);return c}static __absoluteOr(a,b,c=null){let d=a.length,f=b.length,g=f;if(d<f){g=d;let h=a,i=d;a=b,d=f,b=h,f=i}let j=d;null===c?c=new e(j,!1):j=c.length;let k=0;for(;k<g;k++)c.__setDigit(k,a.__digit(k)|b.__digit(k));for(;k<d;k++)c.__setDigit(k,a.__digit(k));for(;k<j;k++)c.__setDigit(k,0);return c}static __absoluteXor(a,b,c=null){let d=a.length,f=b.length,g=f;if(d<f){g=d;let h=a,i=d;a=b,d=f,b=h,f=i}let j=d;null===c?c=new e(j,!1):j=c.length;let k=0;for(;k<g;k++)c.__setDigit(k,a.__digit(k)^b.__digit(k));for(;k<d;k++)c.__setDigit(k,a.__digit(k));for(;k<j;k++)c.__setDigit(k,0);return c}static __absoluteCompare(a,b){let c=a.length-b.length;if(0!=c)return c;let d=a.length-1;for(;0<=d&&a.__digit(d)===b.__digit(d);)d--;return 0>d?0:a.__unsignedDigit(d)>b.__unsignedDigit(d)?1:-1}static __multiplyAccumulate(a,b,c,d){if(0===b)return;let f=32767&b,g=b>>>15,h=0,i=0;for(let j,k=0;k<a.length;k++,d++){j=c.__digit(d);let l=a.__digit(k),m=32767&l,n=l>>>15,o=e.__imul(m,f),p=e.__imul(m,g),q=e.__imul(n,f),r=e.__imul(n,g);j+=i+o+h,h=j>>>30,j&=1073741823,j+=((32767&p)<<15)+((32767&q)<<15),h+=j>>>30,i=r+(p>>>15)+(q>>>15),c.__setDigit(d,1073741823&j)}for(;0!=h||0!==i;d++){let s=c.__digit(d);s+=h+i,i=0,h=s>>>30,c.__setDigit(d,1073741823&s)}}static __internalMultiplyAdd(a,b,c,d,f){let g=c,h=0;for(let i=0;i<d;i++){let j=a.__digit(i),k=e.__imul(32767&j,b),l=e.__imul(j>>>15,b),m=k+((32767&l)<<15)+h+g;g=m>>>30,h=l>>>15,f.__setDigit(i,1073741823&m)}if(f.length>d)for(f.__setDigit(d++,g+h);d<f.length;)f.__setDigit(d++,0);else if(0!==g+h)throw Error("implementation bug")}__inplaceMultiplyAdd(a,b,c){c>this.length&&(c=this.length);let d=32767&a,f=a>>>15,g=0,h=b;for(let i=0;i<c;i++){let j=this.__digit(i),k=32767&j,l=j>>>15,m=e.__imul(k,d),n=e.__imul(k,f),o=e.__imul(l,d),p=e.__imul(l,f),q=h+m+g;g=q>>>30,q&=1073741823,q+=((32767&n)<<15)+((32767&o)<<15),g+=q>>>30,h=p+(n>>>15)+(o>>>15),this.__setDigit(i,1073741823&q)}if(0!=g||0!==h)throw Error("implementation bug")}static __absoluteDivSmall(a,b,c=null){null===c&&(c=new e(a.length,!1));let d=0;for(let f,g=2*a.length-1;0<=g;g-=2){f=(d<<15|a.__halfDigit(g))>>>0;let h=0|f/b;f=((d=0|f%b)<<15|a.__halfDigit(g-1))>>>0;let i=0|f/b;d=0|f%b,c.__setDigit(g>>>1,h<<15|i)}return c}static __absoluteModSmall(a,b){let c=0;for(let d=2*a.length-1;0<=d;d--){let e=(c<<15|a.__halfDigit(d))>>>0;c=0|e%b}return c}static __absoluteDivLarge(a,b,c,d){let f=b.__halfDigitLength(),g=b.length,h=a.__halfDigitLength()-f,i=null;c&&(i=new e(h+2>>>1,!1)).__initializeDigits();let j=new e(f+2>>>1,!1);j.__initializeDigits();let k=e.__clz15(b.__halfDigit(f-1));0<k&&(b=e.__specialLeftShift(b,k,0));let l=e.__specialLeftShift(a,k,1),m=b.__halfDigit(f-1),n=0;for(let o,p=h;0<=p;p--){o=32767;let q=l.__halfDigit(p+f);if(q!==m){let r=(q<<15|l.__halfDigit(p+f-1))>>>0;o=0|r/m;let s=0|r%m,t=b.__halfDigit(f-2),u=l.__halfDigit(p+f-2);for(;e.__imul(o,t)>>>0>(s<<16|u)>>>0&&(o--,!(32767<(s+=m))););}e.__internalMultiplyAdd(b,o,0,g,j);let v=l.__inplaceSub(j,p,f+1);0!==v&&(v=l.__inplaceAdd(b,p,f),l.__setHalfDigit(p+f,32767&l.__halfDigit(p+f)+v),o--),c&&(1&p?n=o<<15:i.__setDigit(p>>>1,n|o))}if(d)return l.__inplaceRightShift(k),c?{quotient:i,remainder:l}:l;if(c)return i;throw Error("unreachable")}static __clz15(a){return e.__clz30(a)-15}__inplaceAdd(a,b,c){let d=0;for(let e=0;e<c;e++){let f=this.__halfDigit(b+e)+a.__halfDigit(e)+d;d=f>>>15,this.__setHalfDigit(b+e,32767&f)}return d}__inplaceSub(a,b,c){let d=0;if(1&b){b>>=1;let e=this.__digit(b),f=32767&e,g=0;for(;g<c-1>>>1;g++){let h=a.__digit(g),i=(e>>>15)-(32767&h)-d;d=1&i>>>15,this.__setDigit(b+g,(32767&i)<<15|32767&f),d=1&(f=(32767&(e=this.__digit(b+g+1)))-(h>>>15)-d)>>>15}let j=a.__digit(g),k=(e>>>15)-(32767&j)-d;if(d=1&k>>>15,this.__setDigit(b+g,(32767&k)<<15|32767&f),b+g+1>=this.length)throw RangeError("out of bounds");0==(1&c)&&(d=1&(f=(32767&(e=this.__digit(b+g+1)))-(j>>>15)-d)>>>15,this.__setDigit(b+a.length,1073709056&e|32767&f))}else{b>>=1;let l=0;for(;l<a.length-1;l++){let m=this.__digit(b+l),n=a.__digit(l),o=(32767&m)-(32767&n)-d;d=1&o>>>15;let p=(m>>>15)-(n>>>15)-d;d=1&p>>>15,this.__setDigit(b+l,(32767&p)<<15|32767&o)}let q=this.__digit(b+l),r=a.__digit(l),s=(32767&q)-(32767&r)-d;d=1&s>>>15;let t=0;0==(1&c)&&(d=1&(t=(q>>>15)-(r>>>15)-d)>>>15),this.__setDigit(b+l,(32767&t)<<15|32767&s)}return d}__inplaceRightShift(a){if(0===a)return;let b=this.__digit(0)>>>a,c=this.length-1;for(let d=0;d<c;d++){let e=this.__digit(d+1);this.__setDigit(d,1073741823&e<<30-a|b),b=e>>>a}this.__setDigit(c,b)}static __specialLeftShift(a,b,c){let d=a.length,f=new e(d+c,!1);if(0===b){for(let g=0;g<d;g++)f.__setDigit(g,a.__digit(g));return 0<c&&f.__setDigit(d,0),f}let h=0;for(let i=0;i<d;i++){let j=a.__digit(i);f.__setDigit(i,1073741823&j<<b|h),h=j>>>30-b}return 0<c&&f.__setDigit(d,h),f}static __leftShiftByAbsolute(a,b){let c=e.__toShiftAmount(b);if(0>c)throw RangeError("BigInt too big");let d=0|c/30,f=c%30,g=a.length,h=0!==f&&0!=a.__digit(g-1)>>>30-f,i=g+d+(h?1:0),j=new e(i,a.sign);if(0===f){let k=0;for(;k<d;k++)j.__setDigit(k,0);for(;k<i;k++)j.__setDigit(k,a.__digit(k-d))}else{let l=0;for(let m=0;m<d;m++)j.__setDigit(m,0);for(let n=0;n<g;n++){let o=a.__digit(n);j.__setDigit(n+d,1073741823&o<<f|l),l=o>>>30-f}if(h)j.__setDigit(g+d,l);else if(0!==l)throw Error("implementation bug")}return j.__trim()}static __rightShiftByAbsolute(a,b){let c=a.length,d=a.sign,f=e.__toShiftAmount(b);if(0>f)return e.__rightShiftByMaximum(d);let g=0|f/30,h=f%30,i=c-g;if(0>=i)return e.__rightShiftByMaximum(d);let j=!1;if(d){if(0!=(a.__digit(g)&(1<<h)-1))j=!0;else for(let k=0;k<g;k++)if(0!==a.__digit(k)){j=!0;break}}if(j&&0===h){let l=a.__digit(c-1);0== ~l&&i++}let m=new e(i,d);if(0===h){m.__setDigit(i-1,0);for(let n=g;n<c;n++)m.__setDigit(n-g,a.__digit(n))}else{let o=a.__digit(g)>>>h,p=c-g-1;for(let q=0;q<p;q++){let r=a.__digit(q+g+1);m.__setDigit(q,1073741823&r<<30-h|o),o=r>>>h}m.__setDigit(p,o)}return j&&(m=e.__absoluteAddOne(m,!0,m)),m.__trim()}static __rightShiftByMaximum(a){return a?e.__oneDigit(1,!0):e.__zero()}static __toShiftAmount(a){if(1<a.length)return -1;let b=a.__unsignedDigit(0);return b>e.__kMaxLengthBits?-1:b}static __toPrimitive(a,b="default"){if("object"!=typeof a||a.constructor===e)return a;if("undefined"!=typeof Symbol&&"symbol"==typeof Symbol.toPrimitive){let c=a[Symbol.toPrimitive];if(c){let d=c(b);if("object"!=typeof d)return d;throw TypeError("Cannot convert object to primitive value")}}let f=a.valueOf;if(f){let g=f.call(a);if("object"!=typeof g)return g}let h=a.toString;if(h){let i=h.call(a);if("object"!=typeof i)return i}throw TypeError("Cannot convert object to primitive value")}static __toNumeric(a){return e.__isBigInt(a)?a:+a}static __isBigInt(a){return"object"==typeof a&&null!==a&&a.constructor===e}static __truncateToNBits(a,b){let c=0|(a+29)/30,d=new e(c,b.sign),f=c-1;for(let g=0;g<f;g++)d.__setDigit(g,b.__digit(g));let h=b.__digit(f);if(0!=a%30){let i=32-a%30;h=h<<i>>>i}return d.__setDigit(f,h),d.__trim()}static __truncateAndSubFromPowerOfTwo(a,b,c){var d=Math.min;let f=0|(a+29)/30,g=new e(f,c),h=0,i=f-1,j=0;for(let k=d(i,b.length);h<k;h++){let l=0-b.__digit(h)-j;j=1&l>>>30,g.__setDigit(h,1073741823&l)}for(;h<i;h++)g.__setDigit(h,0|1073741823& -j);let m=i<b.length?b.__digit(i):0,n=a%30,o;if(0==n)o=0-m-j,o&=1073741823;else{let p=32-n;m=m<<p>>>p;let q=1<<32-p;o=q-m-j,o&=q-1}return g.__setDigit(i,o),g.__trim()}__digit(a){return this[a]}__unsignedDigit(a){return this[a]>>>0}__setDigit(a,b){this[a]=0|b}__setDigitGrow(a,b){this[a]=0|b}__halfDigitLength(){let a=this.length;return 32767>=this.__unsignedDigit(a-1)?2*a-1:2*a}__halfDigit(a){return 32767&this[a>>>1]>>>15*(1&a)}__setHalfDigit(a,b){let c=a>>>1,d=this.__digit(c);this.__setDigit(c,1&a?32767&d|b<<15:1073709056&d|32767&b)}static __digitPow(a,b){let c=1;for(;0<b;)1&b&&(c*=a),b>>>=1,a*=a;return c}static __isOneDigitInt(a){return(1073741823&a)===a}}return e.__kMaxLength=33554432,e.__kMaxLengthBits=e.__kMaxLength<<5,e.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],e.__kBitsPerCharTableShift=5,e.__kBitsPerCharTableMultiplier=1<<e.__kBitsPerCharTableShift,e.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],e.__kBitConversionBuffer=new ArrayBuffer(8),e.__kBitConversionDouble=new Float64Array(e.__kBitConversionBuffer),e.__kBitConversionInts=new Int32Array(e.__kBitConversionBuffer),e.__clz30=a?function(b){return a(b)-2}:function(a){var b=Math.LN2,c=Math.log;return 0===a?30:0|29-(0|c(a>>>0)/b)},e.__imul=Math.imul||function(a,b){return 0|a*b},e})},1876:function(a){!function(){var b={449:function(a,b){"use strict";b.byteLength=function(a){var b=i(a),c=b[0],d=b[1];return(c+d)*3/4-d},b.toByteArray=function(a){var b,c,f,g,h,j=i(a),k=j[0],l=j[1],m=new e((g=k,(g+(h=l))*3/4-h)),n=0,o=l>0?k-4:k;for(c=0;c<o;c+=4)b=d[a.charCodeAt(c)]<<18|d[a.charCodeAt(c+1)]<<12|d[a.charCodeAt(c+2)]<<6|d[a.charCodeAt(c+3)],m[n++]=b>>16&255,m[n++]=b>>8&255,m[n++]=255&b;return 2===l&&(b=d[a.charCodeAt(c)]<<2|d[a.charCodeAt(c+1)]>>4,m[n++]=255&b),1===l&&(b=d[a.charCodeAt(c)]<<10|d[a.charCodeAt(c+1)]<<4|d[a.charCodeAt(c+2)]>>2,m[n++]=b>>8&255,m[n++]=255&b),m},b.fromByteArray=function(a){for(var b,d=a.length,e=d%3,f=[],g=0,h=d-e;g<h;g+=16383)f.push(k(a,g,g+16383>h?h:g+16383));return 1===e?f.push(c[(b=a[d-1])>>2]+c[b<<4&63]+"=="):2===e&&f.push(c[(b=(a[d-2]<<8)+a[d-1])>>10]+c[b>>4&63]+c[b<<2&63]+"="),f.join("")};for(var c=[],d=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,h=f.length;g<h;++g)c[g]=f[g],d[f.charCodeAt(g)]=g;function i(a){var b=a.length;if(b%4>0)throw Error("Invalid string. Length must be a multiple of 4");var c=a.indexOf("=");-1===c&&(c=b);var d=c===b?0:4-c%4;return[c,d]}function j(a){return c[a>>18&63]+c[a>>12&63]+c[a>>6&63]+c[63&a]}function k(a,b,c){for(var d,e=[],f=b;f<c;f+=3)e.push(j(d=(a[f]<<16&16711680)+(a[f+1]<<8&65280)+(255&a[f+2])));return e.join("")}d["-".charCodeAt(0)]=62,d["_".charCodeAt(0)]=63},877:function(a,b,c){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */ var d=c(449),e=c(543),f="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function g(a){if(a>2147483647)throw RangeError('The value "'+a+'" is invalid for option "size"');var b=new Uint8Array(a);return Object.setPrototypeOf(b,h.prototype),b}function h(a,b,c){if("number"==typeof a){if("string"==typeof b)throw TypeError('The "string" argument must be of type string. Received type number');return k(a)}return i(a,b,c)}function i(a,b,c){if("string"==typeof a)return l(a,b);if(ArrayBuffer.isView(a))return m(a);if(null==a)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(S(a,ArrayBuffer)||a&&S(a.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(S(a,SharedArrayBuffer)||a&&S(a.buffer,SharedArrayBuffer)))return n(a,b,c);if("number"==typeof a)throw TypeError('The "value" argument must not be of type number. Received type number');var d=a.valueOf&&a.valueOf();if(null!=d&&d!==a)return h.from(d,b,c);var e=o(a);if(e)return e;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof a[Symbol.toPrimitive])return h.from(a[Symbol.toPrimitive]("string"),b,c);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}function j(a){if("number"!=typeof a)throw TypeError('"size" argument must be of type number');if(a<0)throw RangeError('The value "'+a+'" is invalid for option "size"')}function k(a){return j(a),g(a<0?0:0|p(a))}function l(a,b){if(("string"!=typeof b||""===b)&&(b="utf8"),!h.isEncoding(b))throw TypeError("Unknown encoding: "+b);var c=0|q(a,b),d=g(c),e=d.write(a,b);return e!==c&&(d=d.slice(0,e)),d}function m(a){for(var b=a.length<0?0:0|p(a.length),c=g(b),d=0;d<b;d+=1)c[d]=255&a[d];return c}function n(a,b,c){var d;if(b<0||a.byteLength<b)throw RangeError('"offset" is outside of buffer bounds');if(a.byteLength<b+(c||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(d=void 0===b&& void 0===c?new Uint8Array(a):void 0===c?new Uint8Array(a,b):new Uint8Array(a,b,c),h.prototype),d}function o(a){if(h.isBuffer(a)){var b,c=0|p(a.length),d=g(c);return 0===d.length||a.copy(d,0,0,c),d}if(void 0!==a.length){return"number"!=typeof a.length||(b=a.length,b!=b)?g(0):m(a)}if("Buffer"===a.type&&Array.isArray(a.data))return m(a.data)}function p(a){if(a>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|a}function q(a,b){if(h.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||S(a,ArrayBuffer))return a.byteLength;if("string"!=typeof a)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);var c=a.length,d=arguments.length>2&& !0===arguments[2];if(!d&&0===c)return 0;for(var e=!1;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return N(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return Q(a).length;default:if(e)return d?-1:N(a).length;b=(""+b).toLowerCase(),e=!0}}function r(a,b,c){var d=!1;if((void 0===b||b<0)&&(b=0),b>this.length||((void 0===c||c>this.length)&&(c=this.length),c<=0||(c>>>=0)<=(b>>>=0)))return"";for(a||(a="utf8");;)switch(a){case"hex":return F(this,b,c);case"utf8":case"utf-8":return B(this,b,c);case"ascii":return D(this,b,c);case"latin1":case"binary":return E(this,b,c);case"base64":return A(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,b,c);default:if(d)throw TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function s(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function t(a,b,c,d,e){var f;if(0===a.length)return -1;if("string"==typeof c?(d=c,c=0):c>2147483647?c=2147483647:c< -2147483648&&(c=-2147483648),f=c=+c,f!=f&&(c=e?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(e)return -1;c=a.length-1}else if(c<0){if(!e)return -1;c=0}if("string"==typeof b&&(b=h.from(b,d)),h.isBuffer(b))return 0===b.length?-1:u(a,b,c,d,e);if("number"==typeof b)return(b&=255,"function"==typeof Uint8Array.prototype.indexOf)?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):u(a,[b],c,d,e);throw TypeError("val must be string, number or Buffer")}function u(a,b,c,d,e){var f,g=1,h=a.length,i=b.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return -1;g=2,h/=2,i/=2,c/=2}function j(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}if(e){var k=-1;for(f=c;f<h;f++)if(j(a,f)===j(b,-1===k?0:f-k)){if(-1===k&&(k=f),f-k+1===i)return k*g}else -1!==k&&(f-=f-k),k=-1}else for(c+i>h&&(c=h-i),f=c;f>=0;f--){for(var l=!0,m=0;m<i;m++)if(j(a,f+m)!==j(b,m)){l=!1;break}if(l)return f}return -1}function v(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d))>e&&(d=e):d=e;var f=b.length;d>f/2&&(d=f/2);for(var g=0;g<d;++g){var h,i=parseInt(b.substr(2*g,2),16);if(h=i,h!=h)break;a[c+g]=i}return g}function w(a,b,c,d){return R(N(b,a.length-c),a,c,d)}function x(a,b,c,d){return R(O(b),a,c,d)}b.Buffer=h,b.SlowBuffer=function(a){return+a!=a&&(a=0),h.alloc(+a)},b.INSPECT_MAX_BYTES=50,b.kMaxLength=2147483647,h.TYPED_ARRAY_SUPPORT=function(){try{var a=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(a,b),42===a.foo()}catch(c){return!1}}(),h.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(a,b,c){return i(a,b,c)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(a,b,c){var d,e,f;return d=a,e=b,f=c,(j(d),d<=0)?g(d):void 0!==e?"string"==typeof f?g(d).fill(e,f):g(d).fill(e):g(d)},h.allocUnsafe=function(a){return k(a)},h.allocUnsafeSlow=function(a){return k(a)};function y(a,b,c,d){return R(Q(b),a,c,d)}function z(a,b,c,d){return R(P(b,a.length-c),a,c,d)}function A(a,b,c){return 0===b&&c===a.length?d.fromByteArray(a):d.fromByteArray(a.slice(b,c))}function B(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;e<c;){var f,g,h,i,j=a[e],k=null,l=j>239?4:j>223?3:j>191?2:1;if(e+l<=c)switch(l){case 1:j<128&&(k=j);break;case 2:(192&(f=a[e+1]))==128&&(i=(31&j)<<6|63&f)>127&&(k=i);break;case 3:f=a[e+1],g=a[e+2],(192&f)==128&&(192&g)==128&&(i=(15&j)<<12|(63&f)<<6|63&g)>2047&&(i<55296||i>57343)&&(k=i);break;case 4:f=a[e+1],g=a[e+2],h=a[e+3],(192&f)==128&&(192&g)==128&&(192&h)==128&&(i=(15&j)<<18|(63&f)<<12|(63&g)<<6|63&h)>65535&&i<1114112&&(k=i)}null===k?(k=65533,l=1):k>65535&&(k-=65536,d.push(k>>>10&1023|55296),k=56320|1023&k),d.push(k),e+=l}return C(d)}function C(a){var b=a.length;if(b<=4096)return String.fromCharCode.apply(String,a);for(var c="",d=0;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=4096));return c}function D(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}function E(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}function F(a,b,c){var d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);for(var e="",f=b;f<c;++f)e+=T[a[f]];return e}function G(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function H(a,b,c){if(a%1!=0||a<0)throw RangeError("offset is not uint");if(a+b>c)throw RangeError("Trying to access beyond buffer length")}function I(a,b,c,d,e,f){if(!h.isBuffer(a))throw TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw RangeError('"value" argument is out of bounds');if(c+d>a.length)throw RangeError("Index out of range")}function J(a,b,c,d,e,f){if(c+d>a.length||c<0)throw RangeError("Index out of range")}function K(a,b,c,d,f){return b=+b,c>>>=0,f||J(a,b,c,4,34028234663852886e22,-34028234663852886e22),e.write(a,b,c,d,23,4),c+4}function L(a,b,c,d,f){return b=+b,c>>>=0,f||J(a,b,c,8,17976931348623157e292,-17976931348623157e292),e.write(a,b,c,d,52,8),c+8}h.isBuffer=function(a){return null!=a&& !0===a._isBuffer&&a!==h.prototype},h.compare=function(a,b){if(S(a,Uint8Array)&&(a=h.from(a,a.offset,a.byteLength)),S(b,Uint8Array)&&(b=h.from(b,b.offset,b.byteLength)),!h.isBuffer(a)||!h.isBuffer(b))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===b)return 0;for(var c=a.length,d=b.length,e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:d<c?1:0},h.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(a,b){if(!Array.isArray(a))throw TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return h.alloc(0);if(void 0===b)for(c=0,b=0;c<a.length;++c)b+=a[c].length;var c,d=h.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){var f=a[c];if(S(f,Uint8Array)&&(f=h.from(f)),!h.isBuffer(f))throw TypeError('"list" argument must be an Array of Buffers');f.copy(d,e),e+=f.length}return d},h.byteLength=q,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var a=this.length;if(a%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<a;b+=2)s(this,b,b+1);return this},h.prototype.swap32=function(){var a=this.length;if(a%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)s(this,b,b+3),s(this,b+1,b+2);return this},h.prototype.swap64=function(){var a=this.length;if(a%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)s(this,b,b+7),s(this,b+1,b+6),s(this,b+2,b+5),s(this,b+3,b+4);return this},h.prototype.toString=function(){var a=this.length;return 0===a?"":0===arguments.length?B(this,0,a):r.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(a){if(!h.isBuffer(a))throw TypeError("Argument must be a Buffer");return this===a||0===h.compare(this,a)},h.prototype.inspect=function(){var a="",c=b.INSPECT_MAX_BYTES;return a=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(a+=" ... "),"<Buffer "+a+">"},f&&(h.prototype[f]=h.prototype.inspect),h.prototype.compare=function(a,b,c,d,e){if(S(a,Uint8Array)&&(a=h.from(a,a.offset,a.byteLength)),!h.isBuffer(a))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),b<0||c>a.length||d<0||e>this.length)throw RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return -1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;for(var f=e-d,g=c-b,i=Math.min(f,g),j=this.slice(d,e),k=a.slice(b,c),l=0;l<i;++l)if(j[l]!==k[l]){f=j[l],g=k[l];break}return f<g?-1:g<f?1:0},h.prototype.includes=function(a,b,c){return -1!==this.indexOf(a,b,c)},h.prototype.indexOf=function(a,b,c){return t(this,a,b,c,!0)},h.prototype.lastIndexOf=function(a,b,c){return t(this,a,b,c,!1)},h.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var e,f,g,h,i=this.length-b;if((void 0===c||c>i)&&(c=i),a.length>0&&(c<0||b<0)||b>this.length)throw RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(var j=!1;;)switch(d){case"hex":return v(this,a,b,c);case"utf8":case"utf-8":return w(this,a,b,c);case"ascii":return x(this,a,b,c);case"latin1":case"binary":return e=this,f=a,g=b,x(e,f,g,h=c);case"base64":return y(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,a,b,c);default:if(j)throw TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),j=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},h.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c)<0&&(a=0):a>c&&(a=c),b<0?(b+=c)<0&&(b=0):b>c&&(b=c),b<a&&(b=a);var d=this.subarray(a,b);return Object.setPrototypeOf(d,h.prototype),d},h.prototype.readUIntLE=function(a,b,c){a>>>=0,b>>>=0,c||H(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},h.prototype.readUIntBE=function(a,b,c){a>>>=0,b>>>=0,c||H(a,b,this.length);for(var d=this[a+ --b],e=1;b>0&&(e*=256);)d+=this[a+ --b]*e;return d},h.prototype.readUInt8=function(a,b){return a>>>=0,b||H(a,1,this.length),this[a]},h.prototype.readUInt16LE=function(a,b){return a>>>=0,b||H(a,2,this.length),this[a]|this[a+1]<<8},h.prototype.readUInt16BE=function(a,b){return a>>>=0,b||H(a,2,this.length),this[a]<<8|this[a+1]},h.prototype.readUInt32LE=function(a,b){return a>>>=0,b||H(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},h.prototype.readUInt32BE=function(a,b){return a>>>=0,b||H(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},h.prototype.readIntLE=function(a,b,c){a>>>=0,b>>>=0,c||H(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d>=(e*=128)&&(d-=Math.pow(2,8*b)),d},h.prototype.readIntBE=function(a,b,c){a>>>=0,b>>>=0,c||H(a,b,this.length);for(var d=b,e=1,f=this[a+ --d];d>0&&(e*=256);)f+=this[a+ --d]*e;return f>=(e*=128)&&(f-=Math.pow(2,8*b)),f},h.prototype.readInt8=function(a,b){return(a>>>=0,b||H(a,1,this.length),128&this[a])?-((255-this[a]+1)*1):this[a]},h.prototype.readInt16LE=function(a,b){a>>>=0,b||H(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},h.prototype.readInt16BE=function(a,b){a>>>=0,b||H(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},h.prototype.readInt32LE=function(a,b){return a>>>=0,b||H(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},h.prototype.readInt32BE=function(a,b){return a>>>=0,b||H(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},h.prototype.readFloatLE=function(a,b){return a>>>=0,b||H(a,4,this.length),e.read(this,a,!0,23,4)},h.prototype.readFloatBE=function(a,b){return a>>>=0,b||H(a,4,this.length),e.read(this,a,!1,23,4)},h.prototype.readDoubleLE=function(a,b){return a>>>=0,b||H(a,8,this.length),e.read(this,a,!0,52,8)},h.prototype.readDoubleBE=function(a,b){return a>>>=0,b||H(a,8,this.length),e.read(this,a,!1,52,8)},h.prototype.writeUIntLE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){var e=Math.pow(2,8*c)-1;I(this,a,b,c,e,0)}var f=1,g=0;for(this[b]=255&a;++g<c&&(f*=256);)this[b+g]=a/f&255;return b+c},h.prototype.writeUIntBE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){var e=Math.pow(2,8*c)-1;I(this,a,b,c,e,0)}var f=c-1,g=1;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=a/g&255;return b+c},h.prototype.writeUInt8=function(a,b,c){return a=+a,b>>>=0,c||I(this,a,b,1,255,0),this[b]=255&a,b+1},h.prototype.writeUInt16LE=function(a,b,c){return a=+a,b>>>=0,c||I(this,a,b,2,65535,0),this[b]=255&a,this[b+1]=a>>>8,b+2},h.prototype.writeUInt16BE=function(a,b,c){return a=+a,b>>>=0,c||I(this,a,b,2,65535,0),this[b]=a>>>8,this[b+1]=255&a,b+2},h.prototype.writeUInt32LE=function(a,b,c){return a=+a,b>>>=0,c||I(this,a,b,4,4294967295,0),this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a,b+4},h.prototype.writeUInt32BE=function(a,b,c){return a=+a,b>>>=0,c||I(this,a,b,4,4294967295,0),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},h.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b>>>=0,!d){var e=Math.pow(2,8*c-1);I(this,a,b,c,e-1,-e)}var f=0,g=1,h=0;for(this[b]=255&a;++f<c&&(g*=256);)a<0&&0===h&&0!==this[b+f-1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},h.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b>>>=0,!d){var e=Math.pow(2,8*c-1);I(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0;for(this[b+f]=255&a;--f>=0&&(g*=256);)a<0&&0===h&&0!==this[b+f+1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},h.prototype.writeInt8=function(a,b,c){return a=+a,b>>>=0,c||I(this,a,b,1,127,-128),a<0&&(a=255+a+1),this[b]=255&a,b+1},h.prototype.writeInt16LE=function(a,b,c){return a=+a,b>>>=0,c||I(this,a,b,2,32767,-32768),this[b]=255&a,this[b+1]=a>>>8,b+2},h.prototype.writeInt16BE=function(a,b,c){return a=+a,b>>>=0,c||I(this,a,b,2,32767,-32768),this[b]=a>>>8,this[b+1]=255&a,b+2},h.prototype.writeInt32LE=function(a,b,c){return a=+a,b>>>=0,c||I(this,a,b,4,2147483647,-2147483648),this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24,b+4},h.prototype.writeInt32BE=function(a,b,c){return a=+a,b>>>=0,c||I(this,a,b,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},h.prototype.writeFloatLE=function(a,b,c){return K(this,a,b,!0,c)},h.prototype.writeFloatBE=function(a,b,c){return K(this,a,b,!1,c)},h.prototype.writeDoubleLE=function(a,b,c){return L(this,a,b,!0,c)},h.prototype.writeDoubleBE=function(a,b,c){return L(this,a,b,!1,c)},h.prototype.copy=function(a,b,c,d){if(!h.isBuffer(a))throw TypeError("argument should be a Buffer");if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c||0===a.length||0===this.length)return 0;if(b<0)throw RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw RangeError("Index out of range");if(d<0)throw RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var e=d-c;if(this===a&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(b,c,d);else if(this===a&&c<b&&b<d)for(var f=e-1;f>=0;--f)a[f+b]=this[f+c];else Uint8Array.prototype.set.call(a,this.subarray(c,d),b);return e},h.prototype.fill=function(a,b,c,d){if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),void 0!==d&&"string"!=typeof d)throw TypeError("encoding must be a string");if("string"==typeof d&&!h.isEncoding(d))throw TypeError("Unknown encoding: "+d);if(1===a.length){var e,f=a.charCodeAt(0);("utf8"===d&&f<128||"latin1"===d)&&(a=f)}}else"number"==typeof a?a&=255:"boolean"==typeof a&&(a=Number(a));if(b<0||this.length<b||this.length<c)throw RangeError("Out of range index");if(c<=b)return this;if(b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0),"number"==typeof a)for(e=b;e<c;++e)this[e]=a;else{var g=h.isBuffer(a)?a:h.from(a,d),i=g.length;if(0===i)throw TypeError('The value "'+a+'" is invalid for argument "value"');for(e=0;e<c-b;++e)this[e+b]=g[e%i]}return this};var M=/[^+/0-9A-Za-z-_]/g;function N(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;g<d;++g){if((c=a.charCodeAt(g))>55295&&c<57344){if(!e){if(c>56319||g+1===d){(b-=3)> -1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)> -1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)> -1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else if(c<1114112){if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}else throw Error("Invalid code point")}return f}function O(a){for(var b=[],c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function P(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);++g)d=(c=a.charCodeAt(g))>>8,e=c%256,f.push(e),f.push(d);return f}function Q(a){return d.toByteArray(function(a){if((a=(a=a.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;a.length%4!=0;)a+="=";return a}(a))}function R(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length)&&!(e>=a.length);++e)b[e+c]=a[e];return e}function S(a,b){return a instanceof b||null!=a&&null!=a.constructor&&null!=a.constructor.name&&a.constructor.name===b.name}var T=function(){for(var a="0123456789abcdef",b=Array(256),c=0;c<16;++c)for(var d=16*c,e=0;e<16;++e)b[d+e]=a[c]+a[e];return b}()},543:function(a,b){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ b.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<< -k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<< -k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},b.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?5960464477539062e-23:0,n=d?0:f-1,o=d?1:-1,p=b<0||0===b&&1/b<0?1:0;for(isNaN(b=Math.abs(b))||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),g+l>=1?b+=m/i:b+=m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}}},c={};function d(a){var e=c[a];if(void 0!==e)return e.exports;var f=c[a]={exports:{}},g=!0;try{b[a](f,f.exports,d),g=!1}finally{g&&delete c[a]}return f.exports}d.ab="//";var e=d(877);a.exports=e}()},8779:function(a){"use strict";let b="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;if(!b)throw Error("Unable to find global scope. Are you sure this is running in the browser?");if(!b.AbortController)throw Error('Could not find "AbortController" in the global scope. You need to polyfill it first');a.exports.H=b.AbortController},2789:function(a){function b(a){this._comparator=a||b.DEFAULT_COMPARATOR,this._elements=[]}a.exports=b,b.DEFAULT_COMPARATOR=function(a,b){return"number"==typeof a&&"number"==typeof b?a-b:(a=a.toString())==(b=b.toString())?0:a>b?1:-1},b.prototype.isEmpty=function(){return 0===this.size()},b.prototype.peek=function(){if(this.isEmpty())throw Error("PriorityQueue is empty");return this._elements[0]},b.prototype.deq=function(){var a=this.peek(),b=this._elements.pop(),c=this.size();if(0===c)return a;this._elements[0]=b;for(var d=0;d<c;){var e=d,f=2*d+1,g=2*d+2;if(f<c&&this._compare(f,e)>=0&&(e=f),g<c&&this._compare(g,e)>=0&&(e=g),e===d)break;this._swap(e,d),d=e}return a},b.prototype.enq=function(a){for(var b=this._elements.push(a),c=b-1;c>0;){var d=Math.floor((c-1)/2);if(0>=this._compare(c,d))break;this._swap(d,c),c=d}return b},b.prototype.size=function(){return this._elements.length},b.prototype.forEach=function(a){return this._elements.forEach(a)},b.prototype._compare=function(a,b){return this._comparator(this._elements[a],this._elements[b])},b.prototype._swap=function(a,b){var c=this._elements[a];this._elements[a]=this._elements[b],this._elements[b]=c}},45:function(a,b,c){var d,e,f=c(3454);e=function(a){setTimeout(a,0)},void 0!==f&&f&&"function"==typeof f.nextTick&&(e=f.nextTick),a.exports=function(a){var b={capacity:a||1,current:0,queue:[],firstHere:!1,take:function(){if(!1===b.firstHere){b.current++,b.firstHere=!0;var a=1}else var a=0;var c={n:1};"function"==typeof arguments[0]?c.task=arguments[0]:c.n=arguments[0],arguments.length>=2&&("function"==typeof arguments[1]?c.task=arguments[1]:c.n=arguments[1]);var d=c.task;if(c.task=function(){d(b.leave)},b.current+c.n-a>b.capacity)return 1===a&&(b.current--,b.firstHere=!1),b.queue.push(c);b.current+=c.n-a,c.task(b.leave),1===a&&(b.firstHere=!1)},leave:function(a){if(a=a||1,b.current-=a,!b.queue.length){if(b.current<0)throw Error("leave called too many times.");return}var c=b.queue[0];!(c.n+b.current>b.capacity)&&(b.queue.shift(),b.current+=c.n,e(c.task))},available:function(a){return a=a||1,b.current+a<=b.capacity}};return b}},7568:function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(j){c(j);return}h.done?b(i):Promise.resolve(i).then(d,e)}function e(a){return function(){var b=this,c=arguments;return new Promise(function(e,f){var g=a.apply(b,c);function h(a){d(g,e,f,h,i,"next",a)}function i(a){d(g,e,f,h,i,"throw",a)}h(void 0)})}}c.d(b,{Z:function(){return e}})}}])